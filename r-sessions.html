<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>RStudio Workbench Administration – r-sessions</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007ba5; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #007ba5; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #007ba5; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>

  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script src="site_libs/quarto-nav/quarto-nav.js"></script>
  <script src="site_libs/quarto-nav/headroom.min.js"></script>
  <meta name="quarto:offset" content=".">
  <script src="site_libs/quarto-search/autocomplete.min.js"></script>
  <script src="site_libs/quarto-search/fuse.min.js"></script>
  <script src="site_libs/quarto-search/quarto-search.js"></script>
  <script src="site_libs/quarto-html/quarto.js"></script>
  <script src="site_libs/quarto-html/popper.min.js"></script>
  <script src="site_libs/quarto-html/tippy.umd.min.js"></script>
  <script src="site_libs/quarto-html/clipboard.min.js"></script>
  <script src="site_libs/quarto-html/anchor.min.js"></script>
  <script src="site_libs/quarto-html/quarto-html.js"></script>
  <link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
  <link href="site_libs/quarto-html/quarto-css-variables.css" rel="stylesheet">
  <script src="site_libs/bootstrap/bootstrap.min.js"></script>
  <link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
  <link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
  <!-- Google Analytics -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-20375833-3', 'auto', {'allowLinker': true});
  ga('require', 'linker');
  ga('linker:autoLink', ['rstudio.com', 'rstudio.github.io', 'rviews.rstudio.com', 'community.rstudio.com', 'rpubs.rstudio.com', 'environments.rstudio.com', 'rstudio.org', 'dailies.rstudio.com', 'pages.rstudio.com', 'db.rstudio.com', 'solutions.rstudio.com', 'docs.rstudio.com', 'spark.rstudio.com', 'shiny.rstudio.com', 'education.rstudio.com', 'rstudio.cloud', 'shinyapps.io', 'team-admin.rstudio.com', 'blog.rstudio.com', 'support.rstudio.com', 'blogs.rstudio.com', 'keras.rstudio.com', 'swag.rstudio.com', 'tensorflow.rstudio.com', 'packagemanager.rstudio.com'] );
  ga('send', 'pageview');
  </script>
  <!-- End Google Analytics -->
  <style type="text/css">
    details {
      margin-bottom: 1em;
    } 
    details[show] {
      margin-bottom: 0;
    }

    .quarto-unresolved-ref {
      font-weight: 600;
    }

    .quarto-cover-image {
      max-width: 35%;
      float: right;
      margin-left: 30px;
    }

    .cell-output-display {
      overflow-x: auto;
    }

    .hidden {
      display: none;
    }
  </style>
  <link rel="stylesheet" href="styles/guide.css">
</head>
<body>
<div id="quarto-search-results"></div>
<header id="quarto-header" class="headroom fixed-top">
<nav class="quarto-secondary-nav py-2 d-lg-none d-md-block " data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <div class="container-fluid d-flex justify-content-between">
    <h1 class="quarto-secondary-nav-title mb-0 fs-3 d-inline"></h1>
    <button type="button" class="quarto-btn-toggle btn d-lg-none py-0 px-1 d-inline-block border-0 ">
      <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</nav>
</header>
 <!-- /navbar/sidebar -->
<div class="container-fluid quarto-container d-flex flex-column page-layout-article">
<div class="row flex-fill" id="quarto-content">
  <div id="quarto-sidebar" class="col col-12 col-lg-3 d-lg-flex px-0 pt-0 sidebar collapse sidebar-navigation">
    <nav class="me-lg-auto py-2 docked  overflow-scroll">
  <div class="px-3 pt-lg-2 mt-1 text-left">
    <img src="./images/logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
  </div>
    <div class="d-flex px-3 mt-2 flex-shrink-0 align-items-center">
      <div class="sidebar-search">
      <form class="d-flex mb-0">
  <input id="quarto-search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>
      </div>
    </div>
  <div class="sidebar-menu-container"> 
  <ul class="list-unstyled mt-3 px-3">
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./index_splits/index.sub_00.html" class="">Getting Started</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#gettingstarted-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="gettingstarted-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_01.html" class="">Introduction</a>
</li>
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_02.html" class="">Installation</a>
</li>
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_03.html" class="">Management Script</a>
</li>
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_04.html" class="">Activation</a>
</li>
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_05.html" class="">Accessing the Server</a>
</li>
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_06.html" class="">Community Resources</a>
</li>
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_07.html" class="">Professional Support</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./server-management_splits/server-management.sub_00.html" class="">Server Management</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#servermanagement-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="servermanagement-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./server-management_splits/server-management.sub_01.html" class="">Core Administrative Tasks</a>
</li>
          <li class="sidebar-item">
  <a href="./server-management_splits/server-management.sub_02.html" class="">Logging</a>
</li>
          <li class="sidebar-item">
  <a href="./server-management_splits/server-management.sub_03.html" class="">Administrative Dashboard</a>
</li>
          <li class="sidebar-item">
  <a href="./server-management_splits/server-management.sub_04.html" class="">Automated Crash Reporting</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./authenticating-users_splits/authenticating-users.sub_00.html" class="">Authenticating Users</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#authenticatingusers-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="authenticatingusers-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_01.html" class="">User Provisioning</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_02.html" class="">PAM Basics</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_03.html" class="">Authentication Migration</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_04.html" class="">PAM Authentication</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_05.html" class="">Restricting Access to Specific Users</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_06.html" class="">SAML Single Sign-On Authentication</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_07.html" class="">OpenID Connect Authentication</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_08.html" class="">Proxied Authentication</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_09.html" class="">Google Accounts (deprecated)</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_10.html" class="">Customizing the Sign-In Page</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_11.html" class="">Authorization Timeout</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./access-and-security_splits/access-and-security.sub_00.html" class="">Access and Security</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#accessandsecurity-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="accessandsecurity-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_01.html" class="">Network Port and Address</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_02.html" class="">IP Access Rules</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_03.html" class="">Frame Origin</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_04.html" class="">Same Site cookies</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_05.html" class="">Compatibility with Safari 13+</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_06.html" class="">Additional Security Considerations</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_07.html" class="">Additional Headers</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_08.html" class="">Secure Sockets (SSL)</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_09.html" class="">SSL Ports</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_10.html" class="">Cookies</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_11.html" class="">Server Permissions</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_12.html" class="">Running with a Proxy</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./r-sessions_splits/r-sessions.sub_00.html" class="">R Sessions</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#rsessions-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="rsessions-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_01.html" class="">R Executable and Libraries</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_02.html" class="">Session Startup Scripts</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_03.html" class="">User and Group Profiles</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_04.html" class="">Multiple R Sessions</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_05.html" class="">PAM Sessions</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_06.html" class="">Kerberos</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_07.html" class="">Directory Management</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_08.html" class="">Workspace Management</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_09.html" class="">First Project Template</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_10.html" class="">Project Sharing</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_11.html" class="">Package Installation</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_12.html" class="">Feature Limits</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_13.html" class="">Notifications</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_14.html" class="">RStudio Connect Server</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_15.html" class="">Terminal WebSockets</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_16.html" class="">Customizing Session Settings</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./r-versions-1_splits/r-versions-1.sub_00.html" class="">R Versions</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#rversions-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="rversions-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./r-versions-1_splits/r-versions-1.sub_01.html" class="">Overview</a>
</li>
          <li class="sidebar-item">
  <a href="./r-versions-1_splits/r-versions-1.sub_02.html" class="">Installing R</a>
</li>
          <li class="sidebar-item">
  <a href="./r-versions-1_splits/r-versions-1.sub_03.html" class="">Configuring the Default Version of R</a>
</li>
          <li class="sidebar-item">
  <a href="./r-versions-1_splits/r-versions-1.sub_04.html" class="">Using Multiple Versions of R Concurrently</a>
</li>
          <li class="sidebar-item">
  <a href="./r-versions-1_splits/r-versions-1.sub_05.html" class="">Managing Upgrades of R</a>
</li>
          <li class="sidebar-item">
  <a href="./r-versions-1_splits/r-versions-1.sub_06.html" class="">Session Initialization</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./load-balancing_splits/load-balancing.sub_00.html" class="">Load Balancing</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#loadbalancing-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="loadbalancing-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./load-balancing_splits/load-balancing.sub_01.html" class="">Overview</a>
</li>
          <li class="sidebar-item">
  <a href="./load-balancing_splits/load-balancing.sub_02.html" class="">Load Balancing vs. Job Launcher</a>
</li>
          <li class="sidebar-item">
  <a href="./load-balancing_splits/load-balancing.sub_03.html" class="">Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./load-balancing_splits/load-balancing.sub_04.html" class="">Access and Availability</a>
</li>
          <li class="sidebar-item">
  <a href="./load-balancing_splits/load-balancing.sub_05.html" class="">Balancing Methods</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./auditing-and-monitoring_splits/auditing-and-monitoring.sub_00.html" class="">Auditing and Monitoring</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#auditingandmonitoring-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="auditingandmonitoring-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./auditing-and-monitoring_splits/auditing-and-monitoring.sub_01.html" class="">Auditing Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./auditing-and-monitoring_splits/auditing-and-monitoring.sub_02.html" class="">Monitoring Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./auditing-and-monitoring_splits/auditing-and-monitoring.sub_03.html" class="">Server Health Checks</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./license-management_splits/license-management.sub_00.html" class="">License Management</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#licensemanagement-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="licensemanagement-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./license-management_splits/license-management.sub_01.html" class="">Product Activation</a>
</li>
          <li class="sidebar-item">
  <a href="./license-management_splits/license-management.sub_02.html" class="">License Details</a>
</li>
          <li class="sidebar-item">
  <a href="./license-management_splits/license-management.sub_03.html" class="">Connectivity Requirements</a>
</li>
          <li class="sidebar-item">
  <a href="./license-management_splits/license-management.sub_04.html" class="">Evaluations</a>
</li>
          <li class="sidebar-item">
  <a href="./license-management_splits/license-management.sub_05.html" class="">Floating Licensing</a>
</li>
          <li class="sidebar-item">
  <a href="./license-management_splits/license-management.sub_06.html" class="">Userspace Licensing</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./data-connectivity_splits/data-connectivity.sub_00.html" class="">Data Connectivity</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#dataconnectivity-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="dataconnectivity-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./data-connectivity_splits/data-connectivity.sub_01.html" class="">Connectivity using ODBC</a>
</li>
          <li class="sidebar-item">
  <a href="./data-connectivity_splits/data-connectivity.sub_02.html" class="">Connectivity using R Packages</a>
</li>
          <li class="sidebar-item">
  <a href="./data-connectivity_splits/data-connectivity.sub_03.html" class="">Snippet Files</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./job-launcher_splits/job-launcher.sub_00.html" class="">Job Launcher</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#joblauncher-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="joblauncher-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./job-launcher_splits/job-launcher.sub_01.html" class="">Overview</a>
</li>
          <li class="sidebar-item">
  <a href="./job-launcher_splits/job-launcher.sub_02.html" class="">Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./job-launcher_splits/job-launcher.sub_03.html" class="">Running the Launcher</a>
</li>
          <li class="sidebar-item">
  <a href="./job-launcher_splits/job-launcher.sub_04.html" class="">Load Balancing</a>
</li>
          <li class="sidebar-item">
  <a href="./job-launcher_splits/job-launcher.sub_05.html" class="">Creating plugins</a>
</li>
          <li class="sidebar-item">
  <a href="./job-launcher_splits/job-launcher.sub_06.html" class="">Troubleshooting</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./tutorial-api_splits/tutorial-api.sub_00.html" class="">Tutorial API</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#tutorialapi-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="tutorialapi-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./tutorial-api_splits/tutorial-api.sub_01.html" class="">Overview</a>
</li>
          <li class="sidebar-item">
  <a href="./tutorial-api_splits/tutorial-api.sub_02.html" class="">Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./tutorial-api_splits/tutorial-api.sub_03.html" class="">Interface</a>
</li>
          <li class="sidebar-item">
  <a href="./tutorial-api_splits/tutorial-api.sub_04.html" class="">Tutorial API Methods</a>
</li>
          <li class="sidebar-item">
  <a href="./tutorial-api_splits/tutorial-api.sub_05.html" class="">Tutorial API Callbacks</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./jupyter-sessions_splits/jupyter-sessions.sub_00.html" class="">Jupyter Sessions</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#jupytersessions-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="jupytersessions-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./jupyter-sessions_splits/jupyter-sessions.sub_01.html" class="">Overview</a>
</li>
          <li class="sidebar-item">
  <a href="./jupyter-sessions_splits/jupyter-sessions.sub_02.html" class="">Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./jupyter-sessions_splits/jupyter-sessions.sub_03.html" class="">Troubleshooting</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./vscode-sessions-preview_splits/vscode-sessions-preview.sub_00.html" class="">VS Code Sessions</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#vscodesessions-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="vscodesessions-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./vscode-sessions-preview_splits/vscode-sessions-preview.sub_01.html" class="">Overview</a>
</li>
          <li class="sidebar-item">
  <a href="./vscode-sessions-preview_splits/vscode-sessions-preview.sub_02.html" class="">Installation</a>
</li>
          <li class="sidebar-item">
  <a href="./vscode-sessions-preview_splits/vscode-sessions-preview.sub_03.html" class="">Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./vscode-sessions-preview_splits/vscode-sessions-preview.sub_04.html" class="">Multiple Sessions</a>
</li>
          <li class="sidebar-item">
  <a href="./vscode-sessions-preview_splits/vscode-sessions-preview.sub_05.html" class="">Troubleshooting</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./database_splits/database.sub_00.html" class="">Database</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#database-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="database-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./database_splits/database.sub_01.html" class="">Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./database_splits/database.sub_02.html" class="">Migration</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./hardening_splits/hardening.sub_00.html" class="">Hardening</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#hardening-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="hardening-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./hardening_splits/hardening.sub_01.html" class="">Set up SSL</a>
</li>
          <li class="sidebar-item">
  <a href="./hardening_splits/hardening.sub_02.html" class="">Browser Security</a>
</li>
          <li class="sidebar-item">
  <a href="./hardening_splits/hardening.sub_03.html" class="">R Session Security</a>
</li>
          <li class="sidebar-item">
  <a href="./hardening_splits/hardening.sub_04.html" class="">Other</a>
</li>
          <li class="sidebar-item">
  <a href="./hardening_splits/hardening.sub_05.html" class="">Example Secure Configuration</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <li class="sidebar-item">
  <a href="./session-user-settings_splits/session-user-settings.sub_00.html" class="">Session User Settings</a>
</li>
      <li class="sidebar-item">
  <a href="./rstudio-ide-commands_splits/rstudio-ide-commands.sub_00.html" class="">R Studio IDE Commands</a>
</li>
      <li class="sidebar-item">
  <a href="./r-package-dependencies_splits/r-package-dependencies.sub_00.html" class="">R Package Dependencies</a>
</li>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./rstudio-server-configuration_splits/rstudio-server-configuration.sub_00.html" class="">R Studio Configuration</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#rstudioconfiguration-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="rstudioconfiguration-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./rstudio-server-configuration_splits/rstudio-server-configuration.sub_01.html" class="">rserver.conf</a>
</li>
          <li class="sidebar-item">
  <a href="./rstudio-server-configuration_splits/rstudio-server-configuration.sub_02.html" class="">rsession.conf</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
  </ul>
  </div>
</nav>
  </div>
  <div class="col mx-auto col-sm-12 col-md-11 col-lg-9 px-lg-4">
<main>
<section id="r-sessions" class="level1">
<h1>R Sessions</h1>
<section id="r-executable-and-libraries" class="level2">
<h2 class="anchored" data-anchor-id="r-executable-and-libraries">R Executable and Libraries</h2>
<section id="locating-r" class="level3">
<h3 class="anchored" data-anchor-id="locating-r">Locating R</h3>
<p>RStudio uses the version of R pointed to by the output of the following command:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> which R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>which</code> command performs a search for the R executable using the system PATH. RStudio will therefore by default bind to the same version that is run when R is executed from a terminal.</p>
<p>For versions of R installed by system package managers this will be <code>/usr/lib/R</code>. For versions of R installed from source this will typically (but not always) be <code>/usr/local/lib/R</code>.</p>
<p>If you want to override which version of R is used then you can use the <code>rsession-which-r</code> setting. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">rsession-which-r</span><span class="ot">=</span><span class="st">/usr/local/bin/R</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that this change will not take effect until the server is restarted.</p>
<section id="using-multiple-versions-of-r" class="level4 pro-header">
<h4 class="pro-header anchored" data-anchor-id="using-multiple-versions-of-r">Using Multiple Versions of R</h4>
<p>The section above describes how RStudio locates the global default version of R. It’s also possible to specify alternate versions of R either by user or by group. The [R Versions] section describes this in more detail.</p>
</section>
</section>
<section id="locating-shared-libraries" class="level3">
<h3 class="anchored" data-anchor-id="locating-shared-libraries">Locating Shared Libraries</h3>
<p>You can add elements to the default <code>LD_LIBRARY_PATH</code> for R sessions (as determined by the R <code>ldpaths</code> script) by adding an <code>rsession-ld-library-path</code> entry to the server config file. This might be useful for ensuring that packages can locate external library dependencies that aren’t installed in the system standard library paths. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">rsession-ld-library-path</span><span class="ot">=</span><span class="st">/opt/someapp/lib:/opt/anotherapp/lib</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that this change will not take effect until the server is restarted.</p>
</section>
<section id="customizing-session-launches" class="level3 pro-header">
<h3 class="pro-header anchored" data-anchor-id="customizing-session-launches">Customizing Session Launches</h3>
<section id="profile-script-execution" class="level4">
<h4 class="anchored" data-anchor-id="profile-script-execution">Profile Script Execution</h4>
<p>RStudio launches R sessions under a bash login shell. This means that prior to the execution of the R session the bash shell will read and execute commands from this file if it exists:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/profile</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After reading that file, it looks for the following files and reads and executes commands from the <em>first</em> one that exists and is readable (it’s important to note that only one of these files will be read and executed):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">~/.bash_profile</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">~/.bash_login</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="ex">~/.profile</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you have further RStudio specific initialization logic (exporting environment variables, etc.) you can optionally create an R session specific profile script at:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/rstudio/rsession-profile</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If it exists this script will be executed prior to the bash shell that launches the R session. This script must be executable by all RStudio users, so it is recommended that you set its file permissions to <code>755</code> via the following command:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> 755 /etc/rstudio/rsession-profile</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In some situations, you will not want to run user shell profile scripts. This is also a good way to troubleshoot the inability for sessions to launch, as it could indicate a conflict is occurring due to environment variables being set in the shell profiles. To disable execution of the shell profiles, set the <code>rsession-no-profile</code> option to <code>1</code> in <code>/etc/rstudio/rserver.conf</code>. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dt">rsession-no-profile</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="environment-variables" class="level4">
<h4 class="anchored" data-anchor-id="environment-variables">Environment Variables</h4>
<p>R sessions inherit environment variables that are explicitly exported from the profile scripts described above. It’s also possible to append paths to the <code>LD_LIBRARY_PATH</code> environment variable using the <code>rsession-ld-library-path</code> option (see previous section for details).</p>
<p>Another source of environment variables are PAM sessions. On Debian/Ubuntu systems, the default PAM profile run by RStudio includes the environment variables defined in <code>/etc/security/pam_env.conf</code> and <code>/etc/environment</code>. To learn more about setting environment variables with PAM you should consult the <a href="#pam-sessions">PAM Sessions</a> section as well as the documentation on the <code>pam_env</code> module here: <a href="http://linux.die.net/man/8/pam_env">http://linux.die.net/man/8/pam_env</a>.</p>
</section>
<section id="program-supervisors" class="level4">
<h4 class="anchored" data-anchor-id="program-supervisors">Program Supervisors</h4>
<p>You may also wish to run R sessions under a program supervisor that modifies their environment or available resources. You can specify a supervisor (and the arguments which control it’s behavior) using the <code>rsession-exec-command</code> setting. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dt">rsession-exec-command</span><span class="ot">=</span><span class="st">nice -n </span><span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This example uses the <code>nice</code> command to run all R sessions with a lower scheduling priority. See <a href="http://linux.die.net/man/1/nice">http://linux.die.net/man/1/nice</a> for more details on <code>nice</code>. Note that for <code>nice</code> in particular it’s possible to accomplish the same thing using user and group profiles (and even specify a custom priority level per user or group). See the <a href="#user-and-group-profiles">User and Group Profiles</a> section for more details.</p>
</section>
</section>
<section id="diagnosing-session-launch-failures" class="level3 pro-header">
<h3 class="pro-header anchored" data-anchor-id="diagnosing-session-launch-failures">Diagnosing Session Launch Failures</h3>
<p>RStudio Workbench allows you to launch sessions in a diagnostics mode to capture extended session launch information in the event that you run into problems when starting sessions. This mode captures the environment variables that are set by all of the profile scripts, loading of any modules, arguments passed to the session, and the exit code of the session and any stack trace information if the session crashes. To enable collection of this diagnostic data, set the <code>rsession-diagnostics-enabled</code> flag in <code>/etc/rstudio/rserver.conf</code> like below:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dt">rsession-diagnostics-enabled</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When this setting is enabled, all sessions that are started will create a diagnostics file that contains extended launch diagnostics under the <code>/tmp</code> directory by default. To change the location, use the <code>rsession-diagnostics-dir</code> to point to the desired directory, like so:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dt">rsession-diagnostics-dir</span><span class="ot">=</span><span class="st">/tmp/diagnostics</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Be aware that this directory should be accessible by all users of the system. If it does not exist, RStudio will attempt to create it and set its permissions to Read/Write/Execute for everyone (file permissions of 777).</p>
<p>To diagnose containerized sessions (e.g.&nbsp;Kubernetes) launched via the Job Launcher, set <code>rsession-diagnostics-dir</code> to a shared folder mounted in the container via <code>/etc/rstudio/launcher-mounts</code>. Otherwise sessions may fail to launch due to the default location under <code>/tmp</code> not being available in the containers.</p>
<p>Strace information can be included in the diagnostics file by adding the <code>rsession-diagnostics-strace-enabled</code> flag as shown below. Before using this setting, ensure that strace is installed and is available on your users’ path.</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="dt">rsession-diagnostics-enabled</span><span class="ot">=</span><span class="dv">1</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="dt">rsession-diagnostics-strace-enabled</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We recommend that you send these files to RStudio support to aid in troubleshooting any session launch issues should they arise.</p>
<section id="safe-mode" class="level4">
<h4 class="anchored" data-anchor-id="safe-mode">Safe Mode</h4>
<p>Two of the most common session startup problems are (1) oversized global R environments, which take a long time to load into memory when the session is resumed, and (2) problematic code in <code>.Rprofile</code> which takes too long to run or throws errors during startup.</p>
<p>In order to help eliminate these variables as the cause of session startup issues, RStudio can start sessions in Safe Mode. This mode starts the session without running <code>.Rprofile</code> or restoring the global environment. If a session takes too long to start, the user will be given the option to restart a session in Safe Mode.</p>
<p>It is also possible to control these features independently, which can be helpful when troubleshooting issues.</p>
<section id="skipping-workspace-restoration" class="level5">
<h5 class="anchored" data-anchor-id="skipping-workspace-restoration">Skipping Workspace Restoration</h5>
<p>To skip workspace restoration (i.e.&nbsp;reloading the contents of the global environment), append <code>?restore_workspace=0</code> to the R session’s full URL. For example:</p>
<pre><code>https://yourcorp/rstudio/s/4cc57da229b59e81c306b/?restore_workspace=0</code></pre>
<p>Note that this will work <em>only if the session is not already running</em>. If you are currently waiting for the session to start, it is too late to try to skip workspace restoration, since it is already in progress. Kill or force-kill the session before restarting the attempt with the <code>restore_workspace</code> flag.</p>
</section>
<section id="omitting-.rprofile" class="level5">
<h5 class="anchored" data-anchor-id="omitting-.rprofile">Omitting .Rprofile</h5>
<p>To skip executing <code>.Rprofile</code>, append <code>run_rprofile=0</code> to the R session’s full URL. For example:</p>
<pre><code>https://yourcorp/rstudio/s/4cc57da229b59e81c306b/?run_rprofile=0</code></pre>
<p>Just like <code>restore_workspace</code>, this can only be used prior to the session starting.</p>
<p>Note that Safe Mode is only available when RStudio itself is starting sessions, so it is not a useful troubleshooting technique when sessions are being run using the Job Launcher.</p>
</section>
</section>
</section>
</section>
<section id="session-startup-scripts" class="level2">
<h2 class="anchored" data-anchor-id="session-startup-scripts">Session Startup Scripts</h2>
<p>When an R session starts up, the following scripts are run:</p>
<ol type="1">
<li>Any PAM session modules <span class="pro-feature">Pro</span></li>
<li>The <code>/etc/rstudio/rsession-profile</code> script <span class="pro-feature">Pro</span></li>
<li>The environment module for the R version in use, if any; see [Extended R Version Definitions] <span class="pro-feature">Pro</span></li>
<li>The prelaunch script for the R version in use, if any; see [Extended R Version Definitions] <span class="pro-feature">Pro</span></li>
<li>System and user shell profile scripts, such as <code>.bash_profile</code> <span class="pro-feature">Pro</span></li>
<li>The R session itself, inside any supervisor specified by <code>rsession-exec-command</code> <span class="pro-feature">Pro</span></li>
<li><code>.Rprofile</code> and other R initialization scripts; see <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Startup.html">Initialization at the Start of a Session</a> for details</li>
<li>RStudio-internal session startup scripts</li>
<li>The <code>rstudio.sessionInit</code> hook</li>
</ol>
<p>The very last of these provides a way to run code after the R session is fully booted and ready to use; since it only runs in RStudio it can be used to finalize R sessions in RStudio-specific ways, using for example methods in the <code>rstudioapi</code> package. Here is an example that prints the RStudio version in new R sessions:</p>
<p><em>/opt/R/version/lib64/r/etc/Rprofile.site</em></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setHook</span>(<span class="st">"rstudio.sessionInit"</span>, <span class="cf">function</span>(newSession) {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (newSession)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">"Welcome to RStudio "</span>, rstudioapi<span class="sc">::</span><span class="fu">getVersion</span>())</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>}, <span class="at">action =</span> <span class="st">"append"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="user-and-group-profiles" class="level2 pro-header">
<h2 class="pro-header anchored" data-anchor-id="user-and-group-profiles">User and Group Profiles</h2>
<p>User and Group Profiles enable you to tailor the behavior of sessions on a per-user or per-group basis. The following attributes of a session can be configured within a profile:</p>
<ol type="1">
<li>Version of R used</li>
<li>CPU affinity (i.e.&nbsp;which set of cores the session should be bound to)</li>
<li>Scheduling priority (i.e.&nbsp;nice value)</li>
<li>Resource limits (maximum memory, processes, open files, etc.)</li>
<li>R session timeouts (amount of idle time which triggers session suspend)</li>
<li>R session kill timeouts (amount of idle time which triggers a session to be destroyed and cleaned up)</li>
</ol>
<p>Note that if launching sessions via the Job Launcher, scheduling priority and resource limits are not ignored, but these should generally be configured via the Job Launcher itself where applicable. For example, when running Kubernetes sessions, memory limits can be specified each time a session is launched, so memory limits should be configured by the Job Launcher in that case.</p>
<section id="creating-profiles" class="level3">
<h3 class="anchored" data-anchor-id="creating-profiles">Creating Profiles</h3>
<p>Profiles are defined within the file <code>/etc/rstudio/profiles</code>. Note that this file is not created by default so you’ll need to create it if doesn’t already exist. Profiles are divided into sections of three different type:</p>
<ol type="1">
<li><p>Global (<code>[*]</code>)</p></li>
<li><p>Per-group (<code>[@groupname]</code>)</p></li>
<li><p>Per-user (<code>[username]</code>)</p></li>
</ol>
<p>Here’s an example profiles file that illustrates each of these types:</p>
<p><em>/etc/rstudio/profiles</em></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[*]</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="dt">cpu-affinity </span><span class="ot">=</span><span class="st"> </span><span class="dv">1-4</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="dt">max-processes </span><span class="ot">=</span><span class="st"> </span><span class="dv">800</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="dt">max-memory-mb </span><span class="ot">=</span><span class="st"> </span><span class="dv">2048</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="dt">session-limit</span><span class="ot">=</span><span class="dv">5</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="dt">session-timeout-minutes</span><span class="ot">=</span><span class="dv">60</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="dt">session-timeout-kill-hours</span><span class="ot">=</span><span class="dv">24</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="kw">[@powerusers]</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="dt">cpu-affinity </span><span class="ot">=</span><span class="st"> </span><span class="dv">5-16</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="dt">nice </span><span class="ot">=</span><span class="st"> -</span><span class="dv">10</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="dt">max-memory-mb </span><span class="ot">=</span><span class="st"> </span><span class="dv">4096</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="dt">session-limit</span><span class="ot">=</span><span class="dv">10</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="kw">[jsmith]</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="dt">r-version </span><span class="ot">=</span><span class="st"> /opt/R/</span><span class="dv">3</span><span class="st">.</span><span class="fl">1.0</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="dt">session-timeout-minutes</span><span class="ot">=</span><span class="dv">360</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This configuration specifies that by default users will run on cores 1 to 4 with a limit of 800 processes and 2GB of virtual memory. It also specifies that members of the <code>powerusers</code> group will run on cores 5 to 16 with an elevated nice priority and a limit of 4GB of memory. Finally, the user <code>jsmith</code> is configured to use a different version of R from the system default.</p>
<p>Note that the <code>/etc/rstudio/profiles</code> file is processed from top to bottom (i.e.&nbsp;settings matching the current user that occur later in the file always override ones that appeared prior). Additionally, some settings do not apply to certain editor types (like Jupyter or VS Code). The settings available within <code>/etc/rstudio/profiles</code> are described in more depth below.</p>
</section>
<section id="session-limit" class="level3">
<h3 class="anchored" data-anchor-id="session-limit">Session Limit</h3>
<p>To configure the maximum allowed number of sessions you can use the <code>session-limit</code> option. This is a more flexible choice than disabling multiple sessions entirely with <code>server-multiple-sessions</code>.</p>
<p>For example to limit user to 5 sessions:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-limit</span><span class="ot">=</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>By default there is no limit to the number of sessions other than the one specified by the license. This limit has no effect if greater than the number of sessions allowed by your license.</p>
<p>This setting applies to all session types (RStudio, Jupyter, and VS Code).</p>
</section>
<section id="session-timeout" class="level3">
<h3 class="anchored" data-anchor-id="session-timeout">Session Timeout</h3>
<p>To configure the amount of idle time to wait before suspending sessions you can use the <code>session-timeout-minutes</code> option. Idle time is the amount of time since a session has run any R commands, including commands typed by the user in the console and the execution of any R scripts.</p>
<p>For example:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-timeout-minutes</span><span class="ot">=</span><span class="dv">360</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The default value if none is explicitly specified is 120 minutes.</p>
<p>There are some conditions where an R session will not be suspended, these include:</p>
<ol type="1">
<li>When a top-level R computation is running</li>
<li>When the R prompt is not in it’s default state (e.g.&nbsp;during a debugging session)</li>
</ol>
<p>You can also specify that R sessions should never be suspended by setting the <code>session-timeout-minutes</code> to zero. For example:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-timeout-minutes</span><span class="ot">=</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This setting only applies to the RStudio IDE, and does not apply to Jupyter or VS Code. Session timeout can be configured for Jupyter sessions via the <code>session-cull</code> setting - see [Jupyter configuration] for more details. There is currently no mechanism for timing out VS Code sessions.</p>
</section>
<section id="session-timeout-kill" class="level3">
<h3 class="anchored" data-anchor-id="session-timeout-kill">Session Timeout Kill</h3>
<p>To configure the amount of time to wait before forcefully killing and destroying sessions you can use the <code>session-timeout-kill-hours</code> option in the <code>/etc/rstudio/rsession.conf</code> file. This allows you to specify how much time should pass before a session is automatically cleaned up. This is the length of time during which a session exists without user input (<strong>regardless of computation status</strong>) allowing you to automatically reclaim temporary disk space used by the session, and to stop its processes and children.</p>
<p>This setting should only be used to ensure that any sessions that users have forgotten about are destroyed, reclaiming valuable disk space. Note that this setting does not work if the <code>server-shared-storage-path</code> is located on a root squash mount.</p>
<p><strong>Sessions can be destroyed while important computations are executing</strong>. The user whose session is cleaned will also lose all unsaved code and data.</p>
<p>This setting can also be used in conjunction with <code>session-timeout-minutes</code>, allowing already suspended sessions to be cleaned up.</p>
<p>For example:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-timeout-kill-hours</span><span class="ot">=</span><span class="dv">48</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The default value if none is explicitly specified is 0 hours, meaning sessions will never be killed and destroyed automatically. The supplied value should be an integer representing the amount of hours a session can go without user interaction before being killed.</p>
<p>This setting only applies to the RStudio IDE, and does not apply to Jupyter or VS Code. Session timeout can be configured for Jupyter sessions via the <code>session-cull</code> setting - see [Jupyter configuration] for more details. There is currently no mechanism for timing out VS Code sessions.</p>
<section id="interaction-with-session-timeout-minutes" class="level4">
<h4 class="anchored" data-anchor-id="interaction-with-session-timeout-minutes">Interaction with session-timeout-minutes</h4>
<p>It is recommended that the <code>session-timeout-kill-hours</code> be set to a much higher span of time than that specified by <code>session-timeout-minutes</code>. This will allow sessions to be suspended (and not destroyed) before they are forcefully killed and cleaned up, allowing for a better user experience. Note however, that if a session is running a long-running computation, it may not be suspended but it will still be killed.</p>
<p>If <code>session-timeout-kill-hours</code> is set to an amount of time less than <code>session-timeout-minutes</code> (which has a default of 2 hours), then sessions will <em>never</em> be suspended and they will be forcefully killed and cleaned up.</p>
<p>The two settings may be set to the same amount of time, but this is not recommended. In this case, it is undefined whether or not the session will be suspended, but the session will be killed and cleaned up regardless.</p>
</section>
</section>
<section id="cpu-affinity-and-scheduling-priority" class="level3">
<h3 class="anchored" data-anchor-id="cpu-affinity-and-scheduling-priority">CPU Affinity and Scheduling Priority</h3>
<p>If you have users or groups that consistently require more compute resources than others you can use profile settings to reserve CPUs (<code>cpu-affinity</code>) as well as raise overall scheduling priority (<code>nice</code>).</p>
<section id="cpu-affinity" class="level4">
<h4 class="anchored" data-anchor-id="cpu-affinity">CPU Affinity</h4>
<p>The <code>cpu-affinity</code> setting specifies which cores on a multi-core system should be used to schedule work for a session. This is specified as a comma-separated list of core numbers (1-based) where both individual cores and ranges of cores can be specified. For example:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dt">cpu-affinity </span><span class="ot">=</span><span class="st"> </span><span class="dv">1</span><span class="st">,</span><span class="dv">2</span><span class="st">,</span><span class="dv">3</span><span class="st">,</span><span class="dv">4</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="dt">cpu-affinity </span><span class="ot">=</span><span class="st"> </span><span class="dv">1-4</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="dt">cpu-affinity </span><span class="ot">=</span><span class="st"> </span><span class="dv">1</span><span class="st">,</span><span class="dv">2</span><span class="st">,</span><span class="dv">15-16</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To determine the number of addressable cores on your system you can use the <code>nproc</code> command:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nproc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This setting applies to all session types (RStudio, Jupyter, and VS Code).</p>
</section>
<section id="scheduling-priority" class="level4">
<h4 class="anchored" data-anchor-id="scheduling-priority">Scheduling Priority</h4>
<p>The <code>nice</code> setting specifies a relative priority for scheduling session CPU time. Negative 20 is the highest nice priority and positive 20 is the lowest priority. The system default niceness for processes is typically 0. The following are all valid nice values:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="dt">nice </span><span class="ot">=</span><span class="st"> -</span><span class="dv">10</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="dt">nice </span><span class="ot">=</span><span class="st"> </span><span class="dv">0</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="dt">nice </span><span class="ot">=</span><span class="st"> </span><span class="dv">15</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Scheduler behavior around nice priorities varies by system. For more details see <a href="http://en.wikipedia.org/wiki/Nice_(Unix)#Use_and_effect">nice use and effect</a>.</p>
<p>This setting applies to all session types (RStudio, Jupyter, and VS Code).</p>
</section>
</section>
<section id="resource-limits" class="level3">
<h3 class="anchored" data-anchor-id="resource-limits">Resource Limits</h3>
<p>Profiles can also be used to specify limits on available memory as well as the maximum number of processes and open files.</p>
<section id="available-memory" class="level4">
<h4 class="anchored" data-anchor-id="available-memory">Available Memory</h4>
<p>The <code>max-memory-mb</code> setting controls the maximum amount of addressable memory for R sessions (by default memory is unlimited). This example specifies a limit of 2GB:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="dt">max-memory-mb </span><span class="ot">=</span><span class="st"> </span><span class="dv">2048</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that this value sets the amount of virtual memory that can be used by a process. Virtual memory includes code (i.e.&nbsp;shared libraries) loaded by the process as well as things like memory mapped files, so can often consume several hundred megabytes even for a vanilla R session. Therefore, you want to be sure not to set this threshold too low (in no case should you set it below 1024).</p>
<p>This setting applies to all session types (RStudio, Jupyter, and VS Code).</p>
</section>
<section id="number-of-processes" class="level4">
<h4 class="anchored" data-anchor-id="number-of-processes">Number of Processes</h4>
<p>The <code>max-processes</code> setting controls the maximum number of system processes createable by a user. This setting is useful to prevent either inadvertent or malicious <a href="http://en.wikipedia.org/wiki/Fork_bomb">fork bombs</a>. The following example sets a limit of 800 processes:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="dt">max-processes </span><span class="ot">=</span><span class="st"> </span><span class="dv">800</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that <code>max-processes</code> refers to system processes, not R processes. Users may need to create many system processes in order to use RStudio, so we recommend setting this value high and testing the outcome before deploying in production.</p>
<p>This setting applies to all session types (RStudio, Jupyter, and VS Code).</p>
</section>
<section id="number-of-open-files" class="level4">
<h4 class="anchored" data-anchor-id="number-of-open-files">Number of Open Files</h4>
<p>In most Linux environments there is a maximum of 1024 open files per process. This is typically more than enough, but if you have a particular applications that requires more open files the <code>max-open-files</code> setting can be used to increase the limit. For example:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="dt">max-open-files </span><span class="ot">=</span><span class="st"> </span><span class="dv">2048</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This setting applies to all session types (RStudio, Jupyter, and VS Code).</p>
</section>
</section>
<section id="using-multiple-versions-of-r-1" class="level3">
<h3 class="anchored" data-anchor-id="using-multiple-versions-of-r-1">Using Multiple Versions of R</h3>
<p>As illustrated above, you can bind users or groups to distinct versions of R installed on your server. This is controlled by the <code>r-version</code> option. Here are several examples of it’s use:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="dt">r-version </span><span class="ot">=</span><span class="st"> /usr/lib/R</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="dt">r-version </span><span class="ot">=</span><span class="st"> /usr/local/lib/R</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="dt">r-version </span><span class="ot">=</span><span class="st"> /opt/R/</span><span class="dv">3</span><span class="st">.</span><span class="fl">1.0</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="dt">r-version </span><span class="ot">=</span><span class="st"> /opt/R/</span><span class="dv">3</span><span class="st">.</span><span class="fl">2.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that <code>r-version</code> specifies the full path to the directory where R is installed.</p>
<p>See the [R Versions] chapter for additional details on running multiple versions of R on a single server.</p>
<p>This setting only applies to the RStudio IDE, and does not apply to Jupyter or VS Code.</p>
</section>
</section>
<section id="multiple-r-sessions" class="level2 pro-header">
<h2 class="pro-header anchored" data-anchor-id="multiple-r-sessions">Multiple R Sessions</h2>
<p>RStudio Workbench enables users to have multiple concurrent R sessions on a single server or load balanced cluster of servers (the open-source version of RStudio Server supports only a single session at a time).</p>
<section id="creating-new-sessions" class="level3">
<h3 class="anchored" data-anchor-id="creating-new-sessions">Creating New Sessions</h3>
<p>You can start a new R Session using the <strong>New Session</strong> command from the <strong>Session</strong> menu (or the corresponding toolbar button near the top-right of the IDE).</p>
<p>You can also open an existing RStudio project in a new R session by using the <strong>Open Project in New Session</strong> command. When switching projects there is also a button on the right side of the projects menu that lets you specify that the project should be opened in a new session rather than within the current one.</p>
<p>You can review all currently running sessions and switch between them using the <strong>Sessions</strong> toolbar near the top-right of the IDE.</p>
</section>
<section id="session-lifetimes" class="level3">
<h3 class="anchored" data-anchor-id="session-lifetimes">Session Lifetimes</h3>
<p>R Sessions are long-running tasks that continue to be available until you explicitly quit them (you can think of them as you’d think of multiple top-level RStudio windows running on the desktop). This means that you can kickoff a long running job in one session and then switch to another session, revisiting the original session later to check on it’s progress. As is also possible on the desktop, you can navigate between different projects and working directories within a session.</p>
<p>Sessions will suspend automatically when they are idle and then be automatically resumed next time they are accessed. To permanently quit a session you can use the <strong>Quit Session</strong> command located on the <strong>File</strong> menu or the corresponding toolbar button at the top right of the IDE.</p>
</section>
<section id="disabling-multiple-sessions" class="level3">
<h3 class="anchored" data-anchor-id="disabling-multiple-sessions">Disabling Multiple Sessions</h3>
<p>If you wish disable support for multiple sessions you can use the <code>server-multiple-sessions</code> option. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="dt">server-multiple-sessions</span><span class="ot">=</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="pam-sessions" class="level2 pro-header">
<h2 class="pro-header anchored" data-anchor-id="pam-sessions">PAM Sessions</h2>
<p>RStudio Workbench uses PAM (Pluggable Authentication Modules) for both user authentication as well to establish the environment and resources available for R sessions. This is accomplished using the PAM session API. PAM sessions are used for a variety of purposes:</p>
<ul>
<li>To initialize environment variables</li>
<li>To automatically create local users after authentication or authorization against a directory server.</li>
<li>To mount remote drives</li>
<li>To initialize and destroy Kerberos tickets</li>
</ul>
<p>This section explains how to configure and customize PAM sessions with RStudio Workbench.</p>
<section id="session-pam-profile" class="level3">
<h3 class="anchored" data-anchor-id="session-pam-profile">Session PAM Profile</h3>
<p>For PAM authentication RStudio Workbench uses the either the <code>/etc/pam.d/other</code> profile (Debian/Ubuntu) or <code>/etc/pam.d/rstudio</code> profile (RedHat/CentOS). However, for launching R sessions a different PAM profile is used. This is because the launching of R sessions may not coincide with authentication (e.g.&nbsp;returning to the site with login credentials cached in a cookie or resuming a suspended session). Therefore, the PAM directive that enables authentication with <code>root</code> privilege only (<code>auth sufficient pam_rootok.so</code>) needs to be present in the PAM profile.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Some <code>sssd</code> configuration additionally require PAM account verification as <code>root</code> to present on both the <code>auth</code> and <code>account</code> directives in the PAM profile (<code>auth sufficient pam_rootok.so</code> and <code>account sufficient pam_rootok.so</code>). Be sure to include this if you see errors when starting new R sessions.</p>
</div>
</div>
<p>The behavior that RStudio Workbench requires is essentially the same as that of the <code>su</code> command (impersonation of a user without a password). Therefore by default RStudio Workbench uses the <code>/etc/pam.d/su</code> profile for running R sessions.</p>
<p>The session PAM profile itself is also run whenever the user accesses the home page. Regardless of where the session actually runs (such as on another machine if using [Job Launcher] sessions), the PAM profile is executed on the RStudio Workbench instance itself when opened via the home page.</p>
<section id="creating-a-custom-profile" class="level4">
<h4 class="anchored" data-anchor-id="creating-a-custom-profile">Creating a Custom Profile</h4>
<p>The <code>/etc/pam.d/su</code> profile has different default behavior depending upon your version of Linux and local configuration. Depending upon what type of behavior you want associated with R sessions (e.g.&nbsp;mounting of disks, setting of environment variables, enforcing of resource limits, etc.) you’ll likely want to create a custom profile for R sessions. For example, if you wanted to use a profile named <code>rstudio-session</code> you would add this to the configuration file:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-pam-sessions-profile</span><span class="ot">=</span><span class="st">rstudio-session</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here is in turn what the custom profile might contain in order to enable a few common features of PAM sessions (this is based on a modified version of the default <code>su</code> profile on Ubuntu):</p>
<p><em>/etc/pam.d/rstudio-session</em></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This allows root to su without passwords (this is required)</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="dt">auth       sufficient pam_rootok.so</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># This module parses environment configuration file(s)</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># and also allows you to use an extended config</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># file /etc/security/pam_env.conf.</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co"># parsing /etc/environment needs "readenv=1"</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="dt">session    required   pam_env.so readenv</span><span class="ot">=</span><span class="dv">1</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Locale variables are also kept into /etc/default/locale in etch</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="co"># reading this file *in addition to /etc/environment* does not hurt</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="dt">session    required   pam_env.so readenv</span><span class="ot">=</span><span class="dv">1</span><span class="st"> envfile=/etc/</span><span class="kw">default</span><span class="st">/locale</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Enforces user limits defined in /etc/security/limits.conf</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="dt">session    required   pam_limits.so</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="co"># The standard Unix authentication modules</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="dt">@include common-auth</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="dt">@include common-account</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="dt">@include common-session</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="custom-profile-with-passwords" class="level4">
<h4 class="anchored" data-anchor-id="custom-profile-with-passwords">Custom Profile with Passwords</h4>
<p>Note that in the above configuration we rely on <code>pam_rootok.so</code> to enable authentication without a password. This is necessary because RStudio doesn’t retain the passwords used during the authentication phase.</p>
<p>In some situations however passwords are important for more than just authentication. PAM profiles support a <code>use_first_pass</code> directive to forward passwords used during authentication into other modules (for example, to request a Kerberos ticket with <code>pam_krb5.so</code> or to mount an encrypted or remote drive with <code>pam_mount.so</code>). For these scenarios RStudio Workbench supports an optional mode to retain passwords after login and then forward them into the PAM session profile. This is enabled via the <code>auth-pam-sessions-use-password</code> setting:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-pam-sessions-use-password</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This setting is only available when using [PAM authentication].</p>
</div>
</div>
<p>In this scenario you should remove the <code>auth sufficient pam_rootok.so</code> directive and replace it with whatever authentication directives apply in your environment. You can then employ the <code>use_first_pass</code> directive to forward the password as necessary to other modules.</p>
<p>For example, here’s a very simple RedHat/CentOS PAM configuration file that uses system default authentication and forwards the password into the <code>pam_mount.so</code> module. Note that we are no longer using <code>pam_rootok.so</code> because the password is now available when the session is created.</p>
<p><em>/etc/pam.d/rstudio-session</em></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Auth/account (use system auth and forward password to pam_mount)</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="dt">auth     include    system-auth</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="dt">auth     optional   pam_mount.so use_first_pass</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="dt">account  required   pam_unix.so</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Session (read environment variables and enforce limits)</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="dt">session  required   pam_env.so readenv</span><span class="ot">=</span><span class="dv">1</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="dt">session  required   pam_env.so readenv</span><span class="ot">=</span><span class="dv">1</span><span class="st"> envfile=/etc/</span><span class="kw">default</span><span class="st">/locale</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="dt">session  required   pam_limits.so</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that this configuration requires that RStudio Workbench retain user passwords in memory. This retention is done using industry best-practices for securing sensitive in-memory data including disabling ptrace and core dumps, using mlock to prevent paging into the swap area, and overwriting the contents of memory prior to freeing it. When using [Job Launcher], the passwords are securely transmitted in encrypted form to different nodes or containers running the R sessions.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Launcher will require TLS/SSL to be configured in order to allow PAM profiles with passwords to be used.</p>
</div>
</div>
</section>
<section id="more-resources" class="level4">
<h4 class="anchored" data-anchor-id="more-resources">More Resources</h4>
<p>If you want to learn more about PAM profile configuration the following are good resources:</p>
<ul>
<li><a href="http://www.linux-pam.org/Linux-PAM-html/Linux-PAM_SAG.html">http://www.linux-pam.org/Linux-PAM-html/Linux-PAM_SAG.html</a></li>
<li><a href="http://linux.die.net/man/8/pam.d">http://linux.die.net/man/8/pam.d</a></li>
<li><a href="http://www.linuxjournal.com/article/2120">http://www.linuxjournal.com/article/2120</a></li>
<li><a href="http://www.informit.com/articles/article.aspx?p=20968">http://www.informit.com/articles/article.aspx?p=20968</a></li>
</ul>
</section>
</section>
<section id="pam-session-cleanup" class="level3">
<h3 class="anchored" data-anchor-id="pam-session-cleanup">PAM Session Cleanup</h3>
<p>By default, RStudio Workbench does not close PAM sessions when their associated R process exits. This is because PAM sessions often initialize and maintain resources that require more persistence that the lifetime of a single R session (e.g.&nbsp;mounted drives, Kerberos tickets, etc.). If a user has multiple active R sessions then closing the PAM session associated with one of them might unmount a drive or revoke a ticket that is still required by another R session.</p>
<p>It is however possible to manually close the PAM session associated with an R session by force suspending it. This can be accomplished in one of two ways:</p>
<ul>
<li><p>By pressing the <strong>Suspend</strong> button on the <em>Sessions</em> page of the [Administrative Dashboard].</p></li>
<li><p>By executing a <code>force-suspend</code> or <code>force-suspend-all</code> command as described in [Suspending Sessions].</p></li>
</ul>
<p>If you prefer that PAM sessions be closed whenever their associated R session exits you can use the <code>auth-pam-sessions-close</code> setting. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-pam-sessions-close</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that if you specify this setting be aware that depending upon what resources are managed by your PAM sessions it may be incompatible with users running multiple concurrent R sessions (because for example a drive might be unmounted from underneath a running session). In this case you may wish to disable support for multiple R sessions (see the section on <a href="#multiple-r-sessions">Multiple R Sessions</a> for details on how to do this).</p>
</section>
<section id="pam-sessions-with-the-job-launcher" class="level3">
<h3 class="anchored" data-anchor-id="pam-sessions-with-the-job-launcher">PAM Sessions with the Job Launcher</h3>
<p>When launching sessions via the [Job Launcher], you must also configure PAM on any Launcher nodes (for Local or Slurm plugins) and within any containers used (if using Kubernetes). That’s because PAM sessions are needed at the point where the R session is run, which for Launcher means some machine/container other than the one where RStudio Workbench is running. The PAM configuration is still required at the RStudio Workbench machine for authentication purposes.</p>
<p>Launcher session PAM profiles run with different permissions at different stages of the session launch pipeline. When a user visits the RStudio home page for the first time, their PAM session is initiated with root privilege, allowing the session to rely on <code>pam_rootok.so</code>, as discussed in the previous sections, and it is opened on the RStudio Workbench instance itself. However, Job Launcher sessions themselves <em>never</em> have true root privilege (unlike traditional session launches which have <code>root</code> privileges during early initialization), and thus cannot rely on <code>pam_rootok.so</code>. Their PAM sessions are opened on the actual instance where the session is running (e.g.&nbsp;a Kubernetes or Slurm node).</p>
<p>It is generally sufficient to simply do all your necessary setup, such as user directory creation, whenever the user accesses the home page for the first time. This means that you can rely on <code>pam_rootok.so</code> and do not need password forwarding. However, if you need to also ensure that PAM sessions are created when actual sessions are started (e.g., for Kerberos or <code>pam_mount</code>), you will need to enable <code>auth-pam-sessions-use-password</code> to forward the user’s PAM credentials to the session.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>When Kerberos or LDAP/Active Diretory are required for PAM sessions, individual Launcher nodes or Kubernetes containers will have to either join the Kerberos domain or be configured to use <code>sssd</code> for obtaining LDAP/AD users and groups.</p>
</div>
</div>
<p>When forwarding credentials over a TCP connection, we require that Job Launcher connections be secured with SSL to prevent leaking of the credentials. Therefore, if <code>auth-pam-sessions-use-password</code> is set for Launcher sessions, you will also need to set <code>launcher-use-ssl</code> and configure the Job Launcher to use SSL (see the Job Launcher [SSL Considerations] section for more info).</p>
<p>The following sample configuration demonstrates forwarding of PAM user credentials to Job Launcher sessions. This is only recommended if it is absolutely necessary to start PAM sessions whenever Launcher sessions are started, and it is not sufficient to simply start a PAM session whenever the user accesses the homepage for the first time:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="dt">launcher-sessions-enabled</span><span class="ot">=</span><span class="dv">1</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="dt">launcher-use-ssl</span><span class="ot">=</span><span class="dv">1</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-pam-sessions-enabled</span><span class="ot">=</span><span class="dv">1</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-pam-sessions-profile</span><span class="ot">=</span><span class="st">rstudio</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-pam-sessions-use-password</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The following sample configuration demonstrates a basic PAM setup where it is sufficient to only start PAM sessions when users visit the homepage, and thus no PAM sessions are started when Launcher sessions are started:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="dt">launcher-sessions-enabled</span><span class="ot">=</span><span class="dv">1</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-pam-sessions-enabled</span><span class="ot">=</span><span class="dv">1</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-pam-sessions-profile</span><span class="ot">=</span><span class="st">rstudio</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="disabling-pam-sessions" class="level3">
<h3 class="anchored" data-anchor-id="disabling-pam-sessions">Disabling PAM Sessions</h3>
<p>If you don’t want RStudio Workbench to utilize PAM sessions you can disable this feature using the <code>auth-pam-sessions-enabled</code> setting. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-pam-sessions-enabled</span><span class="ot">=</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>When using <a href="https://sssd.io/"><code>sssd</code></a> to automatically provision local system accounts using LDAP or Active Directory, RStudio relies on PAM sessions configured with <a href="https://linux.die.net/man/8/pam_mkhomedir"><code>pam_mkhomedir</code></a> (or equivalent) to create the home directories of a user that has never logged into the server. Disabling PAM sessions in this scenario may cause permission errors when starting session unless other methods for creating users’ home directories are used.</p>
</div>
</div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>PAM sessions are initially disabled by default when using RStudio Launcher to simplify its initial setup in a multi-node environment. However, many environments still require PAM sesssions and in those cases that needs to be explicitly enabled with Launcher.</p>
</div>
</div>
</section>
</section>
<section id="kerberos" class="level2 pro-header">
<h2 class="pro-header anchored" data-anchor-id="kerberos">Kerberos</h2>
<p>You can use PAM sessions to arrange for <a href="https://en.wikipedia.org/wiki/Kerberos_(protocol)">Kerberos</a> tickets to be made available for use by R sessions. This is accomplished using the <a href="https://linux.die.net/man/8/pam_sss">pam_sss</a> PAM module. Note that you may need to install this module separately depending on which Linux distribution/version you are running.</p>
<section id="configuration" class="level3">
<h3 class="anchored" data-anchor-id="configuration">Configuration</h3>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You should be sure to understand the previous section on <a href="#pam-sessions">PAM Sessions</a> before attempting to modify your configuration to support Kerberos.</p>
</div>
</div>
<p>The following are simple examples of the <code>pam_sss</code> and <code>sssd.conf</code> configuration directives you would need to add to use Kerberos with RStudio. Note that the sssd Kerberos backend supports a large number of options, some of which may be required to get Kerberos working correctly in your environment. You should consult the <a href="https://linux.die.net/man/5/sssd-krb5">documentation</a> before proceeding to ensure you’ve specified all options correctly.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you are migrating your Kerberos settings from the now deprecated <code>pam_krb5</code> to <code>pam_sss</code>, consult the <a href="https://sssd.io/docs/users/pam_krb5_migration.html">pam_krb5 migration documentation</a> for additional information.</p>
</div>
</div>
<p>The main PAM profile for RStudio should be modified to include the following <code>pam_sss</code> directives:</p>
<p><em>/etc/pam.d/rstudio</em></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth       sufficient     pam_sss.so</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="dt">account    required       pam_sss.so</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="dt">session    requisite      pam_sss.so</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In addition to modifying the main PAM profile, you will also need to create a custom PAM session profile for RStudio (as described in <a href="#creating-a-custom-profile">Creating a Custom Profile</a>). This needs to include the appropriate <code>pam_sss</code> directives. For example:</p>
<p><em>/etc/pam.d/rstudio-session</em></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth        required      pam_sss.so</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="dt">account     </span><span class="kw">[default=bad success=ok user_unknown=ignore]</span><span class="dt"> pam_sss.so</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="dt">password    sufficient    pam_sss.so use_authtok</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="dt">session     requisite     pam_sss.so</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that typically when you create a custom PAM session profile you include the <code>auth sufficient pam_rootok.so</code> directive. However, in the case of configuring for Kerberos authentication you do not want this directive, rather you need to specify that authentication is done by Kerberos using an explicit password as illustrated in the above example.</p>
<p>To ensure that the custom PAM session profile is used by RStudio Workbench and that PAM passwords are correctly forwarded to <code>pam_sss</code> you’ll also need to add the following entries to the <code>rserver.conf</code> config file:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-pam-sessions-profile</span><span class="ot">=</span><span class="st">rstudio-session</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-pam-sessions-use-password</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Finally, you will need to specify Kerberos settings in <code>sssd.conf</code> (usually located at <code>/etc/sssd/sssd.conf</code>). For more information on SSSD configuration, see the <a href="https://linux.die.net/man/5/sssd.conf">sssd.conf documentation</a> and the <a href="https://linux.die.net/man/5/sssd-krb5">sssd-krb5 documentation</a>.</p>
<p><em>/etc/sssd/sssd.conf</em></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[sssd]</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="dt">services </span><span class="ot">=</span><span class="st"> nss, pam</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># replace this with a comma-separated list of your configured SSSD domains</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="dt">domains </span><span class="ot">=</span><span class="st"> TEST.EXAMPLE.COM</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="kw">[domain/TEST.EXAMPLE.COM]</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># can also be set to ad or local depending on your authentication setup</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="dt">id_provider </span><span class="ot">=</span><span class="st"> ldap</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="dt">auth_provider </span><span class="ot">=</span><span class="st"> krb5</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co"># replace with the name of your Kerberos realm</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="dt">krb5_realm </span><span class="ot">=</span><span class="st"> TEST.EXAMPLE.COM</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="co"># we recommend setting the debug level high to make troubleshooting easier</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="dt">debug_level </span><span class="ot">=</span><span class="st"> </span><span class="dv">5</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="dt">krb5_validate </span><span class="ot">=</span><span class="st"> </span><span class="kw">true</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="co"># note that RHEL-7 default to KERNEL ccaches, which are preferred in most cases to FILE</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="dt">krb5_ccachedir </span><span class="ot">=</span><span class="st"> /var/tmp</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a><span class="dt">krb5_keytab </span><span class="ot">=</span><span class="st"> /etc/krb5.keytab</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Some additional notes regarding configuration:</p>
<ul>
<li><p>The <code>debug</code> setting in <code>sssd.conf</code> is not required however we recommend adding it as it makes troubleshooting much more straightforward.</p></li>
<li><p>The examples above are not <em>complete</em> examples but rather illustrations of the <code>pam_sss</code> and <code>sssd.conf</code> entries that need to be present. Your local environment may have many additional entries which you should ensure are also included as necessary.</p></li>
</ul>
<p>You should be sure to suspend active R sessions and to restart RStudio after making configuration changes to ensure that the new settings are being used. You can do this as follows:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> rstudio-server force-suspend-all</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> rstudio-server restart</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="testing-and-troubleshooting" class="level3">
<h3 class="anchored" data-anchor-id="testing-and-troubleshooting">Testing and Troubleshooting</h3>
<p>After making the required configuration changes you should test your updated PAM configuration in isolation from RStudio using the <code>pamtester</code> utility as described in [Diagnosing PAM Authentication Problems]. The following command will test both authentication as well as issuing of Kerberos tickets:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> /usr/lib/rstudio-server/bin/pamtester <span class="at">--verbose</span> <span class="dt">\</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  rstudio-session <span class="op">&lt;</span>user<span class="op">&gt;</span> authenticate setcred open_session</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that you should substitute an actual local username for the <code>&lt;user&gt;</code> part of the command line.</p>
<p>The specifics of both PAM configuration and Kerberos configuration can vary substantially by environment. As a result correct configuration likely requires additional entries and options which this guide isn’t able to cover. Please refer to the documentation linked to in <a href="#more-resources">More Resources</a> as well as the <a href="http://www.eyrie.org/~eagle/software/pam-krb5/pam-krb5.html">pam_krb5</a> for additional details.</p>
</section>
</section>
<section id="directory-management" class="level2">
<h2 class="anchored" data-anchor-id="directory-management">Directory Management</h2>
<section id="working-directories" class="level3">
<h3 class="anchored" data-anchor-id="working-directories">Working Directories</h3>
<p>The default working directory for both new R sessions and new R projects is the user’s home directory (<code>~</code>). You can change this behavior via the <code>session-default-working-dir</code> and <code>session-default-new-project-dir</code> configuration parameters within the <code>rsession.conf</code> config file.</p>
<p>For example, the set the default values to “~/working” and “~/projects” you’d use the following configuration:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-default-working-dir</span><span class="ot">=</span><span class="st">~/working</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="dt">session-default-new-project-dir</span><span class="ot">=</span><span class="st">~/projects</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You should ensure that users have the permissions required to write to the specified default directories. The specified directories will be automatically created if they don’t already exist.</p>
<p>Note that these settings control only the <em>default</em> working and new project directories (users can still override these settings locally if they choose to).</p>
</section>
<section id="restricted-directories" class="level3">
<h3 class="anchored" data-anchor-id="restricted-directories">Restricted Directories</h3>
<p>Like most IDEs, RStudio allows users to open and edit any file to which they have read or write permission (respectively) at the filesystem level. However, in some environments it’s important to restrict access to system files from web front ends. RStudio can optionally enforce a restrictive mode for most directories, which will prevent users from using the IDE to open files in the directories. This is enabled by the <code>restrict-directory-view</code> option as follows:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="dt">restrict-directory-view</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When enabled, RStudio users will only have access to open files from the following in the IDE:</p>
<ul>
<li>Home directories</li>
<li>R and R library directories</li>
<li>RStudio-specific directories</li>
<li>User/session specific temporary directories</li>
</ul>
<p>If you wish to allow users to open and view files in a directory that RStudio would ordinarily forbid access to, you can change the <code>directory-view-whitelist</code> setting. This setting accepts a list of directories to enable access to, separated by <code>:</code>. For example, if you wish to allow users to open files from <code>/var/run</code> and <code>/usr/share/examples</code>:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="dt">directory-view-whitelist</span><span class="ot">=</span><span class="st">/var/run:/usr/share/examples</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that this setting only applies to RStudio’s IDE web interface. Users will still have access to other files on the system using R itself and/or the Terminal interface. Follow security best practices by relying on operating system-level file permissions, not front end restrictions, to guard access to sensitive content and files.</p>
</section>
</section>
<section id="workspace-management" class="level2">
<h2 class="anchored" data-anchor-id="workspace-management">Workspace Management</h2>
<section id="default-save-action" class="level3">
<h3 class="anchored" data-anchor-id="default-save-action">Default Save Action</h3>
<p>When a user exits an R session they need to choose whether to save their R workspace (i.e.&nbsp;<code>.RData</code> file). RStudio has global and per-project settings that control what happens when a workspace has unsaved changes. Possible values are:</p>
<ul>
<li><code>ask</code> – Ask whether to save the workspace file</li>
<li><code>yes</code> – Always save the workspace file</li>
<li><code>no</code> – Never save the workspace file</li>
</ul>
<p>The default global setting is <code>ask</code> and the default project-level setting is derived from the current global setting (these options can be modified by end users via the <em>Global Options</em> and <em>Project Options</em> dialogs respectively).</p>
<p>The default global setting can also be changed via the <code>session-save-action-default</code> configuration parameter in the <code>rsession.conf</code> config file. For example, to change the default value to <code>no</code> you would use this:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-save-action-default</span><span class="ot">=</span><span class="kw">no</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that this setting is specified in the <code>rsession.conf</code> config file and takes effect the next time a user launches an R session (rather than requiring a full restart of the server).</p>
</section>
<section id="suspend-and-resume" class="level3">
<h3 class="anchored" data-anchor-id="suspend-and-resume">Suspend and Resume</h3>
<p>When R sessions have been idle (no processing or user interaction) for a specified period of time (2 hours by default) RStudio suspends them to disk to free up server resources. When the user next interacts with their session it is restored from disk and the user resumes right back where they left off. This is all done seamlessly such that users aren’t typically aware that a suspend and resume has occurred.</p>
<section id="session-timeout-1" class="level4">
<h4 class="anchored" data-anchor-id="session-timeout-1">Session Timeout</h4>
<p>To configure the amount of idle time to wait before suspending sessions you can use the <code>session-timeout-minutes</code> setting in the <code>/etc/rstudio/rsession.conf</code> file. For example:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-timeout-minutes</span><span class="ot">=</span><span class="dv">360</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The default value if none is explicitly specified is 120 minutes.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>This setting and a few others discussed in this section are specified in the <code>/etc/rstudio/rsession.conf</code> file (rather than the <code>rserver.conf</code> file previously referenced).</p>
</div>
</div>
<p>There are some conditions where an R session will not be suspended, these include:</p>
<ol type="1">
<li>When a top-level R computation is running</li>
<li>When the R prompt is not in it’s default state (e.g.&nbsp;during a debugging session)</li>
</ol>
<p>You can also specify that R sessions should never be suspended by setting the <code>session-timeout-minutes</code> to zero. For example:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-timeout-minutes</span><span class="ot">=</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can also set session timeouts on a per-user or per-group basis, see the <a href="#user-and-group-profiles">User and Group Profiles</a> section for details.</p>
<p>If you simply want the session process to quit (and lose all unsaved work in the process) instead of suspending to disk, you can turn the <code>session-timeout-suspend</code> option off, like so:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-timeout-minutes</span><span class="ot">=</span><span class="dv">90</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="dt">session-timeout-suspend</span><span class="ot">=</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The above example will quit idle sessions after 90 minutes, discarding any unsaved data.</p>
</section>
<section id="forcing-suspends" class="level4">
<h4 class="anchored" data-anchor-id="forcing-suspends">Forcing Suspends</h4>
<p>You can force the suspend of individual sessions or even all sessions on the server. You can do this directly from the main page of the [Administrative Dashboard] or from the system shell as follows:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo rstudio-server force-suspend-session <span class="op">&lt;</span>pid<span class="op">&gt;</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo rstudio-server force-suspend-all</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="resume-and-.rprofile" class="level4">
<h4 class="anchored" data-anchor-id="resume-and-.rprofile">Resume and .Rprofile</h4>
<p>By default the <code>Rprofile.site</code> and <code>.Rprofile</code> files are not re-run when a session is resumed (it’s presumed that all of their side-effects are accounted for by simply restoring loaded packages, options, environment variables, etc.).</p>
<p>In some configurations it might be desirable to force the re-execution of profile files. There is an end user option that controls this on the <em>General</em> options pane which defaults to false. However, server administrators may wish to ensure that this option defaults to true. To do this you use the <code>session-rprofile-on-resume-default</code> option. For example:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb51"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-rprofile-on-resume-default</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that this setting is specified in the <code>rsession.conf</code> config file and takes effect the next time a user launches an R session (rather than requiring a full restart of the server).</p>
</section>
<section id="child-processes" class="level4">
<h4 class="anchored" data-anchor-id="child-processes">Child Processes</h4>
<p>By default, when sessions are quit or suspended, child processes created in the session will continue to run. You can specify whether or not that should occur by specifying the <code>session-quit-child-processes-on-exit</code> setting in <code>/etc/rstudio/rsession.conf</code>. The allowed values are <code>1</code> or <code>0</code> to quit child processes or leave them running, respectively.</p>
<p>For example, to quit child processes when the session exits:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-quit-child-processes-on-exit</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that this setting is specified in the <code>rsession.conf</code> config file and takes effect the next time a user launches an R session (rather than requiring a full restart of the server). Also, users can specifically override this setting in their project settings.</p>
</section>
<section id="session-timeout-kill-1" class="level4 pro-header">
<h4 class="pro-header anchored" data-anchor-id="session-timeout-kill-1">Session Timeout Kill</h4>
<p>To configure the amount of time to wait before forcefully killing and destroying sessions you can use the <code>session-timeout-kill-hours</code> option in the <code>/etc/rstudio/rsession.conf</code> file. This allows you to specify how much time should pass before a session is automatically cleaned up. This is the length of time during which a session exists without user input (<strong>regardless of computation status</strong>) allowing you to automatically reclaim temporary disk space used by the session, and to stop its processes and children.</p>
<p>This setting should only be used to ensure that any sessions that users have forgotten about are destroyed, reclaiming valuable disk space.</p>
<p><strong>Sessions can be destroyed while important computations are executing</strong>. The user whose session is cleaned will also lose all unsaved code and data.</p>
<p>This setting can also be used in conjunction with <code>session-timeout-minutes</code>, allowing already suspended sessions to be cleaned up.</p>
<p>For example:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb53"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-timeout-kill-hours</span><span class="ot">=</span><span class="dv">48</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The default value if none is explicitly specified is 0 hours, meaning sessions will never be killed and destroyed automatically. The supplied value should be an integer representing the amount of hours a session can be idle before being killed.</p>
</section>
</section>
<section id="workspace-storage" class="level3">
<h3 class="anchored" data-anchor-id="workspace-storage">Workspace Storage</h3>
<p>Storage of workspaces (.RData files) in RStudio does not use compression by default. This differs from the behavior of base R. Compression is disabled because we’ve observed that for larger workspaces (&gt; 50MB) compression can result in much lower performance for session startup and suspend/resume (on the order of 3 or 4 times slower).</p>
<p>The default workspace save options under RStudio are as follows:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">save.defaults=</span><span class="fu">list</span>(<span class="at">ascii=</span><span class="cn">FALSE</span>, <span class="at">compress=</span><span class="cn">FALSE</span>))</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">save.image.defaults=</span><span class="fu">list</span>(<span class="at">ascii=</span><span class="cn">FALSE</span>, <span class="at">safe=</span><span class="cn">TRUE</span>, <span class="at">compress=</span><span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you wish to use different defaults you can define the <code>save.defaults</code> and/or <code>save.image.defaults</code> options in your <code>Rprofile.site</code> or per-user <code>.Rprofile</code> and RStudio will respect the settings you specify rather than using it’s own defaults.</p>
<p>See <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/save.html" class="uri">https://stat.ethz.ch/R-manual/R-devel/library/base/html/save.html</a> for additional details on how R saves objects and the storage and performance implications of using compression.</p>
</section>
<section id="user-state-storage" class="level3">
<h3 class="anchored" data-anchor-id="user-state-storage">User State Storage</h3>
<p>By default, RStudio stores each user’s state in their home directory, in the following folder:</p>
<pre><code>~/.local/share/rstudio</code></pre>
<p>This folder contains information on all of a user’s active RStudio sessions, including all of the session data when the session is suspended. It also includes various internal RStudio state. Deleting it will result in a factory-fresh RStudio experience for the user, with the exception of their per-user settings (which are described in <a href="#customizing-session-settings">Customizing Session Settings</a>).</p>
<p>Because this folder can include arbitrary amounts of suspended session data, it can become very large. We recommend ensuring that each user has sufficient disk space quota to store suspended sessions along with the data for their R projects, and using other controls to clean up old data (such as <code>session-timeout-kill-hours</code>)</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>RStudio 1.3 and earlier stored user state in the folder <code>~/.rstudio</code> (non-configurable). If you are upgrading to RStudio 1.4 from an earlier release, RStudio will automatically move user state to the new location when the user starts their first IDE session after the upgrade. If there’s a possibility you may downgrade to a prior RStudio release, we recommend configuring RStudio to use the old location temporarily; see below for instructions.</p>
</div>
</div>
<section id="storage-location-customization" class="level4">
<h4 class="anchored" data-anchor-id="storage-location-customization">Storage Location Customization</h4>
<p>If it is necessary to store user state in another folder to relieve disk quota pressure or comply with other requirements, you can customize it using the <code>XDG_DATA_HOME</code> environment variable. <code>XDG_DATA_HOME</code> must be set for the entire RStudio process tree, since RStudio needs to write and read user state both inside and outside R sessions (so attempting to set it in session startup scripts like <code>Rprofile.site</code> or <code>rsession-profile</code> is inadequate and may result in inconsistent behavior).</p>
<p>If your Linux distribution uses the <code>systemd</code> init system, run <code>sudo systemctl edit rstudio-server</code>. In the editor, add the following section to the file (replacing <code>/mnt/storage</code> with your choice of root, of course). Note that the <code>rstudio</code> folder is not included in this path; this is a configuration root directory that will be respected by other applications that use the XDG standard.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[Service]</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="dt">Environment</span><span class="ot">=</span><span class="st">"XDG_DATA_HOME=/mnt/storage/$USER"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If your Linux distribution does not use the <code>systemd</code> init system, consult the documentation for your Linux distribution to learn which init system it uses and the appropriate method for setting environment variables for the <code>rstudio-server</code> service.</p>
<p>In the example above, the state for the user <code>bob</code> would be stored in <code>/mnt/storage/bob/rstudio</code>. The following special variables are expanded in the value:</p>
<table class="table">
<colgroup>
<col style="width: 19%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Expands To</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>$USER</code> <code>$HOME</code> <code>$HOSTNAME</code></td>
<td style="text-align: left;">User’s Unix username User’s home directory Name of current host</td>
</tr>
</tbody>
</table>
<p>The <code>$HOSTNAME</code> value can be useful to avoid conflicts between hosts running distinct RStudio installations that share a file system, but note that <code>$HOSTNAME</code> should only be used in installations wherein the RStudio services and R session are on the same host. It’s important that all the machines in an installation agree on the path to the user state.</p>
</section>
<section id="permissions-considerations" class="level4">
<h4 class="anchored" data-anchor-id="permissions-considerations">Permissions Considerations</h4>
<p>You must ensure that the folder that hosts user state data is writable by all RStudio users, since the R session (running as the user) will create the state folder if it does not exist. In the example above, <code>bob</code> would need write access to <code>/mnt/storage</code> to create <code>/mnt/storage/bob/rstudio</code>.</p>
<p>Note that the user’s default <em>umask</em> will be used to set permissions on this folder (i.e.&nbsp;RStudio does not attempt to set them). We recommend ensuring that user umasks are configured such that the folder, when created, will not be readable by other users. If you want the folder to be created with permissions other than those it would receive via umask, you can create it via some other means prior to a user’s first interaction with RStudio; RStudio will not attempt to re-create the folder or change permissions if it already exists.</p>
</section>
<section id="compatibility-sharing-and-exact-locations" class="level4">
<h4 class="anchored" data-anchor-id="compatibility-sharing-and-exact-locations">Compatibility, Sharing, and Exact Locations</h4>
<p><code>XDG_DATA_HOME</code> affects many different XDG-compliant applications, and it sets a base (root) directory, to which <code>/rstudio</code> is appended to form the final path. If you wish to set the exact path, or want to avoid side effects in other applications, use the environment variable <code>RSTUDIO_DATA_HOME</code> instead of <code>XDG_DATA_HOME</code>.</p>
<p>For example, RStudio 1.3 and prior stored user state in the folder <code>~/.rstudio</code>. If you wish to continue using this folder in RStudio 1.4 and later, you could use the following setting (again, in <code>sysctl edit rstudio-server</code>):</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[Service]</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="dt">Environment</span><span class="ot">=</span><span class="st">"RSTUDIO_DATA_HOME=$HOME/.rstudio"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note however that having two different RStudio installations with different versions of RStudio sharing a user state folder is unsupported and can lead to runtime errors or data corruption, as RStudio’s internal state structure changes between versions. If you have multiple RStudio installations with different versions that are run by concurrently by users, we recommend using <code>RSTUDIO_DATA_HOME</code> to create distinct user state folders, ensuring that these installations don’t corrupt each others’ state.</p>
<p>If <code>RSTUDIO_DATA_HOME</code> and <code>XDG_DATA_HOME</code> are both set, <code>RSTUDIO_DATA_HOME</code> takes precedence.</p>
</section>
<section id="job-launcher-mounts" class="level4">
<h4 class="anchored" data-anchor-id="job-launcher-mounts">Job Launcher Mounts</h4>
<p>Finally, if you are using containerized sessions with the Job Launcher, and you mount RStudio’s user state data to a folder outside their home directory, you must ensure that directory is mounted into the containers in addition to the home directory itself. See [Launcher Mounts] for more information about mounting folders into containerized sessions.</p>
</section>
</section>
</section>
<section id="first-project-template" class="level2">
<h2 class="anchored" data-anchor-id="first-project-template">First Project Template</h2>
<section id="overview" class="level3">
<h3 class="anchored" data-anchor-id="overview">Overview</h3>
<p>RStudio allows you to specify a first project to automatically open for first time users of the system. To do this, set the <code>session-first-project-template-path</code> parameter in <code>rsession.conf</code> to an RStudio project directory. This directory will be copied into the user’s home directory upon first running the IDE, and will automatically open the project contained within. For example:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="dt">session-first-project-template-path</span><span class="ot">=</span><span class="st">/etc/rstudio/welcome-project</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In the example above, the project located within /etc/rstudio/welcome-project would be copied to users’ home directories when first starting RStudio, and the project file <code>welcome-project.Rproj</code> would be run.</p>
<p>The project file must be named the same as the directory it is contained in. For the above example, the project file must be named <code>welcome-project.Rproj</code>. In addition, you must ensure that the project directory is fully readable and executable by your users, as they will be copying the contents of the directory into their home directory.</p>
<p>If you copy an existing project to be used as a project template, ensure that you delete the RStudio metadata folders and files contained within the project directory. You will want to ensure you delete the following:</p>
<p><code>.Rproj.user</code> <code>.Rhistory</code> <code>.RData</code></p>
<p>If you are creating the project template for the first time, the project (.Rproj) file must contain the version specifier at a minimum. For example:</p>
<p><em>welcome-project.Rproj</em></p>
<div class="sourceCode" id="cb59"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Version: 1.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="project-defaultopendocs" class="level3">
<h3 class="anchored" data-anchor-id="project-defaultopendocs">Project DefaultOpenDocs</h3>
<p>Project files allow you to specify default documents that should be opened when a project is opened for the very first time. For example, you could have your welcome project bring up explanatory documents to help guide your users. To do this, add the <code>DefaultOpenDocs</code> line to the .Rproj file. For example:</p>
<p><em>welcome-project.Rproj</em></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Version: 1.0</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="dt">DefaultOpenDocs: welcome.txt:firstMarkdown.Rmd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>DefaultOpenDocs</code> parameters specifies a list of files to automatically be opened when the project is opened for the first time, separated by a <code>:</code> character. These files are relative paths to the project directory. Only files contained within the project directory can be opened.</p>
</section>
</section>
<section id="project-sharing" class="level2 pro-header">
<h2 class="pro-header anchored" data-anchor-id="project-sharing">Project Sharing</h2>
<section id="overview-1" class="level3">
<h3 class="anchored" data-anchor-id="overview-1">Overview</h3>
<p>Project Sharing is a feature of RStudio Workbench that enables users to work together on RStudio projects. When enabled, a project owner may select any number of other RStudio Workbench users as project collaborators. RStudio Workbench manages the permissions of files in the project to ensure that all collaborators can access them, enables multiple collaborators to edit a file simultaneously, and lets collaborators see who else is working inside a project with them.</p>
</section>
<section id="prerequisites" class="level3">
<h3 class="anchored" data-anchor-id="prerequisites">Prerequisites</h3>
<p>Due to high latencies, use of EFS (Elastic File System) for project sharing directories within AWS is strongly discouraged. If EFS is used, RStudio will experience highly degraded performance. We recommend using a traditional NFSv3 or NFSv4 mount instead.</p>
<p>The following sections outline additional prerequisites that your file system must meet.</p>
<section id="access-control-lists" class="level4">
<h4 class="anchored" data-anchor-id="access-control-lists">Access Control Lists</h4>
<p>To use Project Sharing, the directories hosting the projects to be shared must be on a volume that supports Access Control Lists (ACLs). RStudio uses ACLs to grant collaborators access to shared projects; ordinary file permissions are not modified.</p>
<p>Instructions for enabling ACLs vary by Linux distribution and filesystem type (see the <a href="https://help.ubuntu.com/community/FilePermissionsACLs">Guide to enabling ACLs on Ubuntu</a> or <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Storage_Administration_Guide/ch-acls.html">RedHat</a>, for example). RStudio supports both NFSv3 (POSIX compatible) and NFSv4 ACLs.</p>
</section>
<section id="shared-projects-root-directory" class="level4">
<h4 class="anchored" data-anchor-id="shared-projects-root-directory">Shared Projects Root Directory</h4>
<p>RStudio cannot grant access to shared projects in arbritary locations. This would lead to unintended changes to the file system ACLs.</p>
<p>By default only projects stored within the users’ home directories can be shared. If you want share projects in a different location you can configure RStudio with an additional root directory for all users:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="dt">server-project-sharing-root-dir</span><span class="ot">=</span><span class="st">/projects</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="project-sharing-and-nfs" class="level4">
<h4 class="anchored" data-anchor-id="project-sharing-and-nfs">Project Sharing and NFS</h4>
<p>If you plan to use Project Sharing with NFS-mounted volumes, there are several caveats you should be aware of.</p>
<ul>
<li><p>We recommend mounting NFS with the <code>noac</code> mount option. Without this option, NFS caches file attributes, so it may not be possible for users working simultaneously in a project to know whether they’re seeing each others’ latest changes. The <code>noac</code> option does reduce performance, however, so we recommend testing to choose the right trade off for your environment.</p></li>
<li><p>Some features which automatically update when directory contents change will not update on NFS. For instance, users may need to manually refresh the Files pane to see new files added by collaborators.</p></li>
<li><p>ACL support on NFS is more complicated than ACL support on local file systems. Read <a href="http://wiki.linux-nfs.org/wiki/index.php/ACLs">ACLs on Linux NFS</a> for a discussion of the issues; guidance for configuring specific NFS versions is provided below.</p></li>
</ul>
<section id="determining-nfs-version" class="level5">
<h5 class="anchored" data-anchor-id="determining-nfs-version">Determining NFS Version</h5>
<p>Project Sharing works with versions 3 and 4 of the NFS protocol. However, some additional configuration may be necessary depending on the NFS version and underlying filesystem. To determine your NFS client version, run the following command on your RStudio Workbench instance:</p>
<pre><code>$ nfsstat -m</code></pre>
<p>You should see <code>vers=3.0</code> in the output if you’re using NFSv3, and <code>vers=4.0</code> if you’re using NFSv4. Extra RStudio configuration is required for NFSv4 clients (see below).</p>
</section>
<section id="nfsv3" class="level5">
<h5 class="anchored" data-anchor-id="nfsv3">NFSv3</h5>
<p>To use NFSv3 access control lists, you will need to ensure that the filesystem is mounted with the <code>acl</code> attribute, and modify <code>/etc/fstab</code> if necessary to persist the attributes.</p>
<p>Note that many Linux distributions now have ACLs enabled by default in which case no special configuration is required. You can use the <code>tune2fs</code> command to inspect the attributes with which your filesystem is mounted (<code>user_xattr</code> and <code>acl</code> are required for project sharing).</p>
<p>On most systems this is the default, so you need only ensure that <code>noacl</code> is not present. It’s also necessary for the file system on the NFS server to itself be appropriately configured for ACL support; see the section above on Access Control Lists for guidance. Not all file servers that support the NFSv3 protocol also support POSIX compatible ACLs.</p>
<p>To test for POSIX compatible ACLs, you can use the <code>setfacl</code> command as follows:</p>
<pre><code>setfacl -m u:user2:x /home/user1/project</code></pre>
<p>where <code>/home/user1/project</code> is the full path to a directory owned by <code>user1</code>, and <code>user2</code> is another valid user on the system.</p>
<p>Because many Linux systems support POSIX compatible ACLs on the native filesystem, RStudio uses them by default. You can also specify them explicitly as follows:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb64"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="dt">nfs-acl-version</span><span class="ot">=</span><span class="st">nfsv3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="nfsv4" class="level5">
<h5 class="anchored" data-anchor-id="nfsv4">NFSv4</h5>
<p>Version 4 of the NFS protocol uses a very different permissions and ACL model from Version 3. Not all NFSv4 servers support or expose the NFSv4 ACL model, so check with the server administrator to determine whether the capability exists and/or can be enabled.</p>
<p><strong>Testing for support</strong></p>
<p>To test NFSv4 ACL support, you can use the <code>nfs4_setfacl</code> command as follows:</p>
<pre><code>nfs4_setfacl -a A::user2@domain:rax /home/user1/project</code></pre>
<p>where <code>/home/user1/project</code> is the full path to a directory owned by <code>user1</code>, <code>user2</code> is another valid user on the system, and <code>domain</code> is your system’s user domain. Verify that this command succeeds, and that the new ACL entry for <code>user2@domain</code> is visible when you retrieve it:</p>
<pre><code>nfs4_getfacl /home/user1/project</code></pre>
<p>This presumes that your environment supports using user/domain pairs as security principals. While most environments do, there are two different ways to specify security principals in NFSv4 ACLs: by <strong>user name and domain</strong> (preferred) or <strong>user ID</strong>. RStudio can use either, but you’ll need to choose one appropriate for your network environment. If unsure, examine the output of the <code>nfs4_getfacl</code> operation described above. The security principal (the part after e.g., <code>A::</code> on each line) will be displayed as either a large integer (UID) or in <code>username@domain</code> format.</p>
<p><strong>Using user name and domain security principals</strong></p>
<p>NFSv4 ACLs differ from NFSv3 ACLs in that they can associate a <em>domain</em> with each user named in the access control list. This is typically the same as the domain part of the machine’s host name, but can be any string that the NFSv4 client and server agree on. On Linux systems, the domain can be set in <code>/etc/idmapd.conf</code>.</p>
<p>Tell RStudio the NFSv4 domain you want to use as follows:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb67"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="dt">nfs-acl-version</span><span class="ot">=</span><span class="st">nfsv4</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="dt">nfs4-principal-type</span><span class="ot">=</span><span class="st">username</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="dt">nfs4-domain</span><span class="ot">=</span><span class="st">mydomain.com</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Using user ID security principals</strong></p>
<p>In some environments, it may not be possible to resolve fully qualified <code>user@domain</code> security principals on all of the nodes running RStudio Workbench. This is common on e.g., Kubernetes nodes which are not domain-joined. In this case, it’s possible to use raw User ID (UID) values as security principals in the access control list. You can tell RStudio to write raw UIDs as security principals in NFSv4 access control lists as follows:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="dt">nfs-acl-version</span><span class="ot">=</span><span class="st">nfsv4</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="dt">nfs4-principal-type</span><span class="ot">=</span><span class="st">uid</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="user-visibility" class="level4">
<h4 class="anchored" data-anchor-id="user-visibility">User Visibility</h4>
<p>Projects can only be shared with users with provisioned local system accounts unless LDAP is used for local account provisioning.</p>
<p>The RStudio user database is scanned to list Project Sharing users. This method of user scanning avoids making calls to the system to determine the available users, and prevents making queries to the system password database (such as LDAP). However, it only lists users who have previously logged in to RStudio. To instead show all users on the server, set the following configuration to scan the system password database:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="dt">project-sharing-enumerate-server-users</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When scanning via the system password database, if you’re using <a href="https://fedoraproject.org/wiki/Features/SSSD">sssd</a> with LDAP, you may need to enable user enumeration so that RStudio Workbench can search the directory to create a list of users you can share a project with. To do this, set the following in your <em>sssd.conf</em> file:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[domain/&lt;domainname&gt;]</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="dt">enumerate </span><span class="ot">=</span><span class="st"> </span><span class="kw">true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Alternatively, the <code>auth-required-user-group</code> setting can be used. This setting allows RStudio Workbench to enumerate only the members of the named groups rather than the entire user directory. Therefore, if you cannot enable user enumeration on your LDAP provider, you can instead create a group containing all RStudio users and supply it as the <code>auth-required-user-group</code>.</p>
<p>You can read more about user enumeration in the <a href="https://docs.pagure.org/SSSD.sssd/users/faq.html#when-should-i-enable-enumeration-in-sssd-or-why-is-enumeration-disabled-by-default">sssd FAQ</a>.</p>
</section>
<section id="shared-storage" class="level4">
<h4 class="anchored" data-anchor-id="shared-storage">Shared Storage</h4>
<p>To use Project Sharing, a directory must be specified to which all users on the server can read and write. It must also have the <a href="https://en.wikipedia.org/wiki/Sticky_bit">sticky bit</a> set, so that users cannot remove each others’ content. In a single-server installation, RStudio uses this location by default:</p>
<pre><code>/var/lib/rstudio-server/shared-storage</code></pre>
<p>In a load-balanced configuration, however, RStudio does not provide a default, so it is necessary to provision a path both visible to and writable by all users on the system (typically on the same filesystem on which home directories are mounted). This path can be supplied to RStudio Workbench via the <code>server-shared-storage-path</code> option, for example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb72"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="dt">server-shared-storage-path</span><span class="ot">=</span><span class="st">/shared/rstudio-server/shared-storage</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>server-shared-storage-path</code> option (described above) configures the path used for shared project storage. Note that this storage contains only <em>links</em> to shared projects, not the projects themselves, so requires a very small amount of physical storage.</p>
<section id="launcher-considerations" class="level5">
<h5 class="anchored" data-anchor-id="launcher-considerations">Launcher Considerations</h5>
<p>When configuring RStudio Workbench to work with the RStudio Job Launcher, it is recommended to configure the <a href="#shared-storage">Shared Storage</a> path in a location that will be reachable both by the RStudio Workbench instance and each Launcher Session. See the [Launcher Sessions] section for more details.</p>
</section>
</section>
<section id="proxy-settings" class="level4">
<h4 class="anchored" data-anchor-id="proxy-settings">Proxy Settings</h4>
<p>If you are running RStudio Workbench with a proxy, you’ll need to make sure that your proxy is correctly configured to pass websocket connections through in order for all Project Sharing features to work. See the [Running with a Proxy] section for more on this.</p>
</section>
</section>
<section id="disabling-project-sharing" class="level3">
<h3 class="anchored" data-anchor-id="disabling-project-sharing">Disabling Project Sharing</h3>
<p>Project Sharing is enabled by default however you can disable it using the <code>server-project-sharing</code> option, for example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb73"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="dt">server-project-sharing</span><span class="ot">=</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="package-installation" class="level2">
<h2 class="anchored" data-anchor-id="package-installation">Package Installation</h2>
<p>You can customize the location of user packages installed from CRAN as well as the default CRAN repository. You can also configure the user-interface of the RStudio IDE to discourage end-user package installation in the case where packages are deployed centrally to a site library.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The settings discussed in this section are specified in the <code>/etc/rstudio/rsession.conf</code> file (rather than the <code>rserver.conf</code> file previously referenced).</p>
</div>
</div>
<section id="user-library" class="level3">
<h3 class="anchored" data-anchor-id="user-library">User Library</h3>
<p>By default R packages are installed into a user-specific library based on the contents of the <code>R_LIBS_USER</code> environment variable (more details on this mechanism are here: <a href="http://stat.ethz.ch/R-manual/R-devel/library/base/html/libPaths.html">http://stat.ethz.ch/R-manual/R-devel/library/base/html/libPaths.html</a>).</p>
<p>It’s also possible to configure an alternative default for user package installation using the <code>r-libs-user</code> setting. For example:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="dt">r-libs-user</span><span class="ot">=</span><span class="st">~/R/library/%v</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>R interprets <code>%v</code> to be the <code>major.minor</code> version of R; for example the above would cause R 3.6 to use a package library located at <code>~/R/library/3.6</code>.</p>
<section id="unversioned-r-library" class="level4">
<h4 class="anchored" data-anchor-id="unversioned-r-library">Unversioned R Library</h4>
<p>R doesn’t guarantee ABI compatibility between minor versions, so when you use packages that include compiled code, you will want to ensure that each version of R has its own library. Otherwise, compiled code may cause crashes or other unexpected behavior when R is upgraded.</p>
<p>However, if you do not use any compiled packages, you can share a library between R versions (e.g.&nbsp;just <code>~/R/library</code>). This makes it possible to upgrade the major version of R on the server and have user’s packages continue to work.</p>
</section>
<section id="upgrading-r" class="level4">
<h4 class="anchored" data-anchor-id="upgrading-r">Upgrading R</h4>
<p>You can read more about package library considerations when upgrading R in the following article:</p>
<p><a href="https://shiny.rstudio.com/articles/upgrade-R.html">Upgrading to a New Version of R</a></p>
</section>
</section>
<section id="discouraging-user-installations" class="level3 pro-header">
<h3 class="pro-header anchored" data-anchor-id="discouraging-user-installations">Discouraging User Installations</h3>
<p>It may be that you’ve configured RStudio Workbench with a site package library that is shared by all users. In this case you might wish to discourage users from installing their own packages by removing the package installation UI from the RStudio IDE. To do this you use the <code>allow-package-installation</code> setting. For example:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="dt">allow-package-installation</span><span class="ot">=</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that this setting merely discourages package installation by removing user-interface elements. It’s still possible for users to install packages directly using the <code>utils::install.packages</code> function.</p>
</section>
<section id="cran-repositories" class="level3">
<h3 class="anchored" data-anchor-id="cran-repositories">CRAN Repositories</h3>
<p>RStudio uses the RStudio CRAN mirror (<a href="https://cran.rstudio.com">https://cran.rstudio.com</a>) by default. This mirror is globally distributed using Amazon S3 storage so should provide good performance for all locales. You may however wish to override the default CRAN mirror. This can be done with the <code>r-cran-repos</code> settings. For example:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb76"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="dt">r-cran-repos</span><span class="ot">=</span><span class="st">http://cran.at.r-project.org/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Whatever the default CRAN mirror is, individual users are still able to set their own default. To discourage this, you can set the <code>allow-r-cran-repos-edit</code> settings. For example:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="dt">allow-r-cran-repos-edit</span><span class="ot">=</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that even with user editing turned off it’s still possible for users to install packages from alternative repositories by directly specifying the <code>repos</code> parameter in a call to <code>install.packages</code>.</p>
<p>To specify a list of CRAN repos, define a <code>/etc/rstudio/repos.conf</code> file containing the primary <code>CRAN</code> repo and named secondary repos. For example:</p>
<p><em>/etc/rstudio/repos.conf</em></p>
<div class="sourceCode" id="cb78"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="dt">CRAN</span><span class="ot">=</span><span class="st">https://cran.rstudio.com</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="dt">Australia</span><span class="ot">=</span><span class="st">https://cran.ms.unimelb.edu.au/</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="dt">Austria</span><span class="ot">=</span><span class="st">https://lib.ugent.be/CRAN/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To change the location of <code>repos.conf</code>, use the <code>r-cran-repos-file</code> setting. For example, by adding to <code>rsession.conf</code>:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="dt">r-cran-repos-file</span><span class="ot">=</span><span class="st">/etc/rstudio/mirrors.conf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Optional CRAN repos can be made available for users in RStudio with the <code>r-cran-repos-url</code> setting, this setting expects a URL to retrieve a configuration file containing named secondary repos. These secondary repos won’t be set by default, but rather, RStudio will list them to users to be manually added to their repo selection. For example:</p>
<p><em>http://custom-domain/repos.conf</em></p>
<div class="sourceCode" id="cb80"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Australia</span><span class="ot">=</span><span class="st">https://cran.ms.unimelb.edu.au/</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="dt">Austria</span><span class="ot">=</span><span class="st">https://lib.ugent.be/CRAN/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice that the <code>allow-r-cran-repos-edit</code> option can also be used to disallow secondary repos and that <code>repos.conf</code> overrides the <code>r-cran-repos</code> setting, if specified.</p>
</section>
</section>
<section id="feature-limits" class="level2 pro-header">
<h2 class="pro-header anchored" data-anchor-id="feature-limits">Feature Limits</h2>
<p>RStudio Workbench has a number of other limits that can be configured. This section describes these limits. Note that these settings are specified in the <code>/etc/rstudio/rsession.conf</code> file (rather than the <code>rserver.conf</code> file previously referenced).</p>
<section id="disabling-access-to-features" class="level3">
<h3 class="anchored" data-anchor-id="disabling-access-to-features">Disabling Access to Features</h3>
<p>Besides the limits on package installation and CRAN repository editing described in the previous section there are a number of other limits that can be specified. The following describes all of the options that can be used to limit features.</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<dl>
<dt><code>allow-vcs</code></dt>
<dd><p>Allow access to Git and SVN version control features.</p>
</dd>
<dt><code>allow-vcs-executable-edit</code></dt>
<dd><p>Allow editing of the underlying Git or SVN executable.</p>
</dd>
<dt><code>allow-package-installation</code></dt>
<dd><p>Allow installation of packages using the Packages Pane (note that even if this is set to 0 it’s still possible to install packages using <code>utils::install.packages</code> from the command line).</p>
</dd>
<dt><code>allow-r-cran-repos-edit</code></dt>
<dd><p>Allow editing of the CRAN repository used for package downloads (note that it’s still possible to specify an alternate repository using the <code>repos</code> parameter of <code>utils::install.packages</code>).</p>
</dd>
<dt><code>allow-shell</code></dt>
<dd><p>Enable integrated terminal feature (note that it’s still possible to execute shell commands using the <code>system</code> function).</p>
</dd>
<dt><code>allow-terminal-websockets</code></dt>
<dd><p>Allow integrated terminal feature to use WebSockets for better responsiveness.</p>
</dd>
<dt><code>allow-file-downloads</code></dt>
<dd><p>Allow downloading files using the Export command in the Files Pane.</p>
</dd>
<dt><code>allow-file-uploads</code></dt>
<dd><p>Allow uploading files using the Upload command in the Files pane.</p>
</dd>
<dt><code>allow-external-publish</code></dt>
<dd><p>Allow content to be published to external (cloud) services. This includes publishing HTML documents created with R Markdown or R Presentations to RPubs (http://rpubs.com), and publishing Shiny applications and documents to ShinyApps.io (http://shinyapps.io). Note that this just removes the relevant user interface elements in the IDE, and that it may still be possible for users to publish content using the R console.</p>
</dd>
<dt><code>allow-publish</code></dt>
<dd><p>Allow content to be published. If specified, this option removes all user interface elements related to publishing content from the IDE, and overrides <code>allow-external-publish</code>.</p>
</dd>
<dt><code>allow-launcher-jobs</code></dt>
<dd><p>Allow running standalone adhoc Job Launcher jobs from the Jobs pane.</p>
</dd>
</dl>
<p>All of these features are enabled by default. Specify <code>0</code> to disable access to the feature.</p>
<p>Note that these options should be specified in the <code>/etc/rstudio/rsession.conf</code> configuration file (rather than the main rserver.conf configuration file).</p>
</section>
<section id="maximum-file-upload-size" class="level3">
<h3 class="anchored" data-anchor-id="maximum-file-upload-size">Maximum File Upload Size</h3>
<p>You can limit the maximum size of a file upload by using the <code>limit-file-upload-size-mb</code> setting. For example, the following limits file uploads to 100MB:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="dt">limit-file-upload-size-mb</span><span class="ot">=</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The default behavior is no limit on the size of file uploads.</p>
</section>
<section id="cpu-time-per-computation" class="level3">
<h3 class="anchored" data-anchor-id="cpu-time-per-computation">CPU Time per Computation</h3>
<p>If you want to prevent runaway computations that consume 100% of the CPU you can set the maximum number of minutes to allow top-level R computations to run for using the <code>limit-cpu-time-minutes</code> setting. For example:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb82"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="dt">limit-cpu-time-minutes</span><span class="ot">=</span><span class="dv">30</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This specifies that no top level computation entered at the R console should run for more than 30 minutes. This constraint is implemented by calling the R <code>setTimeLimit</code> function immediately prior to handing off console commands to R. As a result it is possible for a particular script to override this behavior if it knows that it may exceed the threshold. This would be done as follows:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setTimeLimit</span>(<span class="at">cpu =</span> <span class="cn">Inf</span>)</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Long running R code here...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="xfs-disk-quotas" class="level3">
<h3 class="anchored" data-anchor-id="xfs-disk-quotas">XFS Disk Quotas</h3>
<p>If your system uses the XFS file system (<a href="http://en.wikipedia.org/wiki/XFS">http://en.wikipedia.org/wiki/XFS</a>) then RStudio Workbench can be configured to notify users when they come close to or exceed their disk quota. You can enable this using the <code>limit-xfs-disk-quota</code> setting. For example:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb84"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="dt">limit-xfs-disk-quota</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The user’s XFS disk quota will be checked when the RStudio IDE loads and a warning message will be displayed if they are near to or over their quota.</p>
</section>
</section>
<section id="notifications" class="level2 pro-header">
<h2 class="pro-header anchored" data-anchor-id="notifications">Notifications</h2>
<p>Administrators can broadcast notifications to user sessions in real-time using the <code>notifications.conf</code> file located at <code>/etc/rstudio/notifications.conf</code>. This file comes by default with commented out entries that you can uncomment and use, and helps show you the available time and message formats.</p>
<p>Each session monitors for changes in the <code>notifications.conf</code> file, and if a new notification is detected, it will be shown to the user at the appropriate time (as defined in the next section). All open sessions for a user will receive the notification, and they will continue to see the notification in any new sessions they open until the notification is acknowledged.</p>
<p>Modifying a notification will cause it to count as a new notification, so make sure to only save changes to the file when you’ve confirmed what you want the message to be and what time it should be displayed. Otherwise, the same message could be shown multiple times.</p>
<section id="notifications.conf-format" class="level3">
<h3 class="anchored" data-anchor-id="notifications.conf-format">notifications.conf format</h3>
<p>The <code>notifications.conf</code> file is a file consisting of multiple notification entries separated by a blank line. The following table lists the fields that are available for each notification entry in the file.</p>
<table class="table">
<colgroup>
<col style="width: 28%">
<col style="width: 71%">
</colgroup>
<tbody>
<tr class="odd">
<td>StartTime</td>
<td>The start time at which the notification can start to be delivered. This must be a time-formatted field. This field is not required.</td>
</tr>
<tr class="even">
<td>EndTime</td>
<td>The end time at which the notification will no longer be delivered. This must be a time-formatted field. This field is required.</td>
</tr>
<tr class="odd">
<td>Message</td>
<td>The message content to show to the users. The message cannot have empty lines in it. This field is required.</td>
</tr>
</tbody>
</table>
<p>An example <code>notifications.conf</code> file is shown below. For more information on the formatting of each field, see the subsequent sections.</p>
<p><em>/etc/rstudio/notifications.conf</em></p>
<div class="sourceCode" id="cb85"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="dt">StartTime: 2017-08-30 09:00:00 -5:00</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="dt">EndTime: 2017-08-30 20:00:00 -05:00</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="dt">Message: Please remember to shut down your computers at the end of the day.</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="dt">StartTime: 2017-05-30 05:55</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="dt">EndTime: 2017-06-13</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a><span class="dt">Message: This is a test notification. Notifications can span</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a><span class="dt">   multiple lines by indenting the next line's message text.</span></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a><span class="dt">   Empty lines are not supported!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>It is important that each entry consists of 2-3 fields as specified above (StartTime, EndTime, and Message). Each field must go on its own line. There should be no empty lines between field definitions.</p>
<p>For example, this is okay:</p>
<p><em>/etc/rstudio/notifications.conf</em></p>
<div class="sourceCode" id="cb86"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="dt">StartTime: 2017-08-30 12:00:00 -5:00</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="dt">EndTime: 2017-08-30 20:00:00 -05:00</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="dt">Message: Please remember to shut down your computers at the end of the day.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But this is not:</p>
<p><em>/etc/rstudio/notifications.conf</em></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="dt">StartTime: 2017-08-30 12:00:00 -5:00</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="dt">EndTime: 2017-08-30 20:00:00 -05:00</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="dt">Message: Please remember to shut down your computers at the end of the day.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There must be <strong>one</strong> empty line (2 new line characters) in between separate notification entries.</p>
<p>For example, this is okay:</p>
<p><em>/etc/rstudio/notifications.conf</em></p>
<div class="sourceCode" id="cb88"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="dt">StartTime: 2017-08-30 08:00:00 -5:00</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="dt">EndTime: 2017-08-30 20:00:00 -05:00</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="dt">Message: Please remember to shut down your computers at the end of the day.</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="dt">StartTime: 2017-08-30 08:00:00 -5:00</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a><span class="dt">EndTime: 2017-08-30 20:00:00 -05:00</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="dt">Message: Remember to drop off any borrowed equipment at Grace's office today only.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But this is not:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="dt">StartTime: 2017-08-30 12:00:00 -5:00</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="dt">EndTime: 2017-08-30 20:00:00 -05:00</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="dt">Message: Please remember to shut down your computers at the end of the day.</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="dt">StartTime: 2017-08-30 12:00:00 -5:00</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="dt">EndTime: 2017-08-30 20:00:00 -05:00</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a><span class="dt">Message: Remember to drop off any borrowed equipment at Grace's office today only.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="time-format" class="level4">
<h4 class="anchored" data-anchor-id="time-format">Time format</h4>
<p>The time format fields, <code>StartTime</code> and <code>EndTime</code>, must be in one of the following formats:</p>
<p><code>YYYY</code>-<code>MM</code>-<code>DD</code></p>
<p><code>YYYY</code>-<code>MM</code>-<code>DD</code> <code>hh</code>:<code>mm</code></p>
<p><code>YYYY</code>-<code>MM</code>-<code>DD</code> <code>hh</code>:<code>mm</code>:<code>ss</code> <code>zh</code>:<code>zm</code></p>
<p>The following table shows the meaning of the format sections.</p>
<table class="table">
<colgroup>
<col style="width: 46%">
<col style="width: 53%">
</colgroup>
<tbody>
<tr class="odd">
<td>YYYY</td>
<td>4 digit year (example: 2017)</td>
</tr>
<tr class="even">
<td>MM</td>
<td>2 digit month (example: 06)</td>
</tr>
<tr class="odd">
<td>DD</td>
<td>2 digit day (example: 28)</td>
</tr>
<tr class="even">
<td>hh</td>
<td>2 digit hours (24 hour clock. example: 19)</td>
</tr>
<tr class="odd">
<td>mm</td>
<td>2 digit minutes (example: 15)</td>
</tr>
<tr class="even">
<td>ss</td>
<td>2 digit seconds (example: 59)</td>
</tr>
<tr class="odd">
<td>zh</td>
<td>Time zone hours offset (example: -06 for CST or -08 for PST)</td>
</tr>
<tr class="even">
<td>zm</td>
<td>Time zone minutes offset (usually just 00, different for only a few timezones)</td>
</tr>
</tbody>
</table>
<p>If no time is specified, the time will be set to 00:00:00 in the current server time zone for start times and 23:59:59 in the current server time zone for end times.</p>
<p>If no seconds are specified, they will be set to 00 and the time is interpreted in the current server time zone.</p>
<p>Note that if you have sessions spanning multiple servers in different time zones and you want your notifications to display at a uniform time, you MUST manually set the timezone to what is appropriate. Otherwise, sessions in different time zones will see notifications in their local time.</p>
<p>The following table shows some example dates and how they would be formatted.</p>
<table class="table">
<colgroup>
<col style="width: 64%">
<col style="width: 35%">
</colgroup>
<tbody>
<tr class="odd">
<td>January 1st, 2020 at 6:00 PM in the server’s time zone</td>
<td>2020-01-01 18:00</td>
</tr>
<tr class="even">
<td>July 31st, 2018 at midnight in the server’s time zone (for a start time)</td>
<td>2018-07-31</td>
</tr>
<tr class="odd">
<td>September 23rd, 2019 at 23:59:59 in the server’s time zone (for an end time)</td>
<td>2019-09-23</td>
</tr>
<tr class="even">
<td>November 30th, 2020 at 9:14:12 in Pacific Standard Time</td>
<td>2020-11-30 09:14:12 -08:00</td>
</tr>
</tbody>
</table>
</section>
<section id="message-format" class="level4">
<h4 class="anchored" data-anchor-id="message-format">Message format</h4>
<p>The message to deliver must be plain text and cannot have any empty lines. To start text on another line, simply indent the line as in the multiline example in the previous section.</p>
</section>
</section>
</section>
<section id="rstudio-connect-server" class="level2">
<h2 class="anchored" data-anchor-id="rstudio-connect-server">RStudio Connect Server</h2>
<p>Users of RStudio can publish content to <a href="https://www.rstudio.com/products/connect/">RStudio Connect</a>. To do so, they must first specify the RStudio Connect server they wish to use. You can set the default RStudio Connect server URL to use when users are connecting to an account. To do so, use the <code>default-rsconnect-server</code> option:</p>
<p><em>/etc/rstudio/rsession.conf</em></p>
<div class="sourceCode" id="cb90"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="dt">default-rsconnect-server</span><span class="ot">=</span><span class="st">http://connectserver/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="terminal-websockets" class="level2">
<h2 class="anchored" data-anchor-id="terminal-websockets">Terminal WebSockets</h2>
<p>The RStudio terminal pane uses WebSockets to communicate between the web browser and the session. If the attempt to connect with WebSockets fails, the terminal switches to a less responsive but generally more forgiving HTTP-based protocol.</p>
<p>Slow typing response in the terminal is a symptom of this slower protocol. You can check by starting a terminal, then going to Tools / Terminal / Terminal Diagnostics. Scroll down to <em>Connection Information</em> and look for “WebSocket connect error, switching to RPC”. This indicates that the terminal was unable to use WebSockets and has fallen back on the slower protocol.</p>
<p>Several settings are available for tuning the terminal’s use of WebSockets.</p>
<section id="ide-settings" class="level3">
<h3 class="anchored" data-anchor-id="ide-settings">IDE Settings</h3>
<p>In the IDE under Tools / Global Options / Terminal, there is a checkbox “Connect with WebSockets”. Unchecking this will cause terminals to always connect with the HTTP-based protocol.</p>
</section>
<section id="feature-limit" class="level3 pro-header">
<h3 class="pro-header anchored" data-anchor-id="feature-limit">Feature Limit</h3>
<p>As mentioned earlier, the feature limit <code>allow-terminal-websockets</code> completely disables the use of WebSockets.</p>
</section>
<section id="advanced-settings" class="level3">
<h3 class="anchored" data-anchor-id="advanced-settings">Advanced Settings</h3>
<p>The following settings may be modified by adding them to the <code>/etc/rstudio/rsession.conf</code> file.</p>
<table class="table">
<colgroup>
<col style="width: 32%">
<col style="width: 16%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Setting</th>
<th style="text-align: left;">Default</th>
<th style="text-align: left;">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">websocket-ping-seconds</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">How often a keep-alive is sent over the WebSocket, in seconds. Set to 0 to disable keep-alives. Many proxies will close inactive WebSockets so keeping enabled is recommended.</td>
</tr>
<tr class="even">
<td style="text-align: left;">websocket-connect-timeout</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">How long terminal waits (in seconds) for WebSocket to connect before switching to the HTTP protocol. If set to 0 then the timeout of the web browser’s WebSocket implementation will be used; this is often quite lengthy (minutes).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">websocket-log-level</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;"><p>Controls logging of WebSocket diagnostics. These are for troubleshooting only, and will appear in the RStudio R Console pane while enabled.</p>
<ul>
<li>0 = no WebSocket logging</li>
<li>1 = log WebSocket errors</li>
<li>2 = log WebSocket activity</li>
<li>3 = log WebSocket errors and activity</li>
</ul></td>
</tr>
<tr class="even">
<td style="text-align: left;">websocket-handshake-timeout</td>
<td style="text-align: left;">5000</td>
<td style="text-align: left;">How long the server waits (in milliseconds) for WebSocket handshake to complete when connecting and disconnecting. Set to 0 to disable.</td>
</tr>
</tbody>
</table>
<p>For example, this would double the number of keep-alive packets sent, wait longer before switching to HTTP, log information on WebSocket errors, and increase the handshake timeout to 15 seconds.</p>
<pre><code>websocket-ping-seconds=5
websocket-connect-timeout=10
websocket-log-level=1
websocket-handshake-timeout=15000</code></pre>
<p>For more background on the terminal feature, see this <a href="https://support.rstudio.com/hc/en-us/articles/115010737148-Using-the-RStudio-Terminal">support article</a>.</p>
</section>
</section>
<section id="customizing-session-settings" class="level2">
<h2 class="anchored" data-anchor-id="customizing-session-settings">Customizing Session Settings</h2>
<p>All of the session settings file locations described in this section conform to the <a href="https://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html">XDG Base Directory Specification</a>. They are configurable using environment variables:</p>
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 30%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Scope</th>
<th style="text-align: left;">Default</th>
<th style="text-align: left;">Environment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">User</td>
<td style="text-align: left;"><code>~/.config/rstudio</code></td>
<td style="text-align: left;"><code>XDG_CONFIG_HOME</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">System</td>
<td style="text-align: left;"><code>/etc/rstudio</code></td>
<td style="text-align: left;"><code>XDG_CONFIG_DIRS</code></td>
</tr>
</tbody>
</table>
<p>In accordance with the <em>Base Directory Specification</em>, the environment variables specify the location of the <code>rstudio</code> folder. For example, to store system-wide preference configuration in <code>/var/config/rstudio/rstudio-prefs.json</code>, you would set the <code>XDG_CONFIG_DIRS</code> variable to the value <code>/var/config</code>.</p>
<p>If specified, the RStudio variables take precedence over the XDG variables. These variables specify a specific directory (not a base directory). For example, to store system-wide preferences in <code>/var/config/settings/rstudio-prefs.json</code>, you would set the <code>RSTUDIO_CONFIG_DIR</code> variable to the value <code>/var/config/settings</code>.</p>
<p>The examples in this section presume you’re setting system-wide settings in <code>/etc/rstudio</code>; in each case it’s also possible to use a different folder by changing environment variables as described above, or to apply the settings to individual user accounts by changing files in <code>~/.config/rstudio</code>.</p>
<section id="user-preferences" class="level3">
<h3 class="anchored" data-anchor-id="user-preferences">User Preferences</h3>
<p>User preferences set in the RStudio IDE’s <em>Global Options</em> dialog can also be set in the JSON file <code>rstudio-prefs.json</code>, located in the settings directory described above.</p>
<section id="schema" class="level4">
<h4 class="anchored" data-anchor-id="schema">Schema</h4>
<p>The schema for the JSON file can be found at:</p>
<pre><code>/usr/lib/rstudio-server/resources/schema/user-prefs-schema.json</code></pre>
<p>It documents all of the preferences, shows data types and allowable values, and briefly explains the usage of each. You can see a summary of this information in the [Session User Settings] appendix.</p>
</section>
<section id="example" class="level4">
<h4 class="anchored" data-anchor-id="example">Example</h4>
<p>By default, RStudio Workbench only shows the home page (session overview) to users who have multiple sessions running. If you’d like it to be shown to all users regardless of the number of running sessions, set it in the global user preferences file as follows:</p>
<p><em>/etc/rstudio/rstudio-prefs.json</em></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"show_user_home_page"</span><span class="fu">:</span> <span class="st">"always"</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="snippets" class="level3">
<h3 class="anchored" data-anchor-id="snippets">Snippets</h3>
<p>You can install global snippets files for all users in the <code>/etc/rstudio/snippets</code> folder. For example, if you’d like to create a snippet <code>lib</code> for an R library call:</p>
<p><em>/etc/rstudio/snippets/r.snippets</em></p>
<pre><code>snippet lib
    library(${1:package})</code></pre>
<p>You can also define snippets for CSS files in the file <code>css.snippets</code>, and so on. You can find documentation on the snippet file format in the <a href="https://cloud9-sdk.readme.io/docs/snippets">Cloud 9 IDE snippet documentation</a>.</p>
<p>Note that RStudio will not merge snippet files, which implies the following:</p>
<ul>
<li>If you define your own snippets (for a given file type), they will replace those that ship with RStudio (for that same file type).</li>
<li>If users define their own snippets (for a given file type), changes to the system snippet file (for that same file type) won’t have any effect on those users.</li>
</ul>
</section>
<section id="default-document-templates" class="level3">
<h3 class="anchored" data-anchor-id="default-document-templates">Default Document Templates</h3>
<p>RStudio typically opens new documents with completely blank contents. You can, however, define the contents of the blank document by creating a file named <code>default.X</code> in <code>/etc/rstudio/templates</code>, where <code>X</code> is the file extension you wish to customize. For example, to start all R scripts with a standard comment header users can fill out, you could use the following:</p>
<p><em>/etc/rstudio/templates/default.R</em></p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Script:</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Author:</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Purpose:</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Notes:</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Copyright(c) Corporation Name</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a><span class="co"># -------------------------------------</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There are also some special template files which ship with RStudio; these, too, are customizable. In <code>/etc/rstudio/templates</code>, you can customize the following:</p>
<table class="table">
<colgroup>
<col style="width: 22%">
<col style="width: 77%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">File</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>document.Rmd</code></td>
<td style="text-align: left;">The default R Markdown document file content (without YAML header)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>notebook.Rmd</code></td>
<td style="text-align: left;">The default R Notebook file content (without YAML header)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>presentation.Rmd</code></td>
<td style="text-align: left;">The default R Markdown presentation file content (without YAML header)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>shiny.Rmd</code></td>
<td style="text-align: left;">The default Shiny R Markdown file content (without YAML header)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>query.sql</code></td>
<td style="text-align: left;">The default SQL query</td>
</tr>
</tbody>
</table>
</section>
<section id="color-themes" class="level3">
<h3 class="anchored" data-anchor-id="color-themes">Color Themes</h3>
<p>You can define additional custom themes for RStudio by placing <code>.rstheme</code> files in the following directory:</p>
<pre><code>/etc/rstudio/themes</code></pre>
<p>The <code>.rstheme</code> file contains plain-text CSS with some special metadata. You can create one by importing an existing TextMate theme file, or by starting from scratch (using an existing theme file as a template). Run the R command <code>?rstudioapi::addTheme</code> for more help.</p>
</section>
<section id="fonts" class="level3">
<h3 class="anchored" data-anchor-id="fonts">Fonts</h3>
<p>RStudio’s code editor and R console use a fixed-width font. By default, only fonts that end users have installed locally can be selected. If you wish to make additional fixed-width fonts available to your users, you can place them here:</p>
<pre><code>/etc/rstudio/fonts</code></pre>
<p>Fonts placed here will be automatically made available for selection in RStudio’s Appearances settings (Tools -&gt; Global Options -&gt; Appearance) for all users. It’s helpful to place the fonts preferred by your users here because it allows the font to be used in RStudio regardless of what fonts they have installed locally.</p>
<p>The following font formats are supported:</p>
<ul>
<li>Web Open Font Format (.woff, .woff2)</li>
<li>OpenType (.otf)</li>
<li>Embedded OpenType (.eot)</li>
<li>TrueType (.ttf)</li>
</ul>
<p>Only fixed-width fonts are supported by the RStudio IDE. Proportional fonts will still be installed, but if users select a proportional font, they will experience cursor positioning problems.</p>
<section id="naming-and-directory-structure" class="level4">
<h4 class="anchored" data-anchor-id="naming-and-directory-structure">Naming and Directory Structure</h4>
<p>The name of the file is presumed to be the name of the font. If you wish to give the font a custom name, you can place it in a directory with your name of choice. For example:</p>
<pre><code>+ fonts/
|
+-- Coding-Font.ttf
|
+-- Coding Font Two/
    |
    +-- CodingFont2-Regular.woff</code></pre>
<p>This directory structure would make two fonts available, <em>Coding-Font</em> and <em>Coding Font Two</em>.</p>
<p>Some fonts come in many different weights and styles. If you want these weights and styles to be treated as single font, you can place them underneath a single folder. This is useful when a theme uses bold or italic variants of a font to decorate code (e.g., to set comments in italics).</p>
<p>To do this, create subfolders with the font’s weight or style as the folder’s name. For example, this creates a single font, “Coding Font 3”, which has two weights (400 and 700 for regular and bold, respectively) and an italic style for each weight.</p>
<pre><code>+ fonts/
|
+-- Coding Font Three/
    |
    +-- 400/
    |   |
    |   +-- CodingFont3-Regular.woff
    |   |
    |   +-- italic/
    |       |
    |       +-- CodingFont3-Italic.woff
    |
    +-- 700/
        |
        +-- CodingFont3-Bold.woff
        |
        +-- italic/
            |
            +-- CodingFont3-BoldItalic.woff</code></pre>
</section>
<section id="autodetection" class="level4">
<h4 class="anchored" data-anchor-id="autodetection">Autodetection</h4>
<p>In addition to displaying a list of fonts installed on the server, RStudio attempts to automatically detect available fixed-width fonts that are installed on a user’s browser. For security reasons, it is not possible for RStudio to enumerate all the fonts on the user’s machine, so a known list of popular programming fixed-width fonts are checked for compatibility. This list is stored in the option <code>browser_fixed_width_fonts</code>.</p>
<p>If your users have a font they prefer but it can’t be installed on the server, you can cause RStudio to start scanning for it locally by including it in the set of <code>browser_fixed_width_fonts</code> in the global RStudio preferences file, <code>/etc/rstudio/rstudio-prefs.json</code>. See <a href="#user-preferences">User Preferences</a> for more information on setting global options.</p>
</section>
</section>
<section id="keybindings" class="level3">
<h3 class="anchored" data-anchor-id="keybindings">Keybindings</h3>
<p>RStudio keybindings can be globally defined using the following two files:</p>
<pre><code>/etc/rstudio/keybindings/editor_commands.json
/etc/rstudio/keybindings/rstudio_commands.json</code></pre>
<p>It isn’t necessary to hand-author these files; RStudio can generate them for you:</p>
<ol type="1">
<li>Remove the <code>~/.config/rstudio/keybindings/</code> folder</li>
<li>Start a new R session and customize the keyboard shortcuts as desired</li>
<li>Copy the new <code>.json</code> files from <code>~/.config/rstudio/keybindings</code> to <code>/etc/rstudio/keybindings</code> to make them active for all users on the server</li>
</ol>
</section>
<section id="spelling" class="level3">
<h3 class="anchored" data-anchor-id="spelling">Spelling</h3>
<p>You can define additional spelling dictionaries for RStudio by placing dictionary files in the following folders:</p>
<section id="languages" class="level4">
<h4 class="anchored" data-anchor-id="languages">Languages</h4>
<p>Define additional system languages by placing Hunspell <code>.aff</code> files in:</p>
<pre><code>/etc/rstudio/dictionaries/languages-system</code></pre>
</section>
<section id="dictionaries" class="level4">
<h4 class="anchored" data-anchor-id="dictionaries">Dictionaries</h4>
<p>Define additional custom dictionaries by placing Hunspell<code>.dic</code> files in:</p>
<pre><code>/etc/rstudio/dictionaries/custom</code></pre>
<!-- -->
</section>
</section>
</section>
</section>
</main>
<div class="page-navigation page-navigation-docked">
  <div class="nav-page nav-page-previous">
  </div>
  <div class="nav-page nav-page-next">
  </div>
</div>
</div> <!-- /main column -->
</div> <!-- /row -->
</div> <!-- /container fluid -->


</body></html>