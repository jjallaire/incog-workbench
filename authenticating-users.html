<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>RStudio Workbench Administration – authenticating-users</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007ba5; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #007ba5; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #007ba5; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>

  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script src="site_libs/quarto-nav/quarto-nav.js"></script>
  <script src="site_libs/quarto-nav/headroom.min.js"></script>
  <meta name="quarto:offset" content=".">
  <script src="site_libs/quarto-search/autocomplete.min.js"></script>
  <script src="site_libs/quarto-search/fuse.min.js"></script>
  <script src="site_libs/quarto-search/quarto-search.js"></script>
  <script src="site_libs/quarto-html/quarto.js"></script>
  <script src="site_libs/quarto-html/popper.min.js"></script>
  <script src="site_libs/quarto-html/tippy.umd.min.js"></script>
  <script src="site_libs/quarto-html/clipboard.min.js"></script>
  <script src="site_libs/quarto-html/anchor.min.js"></script>
  <script src="site_libs/quarto-html/quarto-html.js"></script>
  <link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
  <link href="site_libs/quarto-html/quarto-css-variables.css" rel="stylesheet">
  <script src="site_libs/bootstrap/bootstrap.min.js"></script>
  <link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
  <link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
  <!-- Google Analytics -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-20375833-3', 'auto', {'allowLinker': true});
  ga('require', 'linker');
  ga('linker:autoLink', ['rstudio.com', 'rstudio.github.io', 'rviews.rstudio.com', 'community.rstudio.com', 'rpubs.rstudio.com', 'environments.rstudio.com', 'rstudio.org', 'dailies.rstudio.com', 'pages.rstudio.com', 'db.rstudio.com', 'solutions.rstudio.com', 'docs.rstudio.com', 'spark.rstudio.com', 'shiny.rstudio.com', 'education.rstudio.com', 'rstudio.cloud', 'shinyapps.io', 'team-admin.rstudio.com', 'blog.rstudio.com', 'support.rstudio.com', 'blogs.rstudio.com', 'keras.rstudio.com', 'swag.rstudio.com', 'tensorflow.rstudio.com', 'packagemanager.rstudio.com'] );
  ga('send', 'pageview');
  </script>
  <!-- End Google Analytics -->
  <style type="text/css">
    .quarto-layout-panel > figure {
      width: 100%;
    }
    .quarto-layout-panel > figure > figcaption,
    .quarto-layout-panel > .panel-caption {
      margin-top: 10pt;
    }
    .quarto-layout-row {
      display: flex;
      align-items: flex-start;
    }
    .quarto-layout-valign-top {
      align-items: flex-start;
    }
    .quarto-layout-valign-bottom {
      align-items: flex-end;
    }
    .quarto-layout-valign-center {
      align-items: center;
    }
    .quarto-layout-cell {
      position: relative;
      margin-right: 20px;
    }
    .quarto-layout-cell:last-child {
      margin-right: 0;
    }
    .quarto-layout-cell figure,
    .quarto-layout-cell > p {
      margin: 0.2em;
    }
    .quarto-layout-cell img {
      max-width: 100%;
    }
    .quarto-layout-cell .html-widget {
      width: 100% !important;
    }
    .quarto-layout-cell div figure p {
      margin: 0;
    }
    .quarto-layout-cell figure {
      display: inline-block;
      margin-inline-start: 0;
      margin-inline-end: 0;
    }
    .quarto-layout-cell table {
       display: inline-table;
    }
    .quarto-layout-cell-subref figcaption {
      text-align: center;
      font-style: italic;
    }
    .quarto-figure {
      position: relative;
    }
    .quarto-figure > figure {
      width: 100%;
    }
    .quarto-figure-left > figure > p {
     text-align: left;
    }
    .quarto-figure-center > figure > p {
      text-align: center;
    }
    .quarto-figure-right > figure > p {
      text-align: right;
    }
    figure > p:empty {
      display: none;
    }
    figure > p:first-child {
      margin-top: 0;
      margin-bottom: 0;
    }
    figure > figcaption {
      margin-top: 0.5em;
    }
  </style>
  <style type="text/css">
    details {
      margin-bottom: 1em;
    } 
    details[show] {
      margin-bottom: 0;
    }

    .quarto-unresolved-ref {
      font-weight: 600;
    }

    .quarto-cover-image {
      max-width: 35%;
      float: right;
      margin-left: 30px;
    }

    .cell-output-display {
      overflow-x: auto;
    }

    .hidden {
      display: none;
    }
  </style>
  <link rel="stylesheet" href="styles/guide.css">
</head>
<body>
<div id="quarto-search-results"></div>
<header id="quarto-header" class="headroom fixed-top">
<nav class="quarto-secondary-nav py-2 d-lg-none d-md-block " data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <div class="container-fluid d-flex justify-content-between">
    <h1 class="quarto-secondary-nav-title mb-0 fs-3 d-inline"></h1>
    <button type="button" class="quarto-btn-toggle btn d-lg-none py-0 px-1 d-inline-block border-0 ">
      <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</nav>
</header>
 <!-- /navbar/sidebar -->
<div class="container-fluid quarto-container d-flex flex-column page-layout-article">
<div class="row flex-fill" id="quarto-content">
  <div id="quarto-sidebar" class="col col-12 col-lg-3 d-lg-flex px-0 pt-0 sidebar collapse sidebar-navigation">
    <nav class="me-lg-auto py-2 docked  overflow-scroll">
  <div class="px-3 pt-lg-2 mt-1 text-left">
    <img src="./images/logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
  </div>
    <div class="d-flex px-3 mt-2 flex-shrink-0 align-items-center">
      <div class="sidebar-search">
      <form class="d-flex mb-0">
  <input id="quarto-search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>
      </div>
    </div>
  <div class="sidebar-menu-container"> 
  <ul class="list-unstyled mt-3 px-3">
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./index_splits/index.sub_00.html" class="">Getting Started</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#gettingstarted-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="gettingstarted-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_01.html" class="">Introduction</a>
</li>
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_02.html" class="">Installation</a>
</li>
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_03.html" class="">Management Script</a>
</li>
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_04.html" class="">Activation</a>
</li>
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_05.html" class="">Accessing the Server</a>
</li>
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_06.html" class="">Community Resources</a>
</li>
          <li class="sidebar-item">
  <a href="./index_splits/index.sub_07.html" class="">Professional Support</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./server-management_splits/server-management.sub_00.html" class="">Server Management</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#servermanagement-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="servermanagement-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./server-management_splits/server-management.sub_01.html" class="">Core Administrative Tasks</a>
</li>
          <li class="sidebar-item">
  <a href="./server-management_splits/server-management.sub_02.html" class="">Logging</a>
</li>
          <li class="sidebar-item">
  <a href="./server-management_splits/server-management.sub_03.html" class="">Administrative Dashboard</a>
</li>
          <li class="sidebar-item">
  <a href="./server-management_splits/server-management.sub_04.html" class="">Automated Crash Reporting</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./authenticating-users_splits/authenticating-users.sub_00.html" class="">Authenticating Users</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#authenticatingusers-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="authenticatingusers-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_01.html" class="">User Provisioning</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_02.html" class="">PAM Basics</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_03.html" class="">Authentication Migration</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_04.html" class="">PAM Authentication</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_05.html" class="">Restricting Access to Specific Users</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_06.html" class="">SAML Single Sign-On Authentication</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_07.html" class="">OpenID Connect Authentication</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_08.html" class="">Proxied Authentication</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_09.html" class="">Google Accounts (deprecated)</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_10.html" class="">Customizing the Sign-In Page</a>
</li>
          <li class="sidebar-item">
  <a href="./authenticating-users_splits/authenticating-users.sub_11.html" class="">Authorization Timeout</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./access-and-security_splits/access-and-security.sub_00.html" class="">Access and Security</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#accessandsecurity-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="accessandsecurity-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_01.html" class="">Network Port and Address</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_02.html" class="">IP Access Rules</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_03.html" class="">Frame Origin</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_04.html" class="">Same Site cookies</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_05.html" class="">Compatibility with Safari 13+</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_06.html" class="">Additional Security Considerations</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_07.html" class="">Additional Headers</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_08.html" class="">Secure Sockets (SSL)</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_09.html" class="">SSL Ports</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_10.html" class="">Cookies</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_11.html" class="">Server Permissions</a>
</li>
          <li class="sidebar-item">
  <a href="./access-and-security_splits/access-and-security.sub_12.html" class="">Running with a Proxy</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./r-sessions_splits/r-sessions.sub_00.html" class="">R Sessions</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#rsessions-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="rsessions-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_01.html" class="">R Executable and Libraries</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_02.html" class="">Session Startup Scripts</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_03.html" class="">User and Group Profiles</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_04.html" class="">Multiple R Sessions</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_05.html" class="">PAM Sessions</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_06.html" class="">Kerberos</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_07.html" class="">Directory Management</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_08.html" class="">Workspace Management</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_09.html" class="">First Project Template</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_10.html" class="">Project Sharing</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_11.html" class="">Package Installation</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_12.html" class="">Feature Limits</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_13.html" class="">Notifications</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_14.html" class="">RStudio Connect Server</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_15.html" class="">Terminal WebSockets</a>
</li>
          <li class="sidebar-item">
  <a href="./r-sessions_splits/r-sessions.sub_16.html" class="">Customizing Session Settings</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./r-versions-1_splits/r-versions-1.sub_00.html" class="">R Versions</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#rversions-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="rversions-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./r-versions-1_splits/r-versions-1.sub_01.html" class="">Overview</a>
</li>
          <li class="sidebar-item">
  <a href="./r-versions-1_splits/r-versions-1.sub_02.html" class="">Installing R</a>
</li>
          <li class="sidebar-item">
  <a href="./r-versions-1_splits/r-versions-1.sub_03.html" class="">Configuring the Default Version of R</a>
</li>
          <li class="sidebar-item">
  <a href="./r-versions-1_splits/r-versions-1.sub_04.html" class="">Using Multiple Versions of R Concurrently</a>
</li>
          <li class="sidebar-item">
  <a href="./r-versions-1_splits/r-versions-1.sub_05.html" class="">Managing Upgrades of R</a>
</li>
          <li class="sidebar-item">
  <a href="./r-versions-1_splits/r-versions-1.sub_06.html" class="">Session Initialization</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./load-balancing_splits/load-balancing.sub_00.html" class="">Load Balancing</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#loadbalancing-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="loadbalancing-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./load-balancing_splits/load-balancing.sub_01.html" class="">Overview</a>
</li>
          <li class="sidebar-item">
  <a href="./load-balancing_splits/load-balancing.sub_02.html" class="">Load Balancing vs. Job Launcher</a>
</li>
          <li class="sidebar-item">
  <a href="./load-balancing_splits/load-balancing.sub_03.html" class="">Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./load-balancing_splits/load-balancing.sub_04.html" class="">Access and Availability</a>
</li>
          <li class="sidebar-item">
  <a href="./load-balancing_splits/load-balancing.sub_05.html" class="">Balancing Methods</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./auditing-and-monitoring_splits/auditing-and-monitoring.sub_00.html" class="">Auditing and Monitoring</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#auditingandmonitoring-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="auditingandmonitoring-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./auditing-and-monitoring_splits/auditing-and-monitoring.sub_01.html" class="">Auditing Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./auditing-and-monitoring_splits/auditing-and-monitoring.sub_02.html" class="">Monitoring Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./auditing-and-monitoring_splits/auditing-and-monitoring.sub_03.html" class="">Server Health Checks</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./license-management_splits/license-management.sub_00.html" class="">License Management</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#licensemanagement-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="licensemanagement-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./license-management_splits/license-management.sub_01.html" class="">Product Activation</a>
</li>
          <li class="sidebar-item">
  <a href="./license-management_splits/license-management.sub_02.html" class="">License Details</a>
</li>
          <li class="sidebar-item">
  <a href="./license-management_splits/license-management.sub_03.html" class="">Connectivity Requirements</a>
</li>
          <li class="sidebar-item">
  <a href="./license-management_splits/license-management.sub_04.html" class="">Evaluations</a>
</li>
          <li class="sidebar-item">
  <a href="./license-management_splits/license-management.sub_05.html" class="">Floating Licensing</a>
</li>
          <li class="sidebar-item">
  <a href="./license-management_splits/license-management.sub_06.html" class="">Userspace Licensing</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./data-connectivity_splits/data-connectivity.sub_00.html" class="">Data Connectivity</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#dataconnectivity-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="dataconnectivity-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./data-connectivity_splits/data-connectivity.sub_01.html" class="">Connectivity using ODBC</a>
</li>
          <li class="sidebar-item">
  <a href="./data-connectivity_splits/data-connectivity.sub_02.html" class="">Connectivity using R Packages</a>
</li>
          <li class="sidebar-item">
  <a href="./data-connectivity_splits/data-connectivity.sub_03.html" class="">Snippet Files</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./job-launcher_splits/job-launcher.sub_00.html" class="">Job Launcher</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#joblauncher-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="joblauncher-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./job-launcher_splits/job-launcher.sub_01.html" class="">Overview</a>
</li>
          <li class="sidebar-item">
  <a href="./job-launcher_splits/job-launcher.sub_02.html" class="">Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./job-launcher_splits/job-launcher.sub_03.html" class="">Running the Launcher</a>
</li>
          <li class="sidebar-item">
  <a href="./job-launcher_splits/job-launcher.sub_04.html" class="">Load Balancing</a>
</li>
          <li class="sidebar-item">
  <a href="./job-launcher_splits/job-launcher.sub_05.html" class="">Creating plugins</a>
</li>
          <li class="sidebar-item">
  <a href="./job-launcher_splits/job-launcher.sub_06.html" class="">Troubleshooting</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./tutorial-api_splits/tutorial-api.sub_00.html" class="">Tutorial API</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#tutorialapi-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="tutorialapi-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./tutorial-api_splits/tutorial-api.sub_01.html" class="">Overview</a>
</li>
          <li class="sidebar-item">
  <a href="./tutorial-api_splits/tutorial-api.sub_02.html" class="">Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./tutorial-api_splits/tutorial-api.sub_03.html" class="">Interface</a>
</li>
          <li class="sidebar-item">
  <a href="./tutorial-api_splits/tutorial-api.sub_04.html" class="">Tutorial API Methods</a>
</li>
          <li class="sidebar-item">
  <a href="./tutorial-api_splits/tutorial-api.sub_05.html" class="">Tutorial API Callbacks</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./jupyter-sessions_splits/jupyter-sessions.sub_00.html" class="">Jupyter Sessions</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#jupytersessions-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="jupytersessions-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./jupyter-sessions_splits/jupyter-sessions.sub_01.html" class="">Overview</a>
</li>
          <li class="sidebar-item">
  <a href="./jupyter-sessions_splits/jupyter-sessions.sub_02.html" class="">Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./jupyter-sessions_splits/jupyter-sessions.sub_03.html" class="">Troubleshooting</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./vscode-sessions-preview_splits/vscode-sessions-preview.sub_00.html" class="">VS Code Sessions</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#vscodesessions-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="vscodesessions-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./vscode-sessions-preview_splits/vscode-sessions-preview.sub_01.html" class="">Overview</a>
</li>
          <li class="sidebar-item">
  <a href="./vscode-sessions-preview_splits/vscode-sessions-preview.sub_02.html" class="">Installation</a>
</li>
          <li class="sidebar-item">
  <a href="./vscode-sessions-preview_splits/vscode-sessions-preview.sub_03.html" class="">Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./vscode-sessions-preview_splits/vscode-sessions-preview.sub_04.html" class="">Multiple Sessions</a>
</li>
          <li class="sidebar-item">
  <a href="./vscode-sessions-preview_splits/vscode-sessions-preview.sub_05.html" class="">Troubleshooting</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./database_splits/database.sub_00.html" class="">Database</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#database-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="database-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./database_splits/database.sub_01.html" class="">Configuration</a>
</li>
          <li class="sidebar-item">
  <a href="./database_splits/database.sub_02.html" class="">Migration</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./hardening_splits/hardening.sub_00.html" class="">Hardening</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#hardening-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="hardening-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./hardening_splits/hardening.sub_01.html" class="">Set up SSL</a>
</li>
          <li class="sidebar-item">
  <a href="./hardening_splits/hardening.sub_02.html" class="">Browser Security</a>
</li>
          <li class="sidebar-item">
  <a href="./hardening_splits/hardening.sub_03.html" class="">R Session Security</a>
</li>
          <li class="sidebar-item">
  <a href="./hardening_splits/hardening.sub_04.html" class="">Other</a>
</li>
          <li class="sidebar-item">
  <a href="./hardening_splits/hardening.sub_05.html" class="">Example Secure Configuration</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
      <li class="sidebar-item">
  <a href="./session-user-settings_splits/session-user-settings.sub_00.html" class="">Session User Settings</a>
</li>
      <li class="sidebar-item">
  <a href="./rstudio-ide-commands_splits/rstudio-ide-commands.sub_00.html" class="">R Studio IDE Commands</a>
</li>
      <li class="sidebar-item">
  <a href="./r-package-dependencies_splits/r-package-dependencies.sub_00.html" class="">R Package Dependencies</a>
</li>
      <ul class="list-unstyled sidebar-section depth1">
    <li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./rstudio-server-configuration_splits/rstudio-server-configuration.sub_00.html" class="">R Studio Configuration</a>
            </div>
            <a class="text-start  " data-bs-toggle="collapse" data-bs-target="#rstudioconfiguration-collapse" aria-expanded="true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </a>
            </div>
        </div>
      <div class="collapse  show" id="rstudioconfiguration-collapse">
        <ul class="list-unstyled sidebar-item-contents">
          <li class="sidebar-item">
  <a href="./rstudio-server-configuration_splits/rstudio-server-configuration.sub_01.html" class="">rserver.conf</a>
</li>
          <li class="sidebar-item">
  <a href="./rstudio-server-configuration_splits/rstudio-server-configuration.sub_02.html" class="">rsession.conf</a>
</li>
        </ul>
      </div>
    </li>
  </ul>
  </ul>
  </div>
</nav>
  </div>
  <div class="col mx-auto col-sm-12 col-md-11 col-lg-9 px-lg-4">
<main>
<section id="authenticating-users" class="level1">
<h1>Authenticating Users</h1>
<p><strong>R users require local system accounts regardless of what RStudio authentication method you use.</strong> You must set up local system accounts manually or programmatically and then map authenticating users to these accounts.</p>
<p>For user identification, authentication, and authorization using local system accounts, RStudio relies heavily on Linux <a href="http://en.wikipedia.org/wiki/Pluggable_authentication_module">Pluggable Authentication Module (PAM)</a>. PAM can be used by itself to authenticate users or along with other external authentication mechanisms (e.g., Web Single Sign-On) to authorize existing local system accounts.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>Not all RStudio products require local system accounts or PAM. For example, RStudio Connect and Shiny Server rely on their own authentication engines and on a single system account for doing their work in most cases, not requiring individualized development environments like the ones offered by RStudio Workbench.</em></p>
</div>
</div>
<p>Here are the various authentication mechanisms supported by RStudio:</p>
<table class="table">
<colgroup>
<col style="width: 38%">
<col style="width: 61%">
</colgroup>
<thead>
<tr class="header">
<th>Authentication</th>
<th>RStudio Configuration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Local Accounts</td>
<td><a href="#pam-authentication">PAM Authentication</a> (via <code>pam_unix</code>)</td>
</tr>
<tr class="even">
<td>LDAP or Active Directory</td>
<td><a href="#pam-authentication">PAM Authentication</a> (via <code>pam_sss</code> or <code>pam_ldap</code> in older systems)</td>
</tr>
<tr class="odd">
<td>Kerberos</td>
<td><a href="#pam-authentication">PAM Authentication</a> (via <code>pam_sss</code> or <code>pam_krb5</code> in older systems)</td>
</tr>
<tr class="even">
<td>Web Single Sign-On (SSO)</td>
<td><a href="#saml-single-sign-on-authentication">SAML Single Sign-On Authentication</a> or <a href="#openid-connect-authentication">OpenID Connect Authentication</a></td>
</tr>
<tr class="odd">
<td>Others (client-server, e.g., RADIUS)</td>
<td>As supported by various <a href="http://www.linux-pam.org/Linux-PAM-html/Linux-PAM_SAG.html">PAM modules</a></td>
</tr>
<tr class="even">
<td>Others (browser-based, e.g., Kerberos <a href="https://en.wikipedia.org/wiki/SPNEGO">SPNEGO</a> SSO)</td>
<td><a href="#proxied-authentication">Proxied Authentication</a></td>
</tr>
</tbody>
</table>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>SAML, OpenID, and Proxied authentication still require [PAM Sessions] to automatically create local system accounts. Without it, local system accounts have to be provisioned manually one-by-one.</p>
</div>
</div>
<section id="user-provisioning" class="level2">
<h2 class="anchored" data-anchor-id="user-provisioning">User Provisioning</h2>
<p>It is a common practice in Linux environments to configure <a href="https://sssd.io/"><code>sssd</code></a> to fetch users and groups from an LDAP or Active Directory server to automate the creation (provisioning) of local system accounts.</p>
<p>In addition to user creation, <code>sssd</code> can also be configured to authenticate or authorize users via PAM using the <code>pam_sss</code> module.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://en.wikipedia.org/wiki/Name_Service_Switch"><code>nss</code></a> is an older alternative to <code>sssd</code> that also has LDAP synchronization capabilities. However, differently from <code>sssd</code>, it offers no support for authentication.</p>
</div>
</div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>When a user has an active session in RStudio, changes to his or her local account name (username) or <code>uid</code> are not supported and it can lead to unexpected behaviors in RStudio.</p>
</div>
</div>
</section>
<section id="pam-basics" class="level2">
<h2 class="anchored" data-anchor-id="pam-basics">PAM Basics</h2>
<p>Local system accounts used by PAM must follow the system conventions for usernames. For example, usernames are case-sensitive.</p>
<p>PAM profiles are are located in the <code>/etc/pam.d</code> directory. Each application can have their own profile, and there is also a default profile used for applications without one (the default profile is handled differently depending on which version of Linux you are running).</p>
<p>To learn more about PAM and the many options and modules available for it see the following:</p>
<ul>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system-level_authentication_guide/pluggable_authentication_modules">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system-level_authentication_guide/pluggable_authentication_modules</a></li>
<li><a href="http://tldp.org/HOWTO/User-Authentication-HOWTO/x115.html">http://tldp.org/HOWTO/User-Authentication-HOWTO/x115.html</a></li>
<li><a href="http://linux.die.net/man/8/pam">http://linux.die.net/man/8/pam</a></li>
</ul>
<section id="pam-provisioning" class="level3">
<h3 class="anchored" data-anchor-id="pam-provisioning">PAM &amp; Provisioning</h3>
<p>PAM recommendations for user provisioning:</p>
<ul>
<li>If you are using PAM authentication to connect to an external authentication provider, you can use a PAM module like <a href="https://linux.die.net/man/8/pam_mkhomedir"><code>pam_mkhomedir</code></a> to automatically create the users’ home directories on login.</li>
<li>User provisioning requires PAM sessions to be used is most cases. See the [PAM Sessions] section for details on how RStudio can be configured to use those.</li>
<li>If you are using SAML, OpenID or Proxied authentication and local system accounts are automatically created by <code>sssd</code>, a PAM configuration with the module <a href="https://linux.die.net/man/8/pam_rootok"><code>pam_rootok</code></a> must be used, since PAM sessions will be started by RStudio using <code>root</code> in the behalf of the actual user.</li>
</ul>
</section>
</section>
<section id="authentication-migration" class="level2">
<h2 class="anchored" data-anchor-id="authentication-migration">Authentication Migration</h2>
<p>It is possible to migrate between the supported authentication mechanisms.</p>
<section id="migrating-from-pam" class="level3">
<h3 class="anchored" data-anchor-id="migrating-from-pam">Migrating from PAM</h3>
<p>Your local system accounts currently used with PAM can be used for Single Sing-On (SSO) authentication with SAML or OpenID. Ensure that:</p>
<ul>
<li>The existing PAM configuration is configured for <a href="#pam-provisioning">PAM &amp; Provisioning</a>, as suggested above.</li>
<li>RStudio is configured with [PAM Sessions] if your local system accounts are maintained by <code>sssd</code>.</li>
<li>RStudio is configured with the appropriate SSO authentication mechanism.</li>
<li>The configured SAML attribute or OpenID claim for username from your Identity Management system matches the names of your <strong>existing</strong> local system accounts.</li>
</ul>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>If PAM was used with Kerberos, please note that the credential forwarding functionality offered by Kerberos is only possible with PAM and it cannot be leveraged directly by RStudio when using SSO.</p>
</div>
</div>
</section>
<section id="migrating-to-pam" class="level3">
<h3 class="anchored" data-anchor-id="migrating-to-pam">Migrating to PAM</h3>
<p>Since all other authentication methods already leverage PAM in some degree, there’s no actual migration to PAM. You should only make sure PAM is configured for authenticating the existing users and configure RStudio to use PAM.</p>
</section>
<section id="migrating-from-proxied-authentication" class="level3">
<h3 class="anchored" data-anchor-id="migrating-from-proxied-authentication">Migrating from Proxied authentication</h3>
<p>Your local system accounts currently used with Proxied authentication can be used for Single Sing-On (SSO) authentication with SAML or OpenID. Ensure that:</p>
<ul>
<li>If RStudio is placed under a different path by the proxy (e.g., <code>example.com/rstudio</code>), be sure to check the “Proxy Considerations” sections under <a href="#saml-single-sign-on-authentication">SAML Single Sign-On Authentication</a> or <a href="#openid-connect-authentication">OpenID Connect Authentication</a> for additional options your proxy or RStudio configuration may need.</li>
<li>RStudio is configured with the appropriate SSO authentication mechanism.</li>
<li>The configured SAML attribute or OpenID claim for username match the names of your <strong>existing</strong> local system accounts as they were sent by the proxy in the HTTP header for username.</li>
</ul>
</section>
<section id="migrating-to-proxied-authentication" class="level3">
<h3 class="anchored" data-anchor-id="migrating-to-proxied-authentication">Migrating to Proxied authentication</h3>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This migration is not recommended unless none of the other existing authentication mechanisms are sufficient for your organization’s needs.</p>
</div>
</div>
<p>If <a href="#migrating-from-pam">Migrating from PAM</a>, you can follow the same recommendations listed above for SSO, noting that the HTTP header for username must match existing accounts. If migrating from SAML or OpenID, the same observation on the HTTP header for username applies.</p>
</section>
<section id="migrating-from-google-accounts" class="level3">
<h3 class="anchored" data-anchor-id="migrating-from-google-accounts">Migrating from Google accounts</h3>
<p>Migrating from Google accounts is similar to <a href="#migrating-from-pam">Migrating from PAM</a> to SSO, or <a href="#migrating-to-pam">Migrating to PAM</a>.</p>
<p><strong>Google accounts have been deprecated and we strongly recommend against migrating to this authentication.</strong></p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you are currently using Google accounts for authentication, the migration from Google accounts to OpenID using Google itself as the OpenID provider is not yet supported. We recommend to keep using Google accounts or migrating to some other <strong>non-Google</strong> SSO authentication.</p>
</div>
</div>
</section>
</section>
<section id="pam-authentication" class="level2">
<h2 class="anchored" data-anchor-id="pam-authentication">PAM Authentication</h2>
<p>By default, RStudio authenticates users via the Linux standard PAM API. PAM itself is typically configured by default to authenticate against the system user database (<code>/etc/passwd</code>) however it can also be configured to authenticate against a wide variety of other systems including Active Directory, LDAP, and Kerberos.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>PAM can be used for both authentication as well as to tailor the environment for users with [PAM sessions]. This section only describes PAM for the purposes of authentication</p>
</div>
</div>
<section id="default-pam-configuration" class="level3">
<h3 class="anchored" data-anchor-id="default-pam-configuration">Default PAM Configuration</h3>
<p><strong>Debian / Ubuntu</strong></p>
<p>On Debian and Ubuntu systems RStudio does not provide an RStudio specific PAM configuration file. As a result, RStudio uses the <code>/etc/pam.d/other</code> profile, which by default inherits from a set of common configuration files:</p>
<p><em>/etc/pam.d/other</em></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>  <span class="im">@include</span> common-auth</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  @include common-account</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  @include common-password</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  @include common-session</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If the <code>/etc/pam.d/other</code> profile reflects the authentication system and policies that you’d like RStudio to use then no further configuration is required. If you want to create a custom PAM profile for RStudio you would create a file named <code>/etc/pam.d/rstudio</code> and specify whatever settings are appropriate.</p>
<p><strong>RedHat / CentOS / SUSE</strong></p>
<p>On RedHat, CentOS and SUSE systems applications without their own PAM profiles are denied access by default. Therefore to ensure that RStudio is running and available after installation a default PAM profile is installed at <code>/etc/pam.d/rstudio</code>. This profile is configured to require a user-id greater than 500 and to authenticate users against local system accounts:</p>
<p><em>/etc/pam.d/rstudio</em></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">auth</span>      requisite      pam_succeed_if.so uid <span class="op">&gt;</span>= 500 quiet</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">auth</span>      required       pam_unix.so nodelay</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">account</span>   required       pam_unix.so</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This default PAM profile may not reflect the authentication behavior that you want for RStudio. In that case, some customization may be required. If you’ve already set up another PAM profile (e.g.&nbsp;<code>/etc/pam.d/login</code>) with the desired behavior then it may be enough to simply copy that profile over the RStudio one. For example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo cp /etc/pam.d/login /etc/pam.d/rstudio</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="diagnosing-pam-authentication-problems" class="level3">
<h3 class="anchored" data-anchor-id="diagnosing-pam-authentication-problems">Diagnosing PAM Authentication Problems</h3>
<p>If you are unable to log into RStudio there may be an underlying problem with the PAM configuration. The best way to diagnose PAM configuration problems is to use the <code>pamtester</code> utility (which is bundled with RStudio). Using <code>pamtester</code> enables you to test authentication in an isolated environment as well as to see much more detailed diagnostics.</p>
<p>The <code>pamtester</code> utility is located at <code>/usr/lib/rstudio-server/bin/pamtester</code>. To invoke it you pass several arguments indicating the PAM profile to test, the user to test for, and whether you want verbose output. For example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> /usr/lib/rstudio-server/bin/pamtester <span class="at">--verbose</span> rstudio <span class="op">&lt;</span>username<span class="op">&gt;</span> authenticate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can find more detailed documentation on using <code>pamtester</code> here: <a href="http://linux.die.net/man/1/pamtester">http://linux.die.net/man/1/pamtester</a>.</p>
<p>Additionally, RStudio expects the PAM password prompt text when logging in to be <code>Password:</code>. If you use a nonstandard password prompt, you must disable strict prompt matching by modifying <code>/etc/rstudio/rserver.conf</code> like so:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>auth<span class="sc">-</span>pam<span class="sc">-</span>require<span class="sc">-</span>password<span class="sc">-</span>prompt<span class="ot">=</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="restricting-access-to-specific-users" class="level2">
<h2 class="anchored" data-anchor-id="restricting-access-to-specific-users">Restricting Access to Specific Users</h2>
<section id="minimum-user-id" class="level3">
<h3 class="anchored" data-anchor-id="minimum-user-id">Minimum User Id</h3>
<p>By default RStudio only allows normal (as opposed to system) users to successfully authenticate. The minimum user id is determined by reading the <code>UID_MIN</code> value from the <code>/etc/login.defs</code> file. If the file doesn’t exist or <code>UID_MIN</code> isn’t defined within it then a default value of 1000 is used.</p>
<p>You change the minimum user id by specifying the <code>auth-minimum-user-id</code> option. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-minimum-user-id</span><span class="ot">=</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that it’s possible that your PAM configuration is also applying a constraint on user-ids (see the <a href="#default-pam-configuration">Default PAM Configuration</a> section above for an example). In this case you should ensure that the <code>auth-minimum-user-id</code> is consistent with the value specified in your PAM configuration.</p>
<p>If your users are using very large UIDs (above 1048575/0xFFFFF), it is <em>strongly</em> recommended to set the <code>auth-minimum-user-id</code> value to enable RStudio to make better assumptions when mapping user identifiers to projects.</p>
</section>
<section id="restricting-by-group" class="level3">
<h3 class="anchored" data-anchor-id="restricting-by-group">Restricting by Group</h3>
<p>You can specify that only users of certain groups are allowed to access RStudio. To do this you use the <code>auth-required-user-group</code> setting. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-required-user-group</span><span class="ot">=</span><span class="st">rstudio-users</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can specify a single group as the above example does or a comma-delimited list of groups. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-required-user-group</span><span class="ot">=</span><span class="st">analysts,admins,rstudio-users</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that this change will not take effect until the server is restarted.</p>
<section id="creating-and-managing-group-membership" class="level4">
<h4 class="anchored" data-anchor-id="creating-and-managing-group-membership">Creating and Managing Group Membership</h4>
<p>To create a new group you use the <code>groupadd</code> command:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo groupadd <span class="op">&lt;</span>groupname<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To add a user to an existing group you use the <code>usermod</code> command:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo usermod <span class="at">-a</span> <span class="at">-G</span> <span class="op">&lt;</span>groupname<span class="op">&gt;</span> <span class="op">&lt;</span>username<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that it’s critical that you include the <code>-a</code> flag as that indicates that the group should be added to the user rather than replace the user’s group list in it’s entirety.</p>
</section>
</section>
</section>
<section id="saml-single-sign-on-authentication" class="level2 pro-header">
<h2 class="pro-header anchored" data-anchor-id="saml-single-sign-on-authentication">SAML Single Sign-On Authentication</h2>
<p>RStudio Workbench can be configured to authenticate users via SAML. This enables users to log in with their existing Single Sign-On (SSO) credentials and to be automatically authenticated to RStudio whenever they are already logged into their Identity Provider (IdP) account.</p>
<section id="enabling-saml-sso" class="level3">
<h3 class="anchored" data-anchor-id="enabling-saml-sso">Enabling SAML SSO</h3>
<p>To enable authentication with SAML you add the <code>auth-saml</code> option to the RStudio configuration file:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Once you enable authentication with SAML that becomes the exclusive means of authentication (you can’t concurrently use both PAM and SAML authentication).</strong></p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>SAML authentication still requires [PAM Sessions] and <code>sssd</code> to automatically create local system accounts. Without them, local system accounts have to be provisioned manually one-by-one.</p>
</div>
</div>
</section>
<section id="configuring-saml" class="level3">
<h3 class="anchored" data-anchor-id="configuring-saml">Configuring SAML</h3>
<p>To use SAML authentication in RStudio you should configure the parts involved in this order:</p>
<ul>
<li><a href="#configuring-rstudio-as-a-service-provider">Configuring RStudio as a Service Provider</a></li>
<li><a href="#configuring-your-identity-provider-with-rstudio">Configuring your Identity Provider with RStudio</a></li>
</ul>
</section>
<section id="configuring-rstudio-as-a-service-provider" class="level3">
<h3 class="anchored" data-anchor-id="configuring-rstudio-as-a-service-provider">Configuring RStudio as a Service Provider</h3>
<p>RStudio Workbench needs to be configured in order to trust the SAML assertions sent by your IdP.</p>
<section id="identity-provider-metadata-setup" class="level4">
<h4 class="anchored" data-anchor-id="identity-provider-metadata-setup">Identity Provider Metadata Setup</h4>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>RStudio Workbench expects the IdP metadata to contain the service name (<code>EntityID</code>), the Single Sign-On (SSO) URL and the signing certificate.</p>
</div>
</div>
<p>The easiest way to configure RStudio Workbench is to point it to the IdP metadata URL. This can be done by adding the option <code>auth-saml-metadata-url</code>. This option automatically renews the metadata when it expires but it requires direct connectivity between your server and the IdP.</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-metadata-url</span><span class="ot">=</span><span class="st">https://idp.example.com/saml/metadata</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you want to avoid direct connectivity between your server and the IdP or if that setup is not possible you should use an offline setup. In this scenario, you should download the metadata from your IdP and upload it to your server. Then, add the option <code>auth-saml-metadata-path</code> pointing to the file location within your server. This option requires manual intervention if the metadata or the signing certificate expires.</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-metadata-path</span><span class="ot">=</span><span class="st">/path/to/saml/metadata.xml</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>The metadata URL option has precedence over the metadata file path option. You must remove the URL option first before using the file option.</p>
</div>
</div>
<p>If your Identity Provider requires information about RStudio in order to provide metadata, see the <a href="#manual-service-provider-setup">Manual Service Provider Setup</a> section below for a list of details you may need to provide about your RStudio Workbench server.</p>
</section>
<section id="manual-identity-provider-setup" class="level4">
<h4 class="anchored" data-anchor-id="manual-identity-provider-setup">Manual Identity Provider Setup</h4>
<p>If your IdP does not provide metadata or if the metadata has any problems, you should use a manual setup. The following required options must be added to your server configuration:</p>
<ul>
<li><code>auth-saml-idp-entity-id</code> - An URL to an HTTP(S) endpoint on the IdP, in general the location of its metadata. In very exceptional cases this may not be an URL.</li>
<li><code>auth-saml-idp-sso-url</code> - An URL to an HTTP(S) endpoint on the IdP to where your server will send authentication requests.</li>
<li><code>auth-saml-idp-sign-cert-path</code> - The path to a PEM file containing the public trust certificate for verifying the assertions’ signatures.</li>
</ul>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-idp-entity-id</span><span class="ot">=</span><span class="st">https://idp.example.com/saml/metadata</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-idp-sso-url</span><span class="ot">=</span><span class="st">https://idp.example.com/saml/sso</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-idp-sign-cert-path</span><span class="ot">=</span><span class="st">/path/to/saml.cert</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>The metadata URL and file path options have precedence over the individually configured options. You must remove the metadata options first before using individual settings.</p>
</div>
</div>
</section>
</section>
<section id="configuring-your-identity-provider-with-rstudio" class="level3">
<h3 class="anchored" data-anchor-id="configuring-your-identity-provider-with-rstudio">Configuring your Identity Provider with RStudio</h3>
<p>In order to use SAML with RStudio Workbench you also need to register your server with your IdP.</p>
<section id="saml-attributes" class="level4">
<h4 class="anchored" data-anchor-id="saml-attributes">SAML Attributes</h4>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Your IdP must return in the assertion at least one attribute (or <code>NameID</code>) matching the user’s local account username (lowercase).</p>
</div>
</div>
<p>By default, RStudio Workbench will look for an attribute called <code>Username</code> (case-sensitive). If you wish to use a different attribute or the assertion’s <code>NameID</code> value, add the option <code>auth-saml-sp-attribute-username</code> with the appropriate value.</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-sp-attribute-username</span><span class="ot">=</span><span class="st">NameID</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="preconfigured-setups" class="level4">
<h4 class="anchored" data-anchor-id="preconfigured-setups">Preconfigured Setups</h4>
<p>RStudio Workbench has preconfigured entries in Okta, OneLogin and Azure. In some cases, all you need to provide is the URL to your server. Please refer to the documentation on these vendors for more information.</p>
</section>
<section id="service-provider-metadata-setup" class="level4">
<h4 class="anchored" data-anchor-id="service-provider-metadata-setup">Service Provider Metadata Setup</h4>
<p>RStudio Workbench provides its own Service Provider (SP) SAML metadata at the <code>/saml/metadata</code> endpoint. For example, if your server is running at https://server.example.com, its metadata can be found at <code>https://server.example.com/saml/metadata</code>.</p>
<p>Your IdP may ask for the metadata URL or the metadata file. For the latter, you should download the metadata file and upload it to your IdP.</p>
</section>
<section id="manual-service-provider-setup" class="level4">
<h4 class="anchored" data-anchor-id="manual-service-provider-setup">Manual Service Provider Setup</h4>
<p>If your IdP requires a manual configuration, the basic information about your server is in the SAML metadata.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The SAML metadata primarily contains information about the service name (<code>EntityID</code>) and the assertion consumer service (ACS) URL.</p>
</div>
</div>
<p>If you cannot start RStudio configured with SAML because your IdP must be configured first, you may be asked the following information:</p>
<ul>
<li>RStudio Entity ID: This value is the same URL as the metadata endpoint used for <a href="#service-provider-metadata-setup">Service Provider Metadata Setup</a>. For example, https://server.example.com/saml/metadata</li>
<li>RStudio Assertion Consumer Service URL: RStudio expects SAML assertions at the <code>/saml/acs</code> endpoint. For example, https://server.example.com/saml/acs</li>
<li>If encryption is used, you will need to provide the encryption certificate used by RStudio, see <a href="#saml-encryption">SAML Encryption</a> below. RStudio supports most common forms of encryption used with SAML.</li>
<li>If your Identity Provider expects signed requests from RStudio, you will need to provide the signing certificate used by RStudio, see <a href="#saml-request-signing">SAML Request Signing</a> below. Any signing algorithm you choose in your IdP must match RStudio’s configuration.</li>
<li><a href="#saml-attributes">SAML Attributes</a> as mentioned above.</li>
<li>Also, information requested about <a href="#unsupported-saml-options">Unsupported SAML Options</a> in RStudio should be left blank.</li>
</ul>
</section>
</section>
<section id="advanced-options" class="level3">
<h3 class="anchored" data-anchor-id="advanced-options">Advanced Options</h3>
<p>Depending on your IdP capabilities you may need to add a few more options to your server:</p>
<ul>
<li><code>auth-saml-idp-post-binding</code> - By default RStudio Workbench will redirect to your IdP for authentication requests. With the value <code>1</code>, this option makes it use an HTTP POST instead. This option can also be used with a metadata file or URL if your IdP supports both redirect and POST.</li>
<li><code>auth-saml-sso-initiation</code> - By default RStudio Workbench will be able to initiate an authentication with SAML (SP-initiated) or to acceept an ad-hoc assertion (IdP-initiated). If you prefer just one of these flows, use this options with either <code>sp</code> or <code>idp</code> values. When set to <code>idp</code> users will be sent to the configured IdP SSO URL if a SP-initiated flow is attempted.</li>
<li><code>auth-saml-sp-name-id-format</code> - By default RStudio Workbench will accept any NameID Format. Add this options with the values <code>persistent</code>, <code>transient</code>, <code>emailaddress</code>, or <code>unspecified</code> to make RStudio Workbench request and expect a particular format from the IdP.</li>
</ul>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>auth-saml-sp-name-id-format=transient</code> and <code>auth-saml-sp-attribute-username=NameID</code> will not be accepted as a valid combination. It would lead to undetermined usernames in each attempt.</p>
</div>
</div>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-idp-post-binding</span><span class="ot">=</span><span class="dv">1</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-idp-sso-url</span><span class="ot">=</span><span class="st">https://idp.example.com/saml/sso</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-sso-initiation</span><span class="ot">=</span><span class="st">idp</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-idp-sso-url</span><span class="ot">=</span><span class="st">https://idp.example.com/login</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-sp-name-id-format</span><span class="ot">=</span><span class="st">persistent</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="saml-encryption" class="level3">
<h3 class="anchored" data-anchor-id="saml-encryption">SAML Encryption</h3>
<p>To enable support for encrypted SAML assertions, you will need a key pair in the form of a public certificate file and a private RSA key, both in PEM format.</p>
<p>The following options should be added to your server:</p>
<ul>
<li><code>auth-saml-sp-encryption-key-path</code> - The path to a PEM file containing the private RSA key for decrypting the assertion.</li>
<li><code>auth-saml-sp-encryption-cert-path</code> - The path to a PEM file containing the public certificate for encrypting the assertion. The contents of this file will be present in your server metadata after configured. You may also be asked to upload this certificate to the IdP instead.</li>
</ul>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-sp-encryption-key-path</span><span class="ot">=</span><span class="st">/path/to/saml.key</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-sp-encryption-cert-path</span><span class="ot">=</span><span class="st">/path/to/saml.cert</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>These key pair files are similar to the ones used for SSL/TLS. However, for security reasons you must never use your server’s own SSL/TLS key and certificate for SAML encryption.</p>
</div>
</div>
<p>This example allows the creation of a simple self-signed public certificate and private key pair that can be used for encryption for the server “localhost” (you should use your server public facing hostname instead):</p>
<pre><code>openssl req -x509 -newkey rsa:2048 -keyout saml.key -out saml.cert -days 365 -nodes -subj "/CN=localhost"</code></pre>
</section>
<section id="saml-request-signing" class="level3">
<h3 class="anchored" data-anchor-id="saml-request-signing">SAML Request Signing</h3>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In most situations, SAML authentication request signing is not required or even supported. Be sure your IdP requires signing before using this functionality.</p>
</div>
</div>
<p>To enable support for signed SAML authentication requests, you need to set a signing method in your server configuration with the option <code>auth-saml-sp-request-signing-method</code>. The algorithms <code>sha1</code>, <code>sha256</code>, or <code>sha512</code> are supported. When in doubt, try <code>sha256</code> first which offers a good balance between security and compatibility.</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-sp-request-signing-method</span><span class="ot">=</span><span class="st">sha256</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>By using one of the signing methods listed above the RStudio metadata will contain a <code>"signing"</code> certificate and will have the attribute <code>AuthnRequestsSigned</code> with the <code>true</code> value.</p>
</div>
</div>
<p>You will also need a key pair in the form of a public certificate file and a private RSA key, both in PEM format. If you are using <a href="#saml-encryption">SAML Encryption</a>, the already configured encryption key pair will also be used for request signing.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>RStudio only accepts a single key pair. You can use a key pair for <strong>both</strong> encryption and signing requests or one just for signing. Different key pairs for signing and encryption are not currently supported.</p>
</div>
</div>
<p>If you are not currently using SAML encryption, the following options should be added to your server:</p>
<ul>
<li><code>auth-saml-sp-signing-key-path</code> - The path to a PEM file containing the private RSA key for decrypting the assertion.</li>
<li><code>auth-saml-sp-signing-cert-path</code> - The path to a PEM file containing the public certificate for encrypting the assertion. The contents of this file will be present in your server metadata after configured. You may also be asked to upload this certificate to the IdP instead.</li>
</ul>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-sp-signing-key-path</span><span class="ot">=</span><span class="st">/path/to/signing.key</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-sp-signing-cert-path</span><span class="ot">=</span><span class="st">/path/to/signing.cert</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>These key pair files are similar to the ones used for SSL/TLS. However, for security reasons you must never use your server’s own SSL/TLS key and certificate for SAML encryption.</p>
</div>
</div>
<p>This example allows the creation of a simple self-signed public certificate and private key pair that can be used for encryption for the server “localhost” (you should use your server public facing hostname instead):</p>
<pre><code>openssl req -x509 -newkey rsa:2048 -keyout saml.key -out saml.cert -days 365 -nodes -subj "/CN=localhost"</code></pre>
</section>
<section id="unsupported-saml-options" class="level3">
<h3 class="anchored" data-anchor-id="unsupported-saml-options">Unsupported SAML Options</h3>
<p>RStudio Workbench supports at least a subset of SAML called <a href="http://saml2int.org/">Interoperable SAML</a>. Notably, certain functionalities are currently absent:</p>
<ul>
<li>Single Logout</li>
<li>Certificate chain validation</li>
<li>RelayState URL handling (not part of the SAML standard)</li>
</ul>
</section>
<section id="proxy-considerations" class="level3">
<h3 class="anchored" data-anchor-id="proxy-considerations">Proxy Considerations</h3>
<p>If you are running RStudio behind a proxy, you will need to configure your proxy in a way that RStudio can tell the SAML IdP to redirect back to the correct location. There are number of options to choose from as described in [Running with a Proxy].</p>
<p>The use of the <code>X-RStudio-Request</code> header in your proxy is recommended and the only method which works behind a path-rewriting proxy. In this case, the proxy must set the <code>X-RStudio-Request</code> header to the exact complete URL as requested by the browser. For example if your proxy was set up to serve RStudio requests at <code>https://testdomain.com/rstudio/</code> and an incoming request for <code>/home</code> came in, your proxy should set <code>X-RStudio-Request: https://testdomain.com/rstudio/home</code> which would allow RStudio to know about the added path prefix <code>/rstudio</code>.</p>
<p>If your proxy does not add path prefixes, RStudio is also compatible with two options using commonly available HTTP proxy headers:</p>
<ul>
<li>The headers <code>X-Forwarded-Host</code>, <code>X-Forwarded-Proto</code>, and <code>X-Forwarded-Port</code>.</li>
<li>Or the header <code>Forwarded</code> with <code>host</code>, and <code>proto</code> values.</li>
</ul>
<p>When using path-rewriting proxies, it’s also recommended to use either the header <code>X-RStudio-Root-Path</code> or the option <code>www-root-path</code> to indicate the path defined for RStudio by the proxy. For example, if your URL to RStudio is <code>www.example.com/rstudio</code> your proxy should send the header <code>X-RStudio-Root-Path: /rstudio</code> or you should use:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="dt">www-root-path</span><span class="ot">=</span><span class="st">/rstudio</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If none of the headers above are set by the proxy, RStudio will attempt to redirect back to the address present in the <code>Host</code> header and it will determine the protocol (<code>http</code> or <code>https</code>) based on its current configuration.</p>
<p>If you are running behind a proxy but cannot set headers for whatever reason, and <code>www-root-path</code> is not the right choice, you can use the <code>auth-sp-saml-base-uri</code> option in the RStudio configuration file to accomplish the same purpose:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-saml-sp-base-uri</span><span class="ot">=</span><span class="st">http://testdomain.com/rstudio/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="outgoing-proxies" class="level3">
<h3 class="anchored" data-anchor-id="outgoing-proxies">Outgoing Proxies</h3>
<p>Some SAML authentication features require RStudio to make a call to an external service over HTTP or HTTPS; for example, to perform provider metadata discovery. If your environment requires an HTTP or HTTPS proxy for outbound requests, you must set the appropriate proxy environment variables for RStudio’s server process so that it uses the proxy when making the request.</p>
<p>One way to do this is to add the variables to <code>env-vars</code> as follows:</p>
<p><em>/etc/rstudio/env-vars</em></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="dt">HTTP_PROXY</span><span class="ot">=</span><span class="st">http://</span><span class="dv">192</span><span class="st">.</span><span class="dv">168</span><span class="st">.</span><span class="fl">1.1</span><span class="st">:</span><span class="dv">8080</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="dt">HTTPS_PROXY</span><span class="ot">=</span><span class="st">http://</span><span class="dv">192</span><span class="st">.</span><span class="dv">168</span><span class="st">.</span><span class="fl">1.1</span><span class="st">:</span><span class="dv">8080</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="dt">NO_PROXY</span><span class="ot">=</span><span class="kw">localhost</span><span class="st">,</span><span class="dv">192</span><span class="st">.</span><span class="dv">168</span><span class="st">.</span><span class="fl">1.10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="troubleshooting" class="level3">
<h3 class="anchored" data-anchor-id="troubleshooting">Troubleshooting</h3>
<p>Additional information about the SAML flow and the received assertion may be written to the logs. Be sure to configure <code>rserver</code> logs to output <code>info</code> level messages in <code>/etc/rstudio/logging.conf</code> to see these entries.</p>
</section>
</section>
<section id="openid-connect-authentication" class="level2 pro-header">
<h2 class="pro-header anchored" data-anchor-id="openid-connect-authentication">OpenID Connect Authentication</h2>
<p>RStudio Workbench can be configured to authenticate users via OpenID Connect. This enables users to log in with their existing Single Sign-On (SSO) credentials and to be automatically authenticated to RStudio whenever they are already logged into their OpenID Provider (OP) account.</p>
<section id="enabling-openid-connect" class="level3">
<h3 class="anchored" data-anchor-id="enabling-openid-connect">Enabling OpenID Connect</h3>
<p>To enable authentication with OpenID you add the <code>auth-openid</code> option to the RStudio configuration file:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-openid</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Once you enable authentication with OpenID, that becomes the exclusive means of authentication (you can’t concurrently use both PAM and OpenID authentication).</strong></p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>OpenID authentication still requires [PAM Sessions] and <code>sssd</code> to automatically create local system accounts. Without them, local system accounts have to be provisioned manually one-by-one.</p>
</div>
</div>
</section>
<section id="configuring-your-openid-provider" class="level3">
<h3 class="anchored" data-anchor-id="configuring-your-openid-provider">Configuring your OpenID Provider</h3>
<p>In order to use OpenID with RStudio Workbench you need to register your server on your OP first.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>RStudio Workbench supports the OAuth2 “Authorization Code” flow with OpenID.</p>
</div>
</div>
<section id="openid-urls" class="level4">
<h4 class="anchored" data-anchor-id="openid-urls">OpenID URLs</h4>
<p>RStudio Workbench expects an OAuth2 callback in order to complete the OpenID authentication. The endpoint responsible for handling this callback from the OP is localted at <code>/openid/callback</code>. For example, if your RStudio Workbench server is hosted at <code>https://rstudio.example.com/</code> the callback URL will be <code>https://rstudio.example.com/openid/callback</code>. While registering RStudio Workbench on your OpenID Provider, this URL will be requested. Your server URL may also be requested as part of that setup.</p>
</section>
<section id="client-credentials" class="level4">
<h4 class="anchored" data-anchor-id="client-credentials">Client Credentials</h4>
<p>As part of the RStudio Workbench registration on your OP, a “client ID” and a “client secret” may be presented to you. You need to add a configuration file (<code>/etc/rstudio/openid-client-secret</code>) containing the <code>client-id</code> and <code>client-secret</code>. For example, the configuration file might look like this:</p>
<p><em>/etc/rstudio/openid-client-secret</em></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="dt">client-id</span><span class="ot">=</span><span class="st">lllllllllllll-xxxxxxxxxxxxxxxxxxxxxx</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="dt">client-secret</span><span class="ot">=</span><span class="st">BhCC6rK7Sj2ZtPH0ord7lO1w</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>/etc/rstudio/openid-client-secret</code> file should have user read/write file permissions (i.e., 0600) to protect its contents from other users. You can ensure this as follows:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo chmod 0600 /etc/rstudio/openid-client-secret</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The above <code>client-id</code> and <code>client-secret</code> aren’t the actual values you’ll use. Rather, you should substitute the values that you obtained from your OP when registering your site for OAuth 2.0 authentication.</p>
</div>
</div>
<section id="client-secret-encryption" class="level5">
<h5 class="anchored" data-anchor-id="client-secret-encryption">Client Secret Encryption</h5>
<p>An unencrypted value in the <code>client-secret</code> option of the <code>/etc/rstudio/openid-client-secret</code> file must only be used temporarily for testing purposes. A warning will be present in RStudio log output when an unencrypted secret is being used.</p>
<p>We strongly recommend encrypting the client secret using the command <code>rstudio-server encrypt-password</code>. This way, if you have to backup your configuration, save it to a repository or share it with RStudio Support, your OpenID client secret will be protected.</p>
<p>Use the following steps to encrypt the OpenID client secret:</p>
<ul>
<li>Run the command <code>sudo rstudio-server encrypt-password</code> and enter the client secret.</li>
<li>Copy the resulting encrypted secret printed in the terminal.</li>
<li>Add or replace the <code>client-secret</code> option in the <code>openid-client-secret</code> file using the encrypted secret copied above.</li>
<li>Restart RStudio. Confirm it operates normally. You should no longer see a warning about unencrypted secret in RStudio logs.</li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Alternatively, you can also “pipe” your secret to the <code>rstudio-server encrypt-password</code> command to skip the prompt. Useful when the secret is already stored elsewhere. For example:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> secretfile <span class="kw">|</span> <span class="fu">sudo</span> rstudio-server encrypt-password</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
</section>
<section id="openid-issuer-and-well-known-configuration" class="level4">
<h4 class="anchored" data-anchor-id="openid-issuer-and-well-known-configuration">OpenID Issuer and Well-Known configuration</h4>
<p>RStudio Workbench also needs to be configured to be able to authenticate the authorization codes returned by the OP. In order to do that, RStudio needs to know the location of the OP with its “issuer” URL. This can be done by adding the option <code>auth-openid-issuer</code>. This must be an HTTPS URL and the location of the <code>/.well-known/openid-configuration</code> metadata discovery. For example, if your OpenID issuer is <code>https://op.example.com/</code> the discovery endpoint should be <code>https://op.example.com/.well-known/openid-configuration</code>.</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-openid-issuer</span><span class="ot">=</span><span class="st">https://op.example.com</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="openid-claims" class="level4">
<h4 class="anchored" data-anchor-id="openid-claims">OpenID Claims</h4>
<p>Your OP must return at least one claim matching the user’s Linux account username (lowercase). By default, RStudio Workbench will look for a claim called <code>preferred_username</code> (case-sensitive). If you wish to use a different claim, add the option <code>auth-openid-username-claim</code> with the appropriate value.</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-openid-username-claim</span><span class="ot">=</span><span class="st">other</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="advanced-options-1" class="level3">
<h3 class="anchored" data-anchor-id="advanced-options-1">Advanced Options</h3>
<p>Depending on your choice for the username claim your OpenID Provider may require the initial request to contain a certain “scope”. RStudio Workbench automatically includes the scopes <code>openid</code>, <code>email</code> and <code>profiles</code> as part of the authentication. If you wish to include additional scopes, use the option <code>auth-openid-scopes</code> with a space-separated list of values.</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-openid-scopes</span><span class="ot">=</span><span class="st">scope1 scope2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Quotation marks are not accepted around the scope values.</p>
</div>
</div>
</section>
<section id="proxy-considerations-1" class="level3">
<h3 class="anchored" data-anchor-id="proxy-considerations-1">Proxy Considerations</h3>
<p>If you are running RStudio behind a proxy, you will need to configure your proxy in a way that RStudio can tell the OP to redirect back to the correct location. There are number of options to choose from as described in [Running with a Proxy].</p>
<p>The use of the <code>X-RStudio-Request</code> header in your proxy is recommended and the only method which works behind a path-rewriting proxy. In this case, the proxy must set the <code>X-RStudio-Request</code> header to the exact complete URL as requested by the browser. For example if your proxy was set up to serve RStudio requests at <code>https://testdomain.com/rstudio/</code> and an incoming request for <code>/home</code> came in, your proxy should set <code>X-RStudio-Request: https://testdomain.com/rstudio/home</code> which would allow RStudio to know about the added path prefix <code>/rstudio</code>.</p>
<p>If your proxy does not add path prefixes, RStudio is also compatible with two options using commonly available HTTP proxy headers:</p>
<ul>
<li>The headers <code>X-Forwarded-Host</code>, <code>X-Forwarded-Proto</code>, and <code>X-Forwarded-Port</code>.</li>
<li>Or the header <code>Forwarded</code> with <code>host</code>, and <code>proto</code> values.</li>
</ul>
<p>When using path-rewriting proxies, it’s also recommended to use either the header <code>X-RStudio-Root-Path</code> or the option <code>www-root-path</code> to indicate the path defined for RStudio by the proxy. For example, if your URL to RStudio is <code>www.example.com/rstudio</code> your proxy should send the header <code>X-RStudio-Root-Path: /rstudio</code> or you should use:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="dt">www-root-path</span><span class="ot">=</span><span class="st">/rstudio</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If none of the headers above are set by the proxy, RStudio will attempt to redirect back to the address present in the <code>Host</code> header and it will determine the protocol (<code>http</code> or <code>https</code>) based on its current configuration.</p>
<p>If you are running behind a proxy but cannot set headers for whatever reason, and <code>www-root-path</code> is not the right choice, you can use the <code>auth-openid-base-uri</code> option in the RStudio configuration file to accomplish the same purpose:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-openid-base-uri</span><span class="ot">=</span><span class="st">http://testdomain.com/rstudio/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="outgoing-proxies-1" class="level3">
<h3 class="anchored" data-anchor-id="outgoing-proxies-1">Outgoing Proxies</h3>
<p>Some OpenID authentication features require RStudio to make a call to an external service over HTTP or HTTPS; for example, to retrieve the provider’s OpenID configuration from a known endpoint. If your environment requires an HTTP or HTTPS proxy for outbound requests, you must set the appropriate proxy environment variables for RStudio’s server process so that it uses the proxy when making the request.</p>
<p>One way to do this is to add the variables to <code>env-vars</code>; for example:</p>
<p><em>/etc/rstudio/env-vars</em></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="dt">HTTP_PROXY</span><span class="ot">=</span><span class="st">http://</span><span class="dv">192</span><span class="st">.</span><span class="dv">168</span><span class="st">.</span><span class="fl">1.1</span><span class="st">:</span><span class="dv">8080</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="dt">HTTPS_PROXY</span><span class="ot">=</span><span class="st">http://</span><span class="dv">192</span><span class="st">.</span><span class="dv">168</span><span class="st">.</span><span class="fl">1.1</span><span class="st">:</span><span class="dv">8080</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="dt">NO_PROXY</span><span class="ot">=</span><span class="kw">localhost</span><span class="st">,</span><span class="dv">192</span><span class="st">.</span><span class="dv">168</span><span class="st">.</span><span class="fl">1.10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="troubleshooting-1" class="level3">
<h3 class="anchored" data-anchor-id="troubleshooting-1">Troubleshooting</h3>
<p>Additional information about the OpenID flow and the received claims may be written to the logs. Be sure to configure <code>rserver</code> logs to output <code>info</code> level messages in <code>/etc/rstudio/logging.conf</code> to see these entries.</p>
</section>
</section>
<section id="proxied-authentication" class="level2 pro-header">
<h2 class="pro-header anchored" data-anchor-id="proxied-authentication">Proxied Authentication</h2>
<p>You can configure RStudio Workbench to participate in an existing web-based single-sign-on authentication scheme using proxied authentication. In this configuration all traffic to RStudio Workbench is handled by a proxy server which also handles user authentication.</p>
<p>In this configuration the proxy server adds a special HTTP header to requests to RStudio Workbench letting it know which authenticated user is making the request. RStudio Workbench trusts this header, launching and directing traffic to an R session owned by the specified user.</p>
<p>The specified user must have a local system account on the server. You should set up local system accounts manually and then map authenticating users to these accounts.</p>
<section id="enabling-proxied-authentication" class="level3">
<h3 class="anchored" data-anchor-id="enabling-proxied-authentication">Enabling Proxied Authentication</h3>
<p>To enable proxied authentication you need to specify both the <code>auth-proxy</code> and <code>auth-proxy-sign-in-url</code> settings (the sign-in URL is the absolute URL to the page that users should be redirected to for sign-in). For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-proxy</span><span class="ot">=</span><span class="dv">1</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-proxy-sign-in-url</span><span class="ot">=</span><span class="st">http://example.com/sign-in</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Once you enable authentication with a proxy, that becomes the exclusive means of authentication (you can’t concurrently use both PAM and proxied authentication).</strong></p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Proxied authentication still requires [PAM Sessions] and <code>sssd</code> to automatically create local system accounts. Without them, local system accounts have to be provisioned manually one-by-one.</p>
</div>
</div>
</section>
<section id="implementing-the-proxy" class="level3">
<h3 class="anchored" data-anchor-id="implementing-the-proxy">Implementing the Proxy</h3>
<section id="sign-in-and-sign-out-urls" class="level4">
<h4 class="anchored" data-anchor-id="sign-in-and-sign-out-urls">Sign In and Sign Out URLs</h4>
<p>The sign in URL should host a page where the user specifies their credentials (this might be for example the main page for an existing web-based authentication system). After collecting and authorizing the credentials the sign in URL should then redirect back to the URL hosting RStudio Workbench.</p>
<p>RStudio will redirect to the sign in URL under the following conditions:</p>
<ul>
<li><p>Whenever an HTTP request that lacks the username header is received by the server; and</p></li>
<li><p>When the user clicks the “Sign out” button in the RStudio IDE user interface and there is no Sign Out URL available.</p></li>
</ul>
<p>The sign out URL should host a page responsible for finishing the user session in the authentication proxy. If such a URL is URL available in your proxy, the absolute URL should be configured in RStudio using the setting <code>auth-proxy-sign-out-url</code>. When the user clicks the “Sign out” button in the RStudio IDE user interface the browser will be taken to the configured sign out URL.</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-proxy-sign-out-url</span><span class="ot">=</span><span class="st">http://example.com/sign-out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You should be sure in setting up the proxy server that traffic bound for the sign-in and sign-out URLs is excluded from forwarding to RStudio Workbench (otherwise it will end up in an infinite redirect loop).</p>
</section>
<section id="sign-in-delay" class="level4">
<h4 class="anchored" data-anchor-id="sign-in-delay">Sign-In Delay</h4>
<p>During proxied authentication in RStudio, there is a brief transition page that shows the username and some other information. By default this transition happens almost immediately. If you wish to present this page for a longer period of time, you can use the option <code>auth-proxy-sign-in-delay</code> to delay the transition for some seconds.</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-proxy-sign-in-delay</span><span class="ot">=</span><span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="forwarding-the-username" class="level4">
<h4 class="anchored" data-anchor-id="forwarding-the-username">Forwarding the Username</h4>
<p>When proxying pre-authenticated traffic to RStudio Workbench you need to include a special HTTP header (by default <code>X-RStudio-Username</code>) with each request indicating which user the request is associated with. For example:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="dt">X-RStudio-Username: jsmith</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>It’s also possible to specify both a system username and a display username (in the case where system accounts are dynamically provisioned and don’t convey actual user identity). For example, if the system user is <code>ruser24</code> but the displayed username is <code>jsmith</code>, you could use:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="dt">X-RStudio-Username: rsuser24/jsmith</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that is highly recommended that you <em>do not use</em> the default <code>X-RStudio-Username</code> header name. The reasons for this are described in the section on security considerations immediately below.</p>
</section>
<section id="rewriting-usernames" class="level4">
<h4 class="anchored" data-anchor-id="rewriting-usernames">Rewriting Usernames</h4>
<p>It may be that the proxy system you are using sends the username in a format that doesn’t match that of users on the system, however can be easily transformed to one that does (e.g.&nbsp;it has a standard prefix before the username). If this is the case you can specify the <code>auth-proxy-user-header-rewrite</code> option to provide a re-write rule for the inbound header. For example, the following rule strips the prefix “UID-” from a username header:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>auth-proxy-user-header-rewrite=^UID-(<span class="co">[</span><span class="ot">a-z</span><span class="co">]</span>+)$ $1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The format of a re-write rule is a regular expression followed by a space and then a replacement string. The replacement string can reference captured parts of the regular expression using <code>$1</code>, <code>$2</code>, etc. Consult the <a href="https://www.boost.org/doc/libs/1_64_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html">Boost Perl Regular Expression Syntax</a> reference for more syntax documentation.</p>
</section>
</section>
<section id="proxy-security-considerations" class="level3">
<h3 class="anchored" data-anchor-id="proxy-security-considerations">Proxy Security Considerations</h3>
<p>When using proxied authentication, RStudio trusts that the proxy is the only element in the network capable of sending the special header with the username. Be sure to follow the recommendations below to decrease security risks in your implementation.</p>
<section id="keeping-the-header-name-secret" class="level4">
<h4 class="anchored" data-anchor-id="keeping-the-header-name-secret">Keeping the Header Name Secret</h4>
<p>Using the default header name <code>X-RStudio-Username</code> creates a security problem: code running behind the proxy (e.g., code within R sessions) could form requests back to the server which impersonate other users (by simply inserting the header in their request).</p>
<p>To prevent this issue you can specify a custom header name which is kept secret from end users. This is done by creating a special configuration file (<code>/etc/rstudio/secure-proxy-user-header</code>) that contains the name of the header, and then setting it’s file permissions so that it’s not readable by normal users. For example:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> sh <span class="at">-c</span> <span class="st">"echo 'X-Secret-User-Header' &gt; /etc/rstudio/secure-proxy-user-header"</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chmod 0600 /etc/rstudio/secure-proxy-user-header</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="preventing-remote-use-of-the-header" class="level4">
<h4 class="anchored" data-anchor-id="preventing-remote-use-of-the-header">Preventing Remote Use of the Header</h4>
<p>When implementing the proxy it’s important to remember that RStudio Workbench will always trust the username header to authenticate users. It’s therefore critical from the standpoint of security that all requests originating from the proxy have this header set explicitly by the proxy (as opposed to allowing the header to be specified by a remote client). RStudio will reject requests containing multiple occurrences of the username header.</p>
</section>
<section id="preventing-internal-access" class="level4">
<h4 class="anchored" data-anchor-id="preventing-internal-access">Preventing Internal Access</h4>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In previous versions, RStudio offered the option <code>auth-proxy-require-hmac</code> to require trust signatures from the proxy, though most proxies have no straightforward means for providing this signature. Therefore, this option has been retired. Following the recommendation below mitigates the same security risks previously covered by the option. If your installation used this option, it should removed from <code>/etc/rstudio/rserver.conf</code>. RStudio will refuse to start if this option is still present and enabled.</p>
</div>
</div>
<p>Your RStudio and proxy configuration should be done in a way where it is impossible for anything other than the proxy to make requests to RStudio. Be sure that:</p>
<ul>
<li>RStudio is configured to listen on a network interface not accessible internally by other processes by adjusting the option <code>www-address</code>.</li>
<li>The network interface where RStudio is running must have firewall settings to prevent any connection to RStudio other than from the proxy.</li>
</ul>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>This should not be considered an exhaustive list. Please consult with your security personnel or IT administrators to determine the exact measures to protect RStudio authentication via a proxy.</p>
</div>
</div>
</section>
</section>
<section id="troubleshooting-with-access-logs" class="level3">
<h3 class="anchored" data-anchor-id="troubleshooting-with-access-logs">Troubleshooting with Access Logs</h3>
<p>If you want to see exactly which requests RStudio is receiving and whether they include the expected username information, you can temporarily enable server access logs using the <code>server-access-log</code> setting as follows:</p>
<p><strong>/etc/rstudio/rserver.conf</strong></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="dt">server-access-log</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After restarting RStudio the following file will contain a record of each HTTP request made to the server along with it’s HTTP response code:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/var/log/rstudio-server/rserver-http-access.log</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The log file will contain entries that look like this:</p>
<pre><code>127.0.0.1 - - [29/Jun/2015:06:30:41 -0400] "GET /s/f01ddf8222bea98a/ HTTP/1.1"
200 91 "http://localhost:8787/s/f01ddf8222bea98a/" "Mozilla/5.0 (X11; Linux x86_64)
AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.125 Safari/537.36" "jsmith"</code></pre>
<p>Note that the very last item in the log file entry is <code>"jsmith"</code>. This is the username that RStudio read from the header passed by the proxy server. If this shows up as blank (<code>"-"</code>) then your proxy server isn’t forwarding the header or using the correct header name in forwarding.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Once you’ve concluded troubleshooting it’s important that you remove the <code>server-access-log=1</code> option from the <code>/etc/rstudio/rserver.conf</code> file (since this log file is not rotated it will eventually consume a large amount of disk space if you don’t remove the option).</p>
</div>
</div>
</section>
</section>
<section id="google-accounts-deprecated" class="level2 pro-header">
<h2 class="pro-header anchored" data-anchor-id="google-accounts-deprecated">Google Accounts (deprecated)</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>While it is still possible to configure this authentication method, note that in future releases of RStudio, this authentication method will migrate to use OpenID Connect instead; Google itself uses OpenID as an underlying authentication mechanism. Additionally, RStudio Desktop Pro clients will be unable to connect to RStudio Workbench when it is configured to use Google Authentication due to new restrictions from Google - see <a href="https://developers.googleblog.com/2020/08/guidance-for-our-effort-to-block-less-secure-browser-and-apps.html">Google’s Notice</a> for more information.</p>
</div>
</div>
<p>RStudio Workbench can be configured to authenticate users via Google Accounts. This enables users to log in with their existing Gmail or Google Apps credentials and to be automatically authenticated to RStudio whenever they are already logged into their Google account.</p>
<section id="registering-with-google" class="level3">
<h3 class="anchored" data-anchor-id="registering-with-google">Registering with Google</h3>
<p>In order to use Google Accounts with RStudio Workbench you need to register your server with Google for OAuth 2.0 Authentication. You do this by creating a new “Project” for your server in the <em>Google Developer Console</em>:</p>
<p><a href="https://console.developers.google.com/" class="uri">https://console.developers.google.com/</a></p>
<p>Once you’ve created a project you go to the <em>Credentials</em> area of <em>APIs and auth</em> and choose to <strong>Create New Client ID</strong>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/CreateClientID.png" class="img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Create Client Id</figcaption><p></p>
</figure>
</div>
<p>You’ll then be presented with a dialog used to create a new client ID:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/CreateClientIDDialog.png" class="img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Create Client Id</figcaption><p></p>
</figure>
</div>
<p>You should select “Web application” as the application type and provide two URLs that correspond to the server you are deploying on. The screenshot above uses <code>https://www.example.com</code> as the host, you should substitute your own domain and port (if not using a standard one like 80 or 443) in your configuration.</p>
<p>This will result in two values which you’ll need to provide as part of the RStudio Workbench configuration: <code>client-id</code> and <code>client-secret</code> (they’ll be displayed in the <em>Google Developer Console</em> after you complete the dialog).</p>
</section>
<section id="enabling-google-accounts" class="level3">
<h3 class="anchored" data-anchor-id="enabling-google-accounts">Enabling Google Accounts</h3>
<p>To enable authentication with Google Accounts you add the <code>auth-google-accounts</code> option to the RStudio configuration file:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-google-accounts</span><span class="ot">=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Once you enable authentication with Google Accounts that becomes the exclusive means of authentication (you can’t concurrently use both PAM and Google Account authentication).</strong></p>
<p>In addition, you need to add a configuration file (<code>/etc/rstudio/google-client-secret</code>) containing the <code>client-id</code> and <code>client-secret</code> that you received when registering your site with Google. For example, the configuration file might look like this:</p>
<p><em>/etc/rstudio/google-client-secret</em></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="dt">client-id</span><span class="ot">=</span><span class="st">lllllllllllll-xxxxxxxxxxxxxxxxxxxxxx.apps.googleusercontent.com</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="dt">client-secret</span><span class="ot">=</span><span class="st">BhCC6rK7Sj2ZtPH0ord7lO1w</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>/etc/rstudio/google-client-secret</code> file should have user read/write file permissions (i.e., 0600) to protect it’s contents from other users. You can ensure this as follows:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo chmod 0600 /etc/rstudio/google-client-secret</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The above <code>client-id</code> and <code>client-secret</code> aren’t the actual values you’ll use. Rather, you should substitute the values that you obtained from Google when registering your site for OAuth authentication.</p>
</div>
</div>
</section>
<section id="translating-to-local-accounts" class="level3">
<h3 class="anchored" data-anchor-id="translating-to-local-accounts">Translating to Local Accounts</h3>
<section id="creating-matching-accounts" class="level4">
<h4 class="anchored" data-anchor-id="creating-matching-accounts">Creating Matching Accounts</h4>
<p>Once a user is authenticated via Google Accounts it’s necessary to map their Google Accounts identity to a local system account. The default and most straightforward way to do this is to create a local account with a username identical to their Google email address.</p>
<p>If you choose to create local accounts that match Google email addresses, be sure to use only lowercase characters in the account name since Google email addresses are transformed to lower-case prior to matching them to local account names.</p>
<p>One problem with creating local accounts that match Google email addresses is that they often contain characters that are invalid by default within Linux usernames (e.g.&nbsp;@ or .). On Debian/Ubuntu systems it’s possible to force the system to create a user with these characters. Here’s an example of creating a user with a username that contains typically invalid characters:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo adduser <span class="at">--force-badname</span> <span class="op">&lt;</span>username<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>--force-badname</code> option is only available on Debian/Ubuntu systems and is not available on RedHat/CentOS or SLES systems.</p>
</div>
</div>
<p>If the users you are creating will only be accessing the server via RStudio, you may also want to disable their ability to log in as a normal interactive user and to specify that they have no password. For example:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo adduser <span class="at">--force-badname</span> <span class="at">--disabled-login</span> <span class="at">--disabled-password</span> <span class="op">&lt;</span>username<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="using-an-account-mappings-file" class="level4">
<h4 class="anchored" data-anchor-id="using-an-account-mappings-file">Using an Account Mappings File</h4>
<p>Alternatively, you map create local accounts that do not match Google email addresses and then specify a mapping of Google accounts to local accounts via the <code>/etc/rstudio/google-accounts</code> configuration file. For example:</p>
<p><em>/etc/rstudio/google-accounts</em></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="dt">john.smith@gmail.com</span><span class="ot">=</span><span class="st">jsmith</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="dt">sally.jones@gmail.com</span><span class="ot">=</span><span class="st">sjones</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that changes to the <code>google-accounts</code> configuration file take effect immediately and do not require a server restart.</p>
</section>
</section>
<section id="proxy-considerations-2" class="level3">
<h3 class="anchored" data-anchor-id="proxy-considerations-2">Proxy Considerations</h3>
<p>If you are running RStudio behind a proxy, you will need to configure your proxy in a way that RStudio can tell the Google Web Services to redirect back to the correct location. There are number of options to choose from as described in [Running with a Proxy].</p>
<p>The use of the <code>X-RStudio-Request</code> header in your proxy is recommended and the only method which works behind a path-rewriting proxy. In this case, the proxy must set the <code>X-RStudio-Request</code> header to the exact complete URL as requested by the browser. For example if your proxy was set up to serve RStudio requests at <code>https://testdomain.com/rstudio/</code> and an incoming request for <code>/home</code> came in, your proxy should set <code>X-RStudio-Request: https://testdomain.com/rstudio/home</code> which would allow RStudio to know about the added path prefix <code>/rstudio</code>.</p>
<p>If your proxy does not add path prefixes, RStudio is also compatible with two options using commonly available HTTP proxy headers:</p>
<ul>
<li>The headers <code>X-Forwarded-Host</code>, <code>X-Forwarded-Proto</code>, and <code>X-Forwarded-Port</code>.</li>
<li>Or the header <code>Forwarded</code> with <code>host</code>, and <code>proto</code> values.</li>
</ul>
<p>When using path-rewriting proxies, it’s also recommended to use either the header <code>X-RStudio-Root-Path</code> or the option <code>www-root-path</code> to indicate the path defined for RStudio by the proxy. For example, if your URL to RStudio is <code>www.example.com/rstudio</code> your proxy should send the header <code>X-RStudio-Root-Path: /rstudio</code> or you should use:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb53"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="dt">www-root-path</span><span class="ot">=</span><span class="st">/rstudio</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If none of the headers above are set by the proxy, RStudio will attempt to redirect back to the address present in the <code>Host</code> header and it will determine the protocol (<code>http</code> or <code>https</code>) based on its current configuration.</p>
<p>If you are running behind a proxy but cannot set headers for whatever reason, and <code>www-root-path</code> is not the right choice, you can use the <code>auth-google-accounts-redirect-base-uri</code> option in the RStudio configuration file to accomplish the same purpose:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-google-accounts-redirect-base-uri</span><span class="ot">=</span><span class="st">http://testdomain.com/rstudio/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="customizing-the-sign-in-page" class="level2">
<h2 class="anchored" data-anchor-id="customizing-the-sign-in-page">Customizing the Sign-In Page</h2>
<p>You can customize the content and appearance of the RStudio sign-in page by including custom HTML within the page. This is accomplished by either:</p>
<ul>
<li><p>Providing a file at <code>/etc/rstudio/login.html</code> that includes additional HTML to include within the login page; or</p></li>
<li><p>Specifying the <code>auth-login-page-html</code> option within the <code>rserver.conf</code> config file which points to an alternate location for the login HTML file. For example, the following specifies that the file located at <code>/opt/config/rstudio-login.html</code> should be included within the login page:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-login-page-html</span><span class="ot">=</span><span class="st">/opt/config/rstudio-login.html</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
<p>The contents of the specified HTML file will be included after the standard login header and login username/password form. If you want to modify the appearance of the header and/or add content above the username/password form, you can use CSS and JavaScript within your login.html file to modify the page after it loads.</p>
<p>The same can be done to tweak the display of the sign in page for remote RDP sessions as well, with either the <code>/etc/rstudio/rdplogin.html</code> file, or the <code>auth-rdp-login-page-html</code> setting within <code>rserver.conf</code>.</p>
</section>
<section id="authorization-timeout" class="level2">
<h2 class="anchored" data-anchor-id="authorization-timeout">Authorization Timeout</h2>
<section id="inactivity-timeout" class="level3">
<h3 class="anchored" data-anchor-id="inactivity-timeout">Inactivity Timeout</h3>
<p>By default, user authorization will expire after 60 minutes of inactivity, requiring the user to sign in again to continue using their sessions. This is configurable by changing the <code>auth-timeout-minutes</code> setting in <em>/etc/rstudio/rserver.conf</em>. For example, to sign users out after 20 minutes of inactivity instead:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<pre><code>auth-timeout-minutes=20</code></pre>
<p>This setting supersedes the <code>auth-stay-signed-in-days</code> setting discussed below in <a href="#stay-signed-in">Stay Signed In</a>, as it provides additional security by ensuring that users that are not actively using the system do not stay signed in. However, if you wish to allow users to stay signed in for many days at a time and disable the authorization timeout completely, set <code>auth-timeout-minutes</code> to 0, which will cause the <code>auth-stay-signed-in-days</code> setting’s behavior to be used instead.</p>
<p>Whenever a user is signed out, the database will be updated to store recently logged out/invalidated cookies, preventing the use of credential replay attacks.</p>
</section>
<section id="stay-signed-in" class="level3">
<h3 class="anchored" data-anchor-id="stay-signed-in">Stay Signed In</h3>
<p>Users have an option to stay signed in across browser sessions when using PAM or Google authentication methods. By default when choosing the stay signed in option users will remain signed in for 30 days. You can modify this behavior using the <code>auth-stay-signed-in-days</code> setting. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-stay-signed-in-days</span><span class="ot">=</span><span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This setting is deprecated in favor of the <code>auth-timeout-minutes</code> setting for additional security. See <a href="#inactivity-timeout">Inactivity Timeout</a> above for more information.</p>
</div>
</div>
<p>Note that for this setting to take effect, <code>auth-timeout-minutes</code> must be set to 0.</p>
<p>If you want to prevent users from being able to stay signed in, you can prevent the “Stay Signed In” option from being shown to them by using the <code>auth-stay-signed-in</code> setting. For example:</p>
<p><em>/etc/rstudio/rserver.conf</em></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="dt">auth-stay-signed-in</span><span class="ot">=</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Setting this option to <code>0</code> will result in users being prompted to log in each time they start a new browser session (i.e., logins will only be valid as long as the browser process in which they originated in remains running).</p>
<!-- -->
</section>
</section>
</section>
</main>
<div class="page-navigation page-navigation-docked">
  <div class="nav-page nav-page-previous">
  </div>
  <div class="nav-page nav-page-next">
  </div>
</div>
</div> <!-- /main column -->
</div> <!-- /row -->
</div> <!-- /container fluid -->


</body></html>